/*! For license information please see main.9aaac8e35325c80f1079.js.LICENSE.txt */
(()=>{var t,e,n={755:function(t,e){var n;!function(e,n){"use strict";"object"==typeof t.exports?t.exports=e.document?n(e,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return n(t)}:n(e)}("undefined"!=typeof window?window:this,(function(i,r){"use strict";var s=[],o=Object.getPrototypeOf,a=s.slice,c=s.flat?function(t){return s.flat.call(t)}:function(t){return s.concat.apply([],t)},u=s.push,l=s.indexOf,h={},d=h.toString,p=h.hasOwnProperty,f=p.toString,m=f.call(Object),g={},v=function(t){return"function"==typeof t&&"number"!=typeof t.nodeType&&"function"!=typeof t.item},b=function(t){return null!=t&&t===t.window},y=i.document,w={type:!0,src:!0,nonce:!0,noModule:!0};function _(t,e,n){var i,r,s=(n=n||y).createElement("script");if(s.text=t,e)for(i in w)(r=e[i]||e.getAttribute&&e.getAttribute(i))&&s.setAttribute(i,r);n.head.appendChild(s).parentNode.removeChild(s)}function x(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?h[d.call(t)]||"object":typeof t}var A="3.6.0",E=function(t,e){return new E.fn.init(t,e)};function C(t){var e=!!t&&"length"in t&&t.length,n=x(t);return!v(t)&&!b(t)&&("array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t)}E.fn=E.prototype={jquery:A,constructor:E,length:0,toArray:function(){return a.call(this)},get:function(t){return null==t?a.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=E.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return E.each(this,t)},map:function(t){return this.pushStack(E.map(this,(function(e,n){return t.call(e,n,e)})))},slice:function(){return this.pushStack(a.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(E.grep(this,(function(t,e){return(e+1)%2})))},odd:function(){return this.pushStack(E.grep(this,(function(t,e){return e%2})))},eq:function(t){var e=this.length,n=+t+(t<0?e:0);return this.pushStack(n>=0&&n<e?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:u,sort:s.sort,splice:s.splice},E.extend=E.fn.extend=function(){var t,e,n,i,r,s,o=arguments[0]||{},a=1,c=arguments.length,u=!1;for("boolean"==typeof o&&(u=o,o=arguments[a]||{},a++),"object"==typeof o||v(o)||(o={}),a===c&&(o=this,a--);a<c;a++)if(null!=(t=arguments[a]))for(e in t)i=t[e],"__proto__"!==e&&o!==i&&(u&&i&&(E.isPlainObject(i)||(r=Array.isArray(i)))?(n=o[e],s=r&&!Array.isArray(n)?[]:r||E.isPlainObject(n)?n:{},r=!1,o[e]=E.extend(u,s,i)):void 0!==i&&(o[e]=i));return o},E.extend({expando:"jQuery"+(A+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){var e,n;return!(!t||"[object Object]"!==d.call(t))&&(!(e=o(t))||"function"==typeof(n=p.call(e,"constructor")&&e.constructor)&&f.call(n)===m)},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},globalEval:function(t,e,n){_(t,{nonce:e&&e.nonce},n)},each:function(t,e){var n,i=0;if(C(t))for(n=t.length;i<n&&!1!==e.call(t[i],i,t[i]);i++);else for(i in t)if(!1===e.call(t[i],i,t[i]))break;return t},makeArray:function(t,e){var n=e||[];return null!=t&&(C(Object(t))?E.merge(n,"string"==typeof t?[t]:t):u.call(n,t)),n},inArray:function(t,e,n){return null==e?-1:l.call(e,t,n)},merge:function(t,e){for(var n=+e.length,i=0,r=t.length;i<n;i++)t[r++]=e[i];return t.length=r,t},grep:function(t,e,n){for(var i=[],r=0,s=t.length,o=!n;r<s;r++)!e(t[r],r)!==o&&i.push(t[r]);return i},map:function(t,e,n){var i,r,s=0,o=[];if(C(t))for(i=t.length;s<i;s++)null!=(r=e(t[s],s,n))&&o.push(r);else for(s in t)null!=(r=e(t[s],s,n))&&o.push(r);return c(o)},guid:1,support:g}),"function"==typeof Symbol&&(E.fn[Symbol.iterator]=s[Symbol.iterator]),E.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(t,e){h["[object "+e+"]"]=e.toLowerCase()}));var T=function(t){var e,n,i,r,s,o,a,c,u,l,h,d,p,f,m,g,v,b,y,w="sizzle"+1*new Date,_=t.document,x=0,A=0,E=ct(),C=ct(),T=ct(),S=ct(),k=function(t,e){return t===e&&(h=!0),0},R={}.hasOwnProperty,D=[],O=D.pop,L=D.push,P=D.push,I=D.slice,N=function(t,e){for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return n;return-1},M="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",B="[\\x20\\t\\r\\n\\f]",F="(?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",U="\\[[\\x20\\t\\r\\n\\f]*("+F+")(?:"+B+"*([*^$|!~]?=)"+B+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+F+"))|)"+B+"*\\]",H=":("+F+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+U+")*)|.*)\\)|)",j=new RegExp(B+"+","g"),z=new RegExp("^[\\x20\\t\\r\\n\\f]+|((?:^|[^\\\\])(?:\\\\.)*)[\\x20\\t\\r\\n\\f]+$","g"),K=new RegExp("^[\\x20\\t\\r\\n\\f]*,[\\x20\\t\\r\\n\\f]*"),G=new RegExp("^[\\x20\\t\\r\\n\\f]*([>+~]|[\\x20\\t\\r\\n\\f])[\\x20\\t\\r\\n\\f]*"),W=new RegExp(B+"|>"),q=new RegExp(H),X=new RegExp("^"+F+"$"),V={ID:new RegExp("^#("+F+")"),CLASS:new RegExp("^\\.("+F+")"),TAG:new RegExp("^("+F+"|[*])"),ATTR:new RegExp("^"+U),PSEUDO:new RegExp("^"+H),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\([\\x20\\t\\r\\n\\f]*(even|odd|(([+-]|)(\\d*)n|)[\\x20\\t\\r\\n\\f]*(?:([+-]|)[\\x20\\t\\r\\n\\f]*(\\d+)|))[\\x20\\t\\r\\n\\f]*\\)|)","i"),bool:new RegExp("^(?:"+M+")$","i"),needsContext:new RegExp("^[\\x20\\t\\r\\n\\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\([\\x20\\t\\r\\n\\f]*((?:-\\d)?\\d*)[\\x20\\t\\r\\n\\f]*\\)|)(?=[^-]|$)","i")},Y=/HTML$/i,$=/^(?:input|select|textarea|button)$/i,Q=/^h\d$/i,J=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,tt=/[+~]/,et=new RegExp("\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\([^\\r\\n\\f])","g"),nt=function(t,e){var n="0x"+t.slice(1)-65536;return e||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},it=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,rt=function(t,e){return e?"\0"===t?"ï¿½":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t},st=function(){d()},ot=wt((function(t){return!0===t.disabled&&"fieldset"===t.nodeName.toLowerCase()}),{dir:"parentNode",next:"legend"});try{P.apply(D=I.call(_.childNodes),_.childNodes),D[_.childNodes.length].nodeType}catch(t){P={apply:D.length?function(t,e){L.apply(t,I.call(e))}:function(t,e){for(var n=t.length,i=0;t[n++]=e[i++];);t.length=n-1}}}function at(t,e,i,r){var s,a,u,l,h,f,v,b=e&&e.ownerDocument,_=e?e.nodeType:9;if(i=i||[],"string"!=typeof t||!t||1!==_&&9!==_&&11!==_)return i;if(!r&&(d(e),e=e||p,m)){if(11!==_&&(h=Z.exec(t)))if(s=h[1]){if(9===_){if(!(u=e.getElementById(s)))return i;if(u.id===s)return i.push(u),i}else if(b&&(u=b.getElementById(s))&&y(e,u)&&u.id===s)return i.push(u),i}else{if(h[2])return P.apply(i,e.getElementsByTagName(t)),i;if((s=h[3])&&n.getElementsByClassName&&e.getElementsByClassName)return P.apply(i,e.getElementsByClassName(s)),i}if(n.qsa&&!S[t+" "]&&(!g||!g.test(t))&&(1!==_||"object"!==e.nodeName.toLowerCase())){if(v=t,b=e,1===_&&(W.test(t)||G.test(t))){for((b=tt.test(t)&&vt(e.parentNode)||e)===e&&n.scope||((l=e.getAttribute("id"))?l=l.replace(it,rt):e.setAttribute("id",l=w)),a=(f=o(t)).length;a--;)f[a]=(l?"#"+l:":scope")+" "+yt(f[a]);v=f.join(",")}try{return P.apply(i,b.querySelectorAll(v)),i}catch(e){S(t,!0)}finally{l===w&&e.removeAttribute("id")}}}return c(t.replace(z,"$1"),e,i,r)}function ct(){var t=[];return function e(n,r){return t.push(n+" ")>i.cacheLength&&delete e[t.shift()],e[n+" "]=r}}function ut(t){return t[w]=!0,t}function lt(t){var e=p.createElement("fieldset");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function ht(t,e){for(var n=t.split("|"),r=n.length;r--;)i.attrHandle[n[r]]=e}function dt(t,e){var n=e&&t,i=n&&1===t.nodeType&&1===e.nodeType&&t.sourceIndex-e.sourceIndex;if(i)return i;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function pt(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function ft(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function mt(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&ot(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function gt(t){return ut((function(e){return e=+e,ut((function(n,i){for(var r,s=t([],n.length,e),o=s.length;o--;)n[r=s[o]]&&(n[r]=!(i[r]=n[r]))}))}))}function vt(t){return t&&void 0!==t.getElementsByTagName&&t}for(e in n=at.support={},s=at.isXML=function(t){var e=t&&t.namespaceURI,n=t&&(t.ownerDocument||t).documentElement;return!Y.test(e||n&&n.nodeName||"HTML")},d=at.setDocument=function(t){var e,r,o=t?t.ownerDocument||t:_;return o!=p&&9===o.nodeType&&o.documentElement?(f=(p=o).documentElement,m=!s(p),_!=p&&(r=p.defaultView)&&r.top!==r&&(r.addEventListener?r.addEventListener("unload",st,!1):r.attachEvent&&r.attachEvent("onunload",st)),n.scope=lt((function(t){return f.appendChild(t).appendChild(p.createElement("div")),void 0!==t.querySelectorAll&&!t.querySelectorAll(":scope fieldset div").length})),n.attributes=lt((function(t){return t.className="i",!t.getAttribute("className")})),n.getElementsByTagName=lt((function(t){return t.appendChild(p.createComment("")),!t.getElementsByTagName("*").length})),n.getElementsByClassName=J.test(p.getElementsByClassName),n.getById=lt((function(t){return f.appendChild(t).id=w,!p.getElementsByName||!p.getElementsByName(w).length})),n.getById?(i.filter.ID=function(t){var e=t.replace(et,nt);return function(t){return t.getAttribute("id")===e}},i.find.ID=function(t,e){if(void 0!==e.getElementById&&m){var n=e.getElementById(t);return n?[n]:[]}}):(i.filter.ID=function(t){var e=t.replace(et,nt);return function(t){var n=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return n&&n.value===e}},i.find.ID=function(t,e){if(void 0!==e.getElementById&&m){var n,i,r,s=e.getElementById(t);if(s){if((n=s.getAttributeNode("id"))&&n.value===t)return[s];for(r=e.getElementsByName(t),i=0;s=r[i++];)if((n=s.getAttributeNode("id"))&&n.value===t)return[s]}return[]}}),i.find.TAG=n.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):n.qsa?e.querySelectorAll(t):void 0}:function(t,e){var n,i=[],r=0,s=e.getElementsByTagName(t);if("*"===t){for(;n=s[r++];)1===n.nodeType&&i.push(n);return i}return s},i.find.CLASS=n.getElementsByClassName&&function(t,e){if(void 0!==e.getElementsByClassName&&m)return e.getElementsByClassName(t)},v=[],g=[],(n.qsa=J.test(p.querySelectorAll))&&(lt((function(t){var e;f.appendChild(t).innerHTML="<a id='"+w+"'></a><select id='"+w+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&g.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")"),t.querySelectorAll("[selected]").length||g.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|"+M+")"),t.querySelectorAll("[id~="+w+"-]").length||g.push("~="),(e=p.createElement("input")).setAttribute("name",""),t.appendChild(e),t.querySelectorAll("[name='']").length||g.push("\\[[\\x20\\t\\r\\n\\f]*name[\\x20\\t\\r\\n\\f]*=[\\x20\\t\\r\\n\\f]*(?:''|\"\")"),t.querySelectorAll(":checked").length||g.push(":checked"),t.querySelectorAll("a#"+w+"+*").length||g.push(".#.+[+~]"),t.querySelectorAll("\\\f"),g.push("[\\r\\n\\f]")})),lt((function(t){t.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var e=p.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&g.push("name[\\x20\\t\\r\\n\\f]*[*^$|!~]?="),2!==t.querySelectorAll(":enabled").length&&g.push(":enabled",":disabled"),f.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&g.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),g.push(",.*:")}))),(n.matchesSelector=J.test(b=f.matches||f.webkitMatchesSelector||f.mozMatchesSelector||f.oMatchesSelector||f.msMatchesSelector))&&lt((function(t){n.disconnectedMatch=b.call(t,"*"),b.call(t,"[s!='']:x"),v.push("!=",H)})),g=g.length&&new RegExp(g.join("|")),v=v.length&&new RegExp(v.join("|")),e=J.test(f.compareDocumentPosition),y=e||J.test(f.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,i=e&&e.parentNode;return t===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):t.compareDocumentPosition&&16&t.compareDocumentPosition(i)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},k=e?function(t,e){if(t===e)return h=!0,0;var i=!t.compareDocumentPosition-!e.compareDocumentPosition;return i||(1&(i=(t.ownerDocument||t)==(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!n.sortDetached&&e.compareDocumentPosition(t)===i?t==p||t.ownerDocument==_&&y(_,t)?-1:e==p||e.ownerDocument==_&&y(_,e)?1:l?N(l,t)-N(l,e):0:4&i?-1:1)}:function(t,e){if(t===e)return h=!0,0;var n,i=0,r=t.parentNode,s=e.parentNode,o=[t],a=[e];if(!r||!s)return t==p?-1:e==p?1:r?-1:s?1:l?N(l,t)-N(l,e):0;if(r===s)return dt(t,e);for(n=t;n=n.parentNode;)o.unshift(n);for(n=e;n=n.parentNode;)a.unshift(n);for(;o[i]===a[i];)i++;return i?dt(o[i],a[i]):o[i]==_?-1:a[i]==_?1:0},p):p},at.matches=function(t,e){return at(t,null,null,e)},at.matchesSelector=function(t,e){if(d(t),n.matchesSelector&&m&&!S[e+" "]&&(!v||!v.test(e))&&(!g||!g.test(e)))try{var i=b.call(t,e);if(i||n.disconnectedMatch||t.document&&11!==t.document.nodeType)return i}catch(t){S(e,!0)}return at(e,p,null,[t]).length>0},at.contains=function(t,e){return(t.ownerDocument||t)!=p&&d(t),y(t,e)},at.attr=function(t,e){(t.ownerDocument||t)!=p&&d(t);var r=i.attrHandle[e.toLowerCase()],s=r&&R.call(i.attrHandle,e.toLowerCase())?r(t,e,!m):void 0;return void 0!==s?s:n.attributes||!m?t.getAttribute(e):(s=t.getAttributeNode(e))&&s.specified?s.value:null},at.escape=function(t){return(t+"").replace(it,rt)},at.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},at.uniqueSort=function(t){var e,i=[],r=0,s=0;if(h=!n.detectDuplicates,l=!n.sortStable&&t.slice(0),t.sort(k),h){for(;e=t[s++];)e===t[s]&&(r=i.push(s));for(;r--;)t.splice(i[r],1)}return l=null,t},r=at.getText=function(t){var e,n="",i=0,s=t.nodeType;if(s){if(1===s||9===s||11===s){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=r(t)}else if(3===s||4===s)return t.nodeValue}else for(;e=t[i++];)n+=r(e);return n},i=at.selectors={cacheLength:50,createPseudo:ut,match:V,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(et,nt),t[3]=(t[3]||t[4]||t[5]||"").replace(et,nt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||at.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&at.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return V.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&q.test(n)&&(e=o(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(et,nt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=E[t+" "];return e||(e=new RegExp("(^|[\\x20\\t\\r\\n\\f])"+t+"("+B+"|$)"))&&E(t,(function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")}))},ATTR:function(t,e,n){return function(i){var r=at.attr(i,t);return null==r?"!="===e:!e||(r+="","="===e?r===n:"!="===e?r!==n:"^="===e?n&&0===r.indexOf(n):"*="===e?n&&r.indexOf(n)>-1:"$="===e?n&&r.slice(-n.length)===n:"~="===e?(" "+r.replace(j," ")+" ").indexOf(n)>-1:"|="===e&&(r===n||r.slice(0,n.length+1)===n+"-"))}},CHILD:function(t,e,n,i,r){var s="nth"!==t.slice(0,3),o="last"!==t.slice(-4),a="of-type"===e;return 1===i&&0===r?function(t){return!!t.parentNode}:function(e,n,c){var u,l,h,d,p,f,m=s!==o?"nextSibling":"previousSibling",g=e.parentNode,v=a&&e.nodeName.toLowerCase(),b=!c&&!a,y=!1;if(g){if(s){for(;m;){for(d=e;d=d[m];)if(a?d.nodeName.toLowerCase()===v:1===d.nodeType)return!1;f=m="only"===t&&!f&&"nextSibling"}return!0}if(f=[o?g.firstChild:g.lastChild],o&&b){for(y=(p=(u=(l=(h=(d=g)[w]||(d[w]={}))[d.uniqueID]||(h[d.uniqueID]={}))[t]||[])[0]===x&&u[1])&&u[2],d=p&&g.childNodes[p];d=++p&&d&&d[m]||(y=p=0)||f.pop();)if(1===d.nodeType&&++y&&d===e){l[t]=[x,p,y];break}}else if(b&&(y=p=(u=(l=(h=(d=e)[w]||(d[w]={}))[d.uniqueID]||(h[d.uniqueID]={}))[t]||[])[0]===x&&u[1]),!1===y)for(;(d=++p&&d&&d[m]||(y=p=0)||f.pop())&&((a?d.nodeName.toLowerCase()!==v:1!==d.nodeType)||!++y||(b&&((l=(h=d[w]||(d[w]={}))[d.uniqueID]||(h[d.uniqueID]={}))[t]=[x,y]),d!==e)););return(y-=r)===i||y%i==0&&y/i>=0}}},PSEUDO:function(t,e){var n,r=i.pseudos[t]||i.setFilters[t.toLowerCase()]||at.error("unsupported pseudo: "+t);return r[w]?r(e):r.length>1?(n=[t,t,"",e],i.setFilters.hasOwnProperty(t.toLowerCase())?ut((function(t,n){for(var i,s=r(t,e),o=s.length;o--;)t[i=N(t,s[o])]=!(n[i]=s[o])})):function(t){return r(t,0,n)}):r}},pseudos:{not:ut((function(t){var e=[],n=[],i=a(t.replace(z,"$1"));return i[w]?ut((function(t,e,n,r){for(var s,o=i(t,null,r,[]),a=t.length;a--;)(s=o[a])&&(t[a]=!(e[a]=s))})):function(t,r,s){return e[0]=t,i(e,null,s,n),e[0]=null,!n.pop()}})),has:ut((function(t){return function(e){return at(t,e).length>0}})),contains:ut((function(t){return t=t.replace(et,nt),function(e){return(e.textContent||r(e)).indexOf(t)>-1}})),lang:ut((function(t){return X.test(t||"")||at.error("unsupported lang: "+t),t=t.replace(et,nt).toLowerCase(),function(e){var n;do{if(n=m?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(n=n.toLowerCase())===t||0===n.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}})),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===f},focus:function(t){return t===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:mt(!1),disabled:mt(!0),checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!i.pseudos.empty(t)},header:function(t){return Q.test(t.nodeName)},input:function(t){return $.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:gt((function(){return[0]})),last:gt((function(t,e){return[e-1]})),eq:gt((function(t,e,n){return[n<0?n+e:n]})),even:gt((function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t})),odd:gt((function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t})),lt:gt((function(t,e,n){for(var i=n<0?n+e:n>e?e:n;--i>=0;)t.push(i);return t})),gt:gt((function(t,e,n){for(var i=n<0?n+e:n;++i<e;)t.push(i);return t}))}},i.pseudos.nth=i.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})i.pseudos[e]=pt(e);for(e in{submit:!0,reset:!0})i.pseudos[e]=ft(e);function bt(){}function yt(t){for(var e=0,n=t.length,i="";e<n;e++)i+=t[e].value;return i}function wt(t,e,n){var i=e.dir,r=e.next,s=r||i,o=n&&"parentNode"===s,a=A++;return e.first?function(e,n,r){for(;e=e[i];)if(1===e.nodeType||o)return t(e,n,r);return!1}:function(e,n,c){var u,l,h,d=[x,a];if(c){for(;e=e[i];)if((1===e.nodeType||o)&&t(e,n,c))return!0}else for(;e=e[i];)if(1===e.nodeType||o)if(l=(h=e[w]||(e[w]={}))[e.uniqueID]||(h[e.uniqueID]={}),r&&r===e.nodeName.toLowerCase())e=e[i]||e;else{if((u=l[s])&&u[0]===x&&u[1]===a)return d[2]=u[2];if(l[s]=d,d[2]=t(e,n,c))return!0}return!1}}function _t(t){return t.length>1?function(e,n,i){for(var r=t.length;r--;)if(!t[r](e,n,i))return!1;return!0}:t[0]}function xt(t,e,n,i,r){for(var s,o=[],a=0,c=t.length,u=null!=e;a<c;a++)(s=t[a])&&(n&&!n(s,i,r)||(o.push(s),u&&e.push(a)));return o}function At(t,e,n,i,r,s){return i&&!i[w]&&(i=At(i)),r&&!r[w]&&(r=At(r,s)),ut((function(s,o,a,c){var u,l,h,d=[],p=[],f=o.length,m=s||function(t,e,n){for(var i=0,r=e.length;i<r;i++)at(t,e[i],n);return n}(e||"*",a.nodeType?[a]:a,[]),g=!t||!s&&e?m:xt(m,d,t,a,c),v=n?r||(s?t:f||i)?[]:o:g;if(n&&n(g,v,a,c),i)for(u=xt(v,p),i(u,[],a,c),l=u.length;l--;)(h=u[l])&&(v[p[l]]=!(g[p[l]]=h));if(s){if(r||t){if(r){for(u=[],l=v.length;l--;)(h=v[l])&&u.push(g[l]=h);r(null,v=[],u,c)}for(l=v.length;l--;)(h=v[l])&&(u=r?N(s,h):d[l])>-1&&(s[u]=!(o[u]=h))}}else v=xt(v===o?v.splice(f,v.length):v),r?r(null,o,v,c):P.apply(o,v)}))}function Et(t){for(var e,n,r,s=t.length,o=i.relative[t[0].type],a=o||i.relative[" "],c=o?1:0,l=wt((function(t){return t===e}),a,!0),h=wt((function(t){return N(e,t)>-1}),a,!0),d=[function(t,n,i){var r=!o&&(i||n!==u)||((e=n).nodeType?l(t,n,i):h(t,n,i));return e=null,r}];c<s;c++)if(n=i.relative[t[c].type])d=[wt(_t(d),n)];else{if((n=i.filter[t[c].type].apply(null,t[c].matches))[w]){for(r=++c;r<s&&!i.relative[t[r].type];r++);return At(c>1&&_t(d),c>1&&yt(t.slice(0,c-1).concat({value:" "===t[c-2].type?"*":""})).replace(z,"$1"),n,c<r&&Et(t.slice(c,r)),r<s&&Et(t=t.slice(r)),r<s&&yt(t))}d.push(n)}return _t(d)}return bt.prototype=i.filters=i.pseudos,i.setFilters=new bt,o=at.tokenize=function(t,e){var n,r,s,o,a,c,u,l=C[t+" "];if(l)return e?0:l.slice(0);for(a=t,c=[],u=i.preFilter;a;){for(o in n&&!(r=K.exec(a))||(r&&(a=a.slice(r[0].length)||a),c.push(s=[])),n=!1,(r=G.exec(a))&&(n=r.shift(),s.push({value:n,type:r[0].replace(z," ")}),a=a.slice(n.length)),i.filter)!(r=V[o].exec(a))||u[o]&&!(r=u[o](r))||(n=r.shift(),s.push({value:n,type:o,matches:r}),a=a.slice(n.length));if(!n)break}return e?a.length:a?at.error(t):C(t,c).slice(0)},a=at.compile=function(t,e){var n,r=[],s=[],a=T[t+" "];if(!a){for(e||(e=o(t)),n=e.length;n--;)(a=Et(e[n]))[w]?r.push(a):s.push(a);a=T(t,function(t,e){var n=e.length>0,r=t.length>0,s=function(s,o,a,c,l){var h,f,g,v=0,b="0",y=s&&[],w=[],_=u,A=s||r&&i.find.TAG("*",l),E=x+=null==_?1:Math.random()||.1,C=A.length;for(l&&(u=o==p||o||l);b!==C&&null!=(h=A[b]);b++){if(r&&h){for(f=0,o||h.ownerDocument==p||(d(h),a=!m);g=t[f++];)if(g(h,o||p,a)){c.push(h);break}l&&(x=E)}n&&((h=!g&&h)&&v--,s&&y.push(h))}if(v+=b,n&&b!==v){for(f=0;g=e[f++];)g(y,w,o,a);if(s){if(v>0)for(;b--;)y[b]||w[b]||(w[b]=O.call(c));w=xt(w)}P.apply(c,w),l&&!s&&w.length>0&&v+e.length>1&&at.uniqueSort(c)}return l&&(x=E,u=_),y};return n?ut(s):s}(s,r)),a.selector=t}return a},c=at.select=function(t,e,n,r){var s,c,u,l,h,d="function"==typeof t&&t,p=!r&&o(t=d.selector||t);if(n=n||[],1===p.length){if((c=p[0]=p[0].slice(0)).length>2&&"ID"===(u=c[0]).type&&9===e.nodeType&&m&&i.relative[c[1].type]){if(!(e=(i.find.ID(u.matches[0].replace(et,nt),e)||[])[0]))return n;d&&(e=e.parentNode),t=t.slice(c.shift().value.length)}for(s=V.needsContext.test(t)?0:c.length;s--&&(u=c[s],!i.relative[l=u.type]);)if((h=i.find[l])&&(r=h(u.matches[0].replace(et,nt),tt.test(c[0].type)&&vt(e.parentNode)||e))){if(c.splice(s,1),!(t=r.length&&yt(c)))return P.apply(n,r),n;break}}return(d||a(t,p))(r,e,!m,n,!e||tt.test(t)&&vt(e.parentNode)||e),n},n.sortStable=w.split("").sort(k).join("")===w,n.detectDuplicates=!!h,d(),n.sortDetached=lt((function(t){return 1&t.compareDocumentPosition(p.createElement("fieldset"))})),lt((function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")}))||ht("type|href|height|width",(function(t,e,n){if(!n)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)})),n.attributes&&lt((function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")}))||ht("value",(function(t,e,n){if(!n&&"input"===t.nodeName.toLowerCase())return t.defaultValue})),lt((function(t){return null==t.getAttribute("disabled")}))||ht(M,(function(t,e,n){var i;if(!n)return!0===t[e]?e.toLowerCase():(i=t.getAttributeNode(e))&&i.specified?i.value:null})),at}(i);E.find=T,E.expr=T.selectors,E.expr[":"]=E.expr.pseudos,E.uniqueSort=E.unique=T.uniqueSort,E.text=T.getText,E.isXMLDoc=T.isXML,E.contains=T.contains,E.escapeSelector=T.escape;var S=function(t,e,n){for(var i=[],r=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(r&&E(t).is(n))break;i.push(t)}return i},k=function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n},R=E.expr.match.needsContext;function D(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}var O=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function L(t,e,n){return v(e)?E.grep(t,(function(t,i){return!!e.call(t,i,t)!==n})):e.nodeType?E.grep(t,(function(t){return t===e!==n})):"string"!=typeof e?E.grep(t,(function(t){return l.call(e,t)>-1!==n})):E.filter(e,t,n)}E.filter=function(t,e,n){var i=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===i.nodeType?E.find.matchesSelector(i,t)?[i]:[]:E.find.matches(t,E.grep(e,(function(t){return 1===t.nodeType})))},E.fn.extend({find:function(t){var e,n,i=this.length,r=this;if("string"!=typeof t)return this.pushStack(E(t).filter((function(){for(e=0;e<i;e++)if(E.contains(r[e],this))return!0})));for(n=this.pushStack([]),e=0;e<i;e++)E.find(t,r[e],n);return i>1?E.uniqueSort(n):n},filter:function(t){return this.pushStack(L(this,t||[],!1))},not:function(t){return this.pushStack(L(this,t||[],!0))},is:function(t){return!!L(this,"string"==typeof t&&R.test(t)?E(t):t||[],!1).length}});var P,I=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(E.fn.init=function(t,e,n){var i,r;if(!t)return this;if(n=n||P,"string"==typeof t){if(!(i="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:I.exec(t))||!i[1]&&e)return!e||e.jquery?(e||n).find(t):this.constructor(e).find(t);if(i[1]){if(e=e instanceof E?e[0]:e,E.merge(this,E.parseHTML(i[1],e&&e.nodeType?e.ownerDocument||e:y,!0)),O.test(i[1])&&E.isPlainObject(e))for(i in e)v(this[i])?this[i](e[i]):this.attr(i,e[i]);return this}return(r=y.getElementById(i[2]))&&(this[0]=r,this.length=1),this}return t.nodeType?(this[0]=t,this.length=1,this):v(t)?void 0!==n.ready?n.ready(t):t(E):E.makeArray(t,this)}).prototype=E.fn,P=E(y);var N=/^(?:parents|prev(?:Until|All))/,M={children:!0,contents:!0,next:!0,prev:!0};function B(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}E.fn.extend({has:function(t){var e=E(t,this),n=e.length;return this.filter((function(){for(var t=0;t<n;t++)if(E.contains(this,e[t]))return!0}))},closest:function(t,e){var n,i=0,r=this.length,s=[],o="string"!=typeof t&&E(t);if(!R.test(t))for(;i<r;i++)for(n=this[i];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(o?o.index(n)>-1:1===n.nodeType&&E.find.matchesSelector(n,t))){s.push(n);break}return this.pushStack(s.length>1?E.uniqueSort(s):s)},index:function(t){return t?"string"==typeof t?l.call(E(t),this[0]):l.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(E.uniqueSort(E.merge(this.get(),E(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),E.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return S(t,"parentNode")},parentsUntil:function(t,e,n){return S(t,"parentNode",n)},next:function(t){return B(t,"nextSibling")},prev:function(t){return B(t,"previousSibling")},nextAll:function(t){return S(t,"nextSibling")},prevAll:function(t){return S(t,"previousSibling")},nextUntil:function(t,e,n){return S(t,"nextSibling",n)},prevUntil:function(t,e,n){return S(t,"previousSibling",n)},siblings:function(t){return k((t.parentNode||{}).firstChild,t)},children:function(t){return k(t.firstChild)},contents:function(t){return null!=t.contentDocument&&o(t.contentDocument)?t.contentDocument:(D(t,"template")&&(t=t.content||t),E.merge([],t.childNodes))}},(function(t,e){E.fn[t]=function(n,i){var r=E.map(this,e,n);return"Until"!==t.slice(-5)&&(i=n),i&&"string"==typeof i&&(r=E.filter(i,r)),this.length>1&&(M[t]||E.uniqueSort(r),N.test(t)&&r.reverse()),this.pushStack(r)}}));var F=/[^\x20\t\r\n\f]+/g;function U(t){return t}function H(t){throw t}function j(t,e,n,i){var r;try{t&&v(r=t.promise)?r.call(t).done(e).fail(n):t&&v(r=t.then)?r.call(t,e,n):e.apply(void 0,[t].slice(i))}catch(t){n.apply(void 0,[t])}}E.Callbacks=function(t){t="string"==typeof t?function(t){var e={};return E.each(t.match(F)||[],(function(t,n){e[n]=!0})),e}(t):E.extend({},t);var e,n,i,r,s=[],o=[],a=-1,c=function(){for(r=r||t.once,i=e=!0;o.length;a=-1)for(n=o.shift();++a<s.length;)!1===s[a].apply(n[0],n[1])&&t.stopOnFalse&&(a=s.length,n=!1);t.memory||(n=!1),e=!1,r&&(s=n?[]:"")},u={add:function(){return s&&(n&&!e&&(a=s.length-1,o.push(n)),function e(n){E.each(n,(function(n,i){v(i)?t.unique&&u.has(i)||s.push(i):i&&i.length&&"string"!==x(i)&&e(i)}))}(arguments),n&&!e&&c()),this},remove:function(){return E.each(arguments,(function(t,e){for(var n;(n=E.inArray(e,s,n))>-1;)s.splice(n,1),n<=a&&a--})),this},has:function(t){return t?E.inArray(t,s)>-1:s.length>0},empty:function(){return s&&(s=[]),this},disable:function(){return r=o=[],s=n="",this},disabled:function(){return!s},lock:function(){return r=o=[],n||e||(s=n=""),this},locked:function(){return!!r},fireWith:function(t,n){return r||(n=[t,(n=n||[]).slice?n.slice():n],o.push(n),e||c()),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!i}};return u},E.extend({Deferred:function(t){var e=[["notify","progress",E.Callbacks("memory"),E.Callbacks("memory"),2],["resolve","done",E.Callbacks("once memory"),E.Callbacks("once memory"),0,"resolved"],["reject","fail",E.Callbacks("once memory"),E.Callbacks("once memory"),1,"rejected"]],n="pending",r={state:function(){return n},always:function(){return s.done(arguments).fail(arguments),this},catch:function(t){return r.then(null,t)},pipe:function(){var t=arguments;return E.Deferred((function(n){E.each(e,(function(e,i){var r=v(t[i[4]])&&t[i[4]];s[i[1]]((function(){var t=r&&r.apply(this,arguments);t&&v(t.promise)?t.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[i[0]+"With"](this,r?[t]:arguments)}))})),t=null})).promise()},then:function(t,n,r){var s=0;function o(t,e,n,r){return function(){var a=this,c=arguments,u=function(){var i,u;if(!(t<s)){if((i=n.apply(a,c))===e.promise())throw new TypeError("Thenable self-resolution");u=i&&("object"==typeof i||"function"==typeof i)&&i.then,v(u)?r?u.call(i,o(s,e,U,r),o(s,e,H,r)):(s++,u.call(i,o(s,e,U,r),o(s,e,H,r),o(s,e,U,e.notifyWith))):(n!==U&&(a=void 0,c=[i]),(r||e.resolveWith)(a,c))}},l=r?u:function(){try{u()}catch(i){E.Deferred.exceptionHook&&E.Deferred.exceptionHook(i,l.stackTrace),t+1>=s&&(n!==H&&(a=void 0,c=[i]),e.rejectWith(a,c))}};t?l():(E.Deferred.getStackHook&&(l.stackTrace=E.Deferred.getStackHook()),i.setTimeout(l))}}return E.Deferred((function(i){e[0][3].add(o(0,i,v(r)?r:U,i.notifyWith)),e[1][3].add(o(0,i,v(t)?t:U)),e[2][3].add(o(0,i,v(n)?n:H))})).promise()},promise:function(t){return null!=t?E.extend(t,r):r}},s={};return E.each(e,(function(t,i){var o=i[2],a=i[5];r[i[1]]=o.add,a&&o.add((function(){n=a}),e[3-t][2].disable,e[3-t][3].disable,e[0][2].lock,e[0][3].lock),o.add(i[3].fire),s[i[0]]=function(){return s[i[0]+"With"](this===s?void 0:this,arguments),this},s[i[0]+"With"]=o.fireWith})),r.promise(s),t&&t.call(s,s),s},when:function(t){var e=arguments.length,n=e,i=Array(n),r=a.call(arguments),s=E.Deferred(),o=function(t){return function(n){i[t]=this,r[t]=arguments.length>1?a.call(arguments):n,--e||s.resolveWith(i,r)}};if(e<=1&&(j(t,s.done(o(n)).resolve,s.reject,!e),"pending"===s.state()||v(r[n]&&r[n].then)))return s.then();for(;n--;)j(r[n],o(n),s.reject);return s.promise()}});var z=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;E.Deferred.exceptionHook=function(t,e){i.console&&i.console.warn&&t&&z.test(t.name)&&i.console.warn("jQuery.Deferred exception: "+t.message,t.stack,e)},E.readyException=function(t){i.setTimeout((function(){throw t}))};var K=E.Deferred();function G(){y.removeEventListener("DOMContentLoaded",G),i.removeEventListener("load",G),E.ready()}E.fn.ready=function(t){return K.then(t).catch((function(t){E.readyException(t)})),this},E.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--E.readyWait:E.isReady)||(E.isReady=!0,!0!==t&&--E.readyWait>0||K.resolveWith(y,[E]))}}),E.ready.then=K.then,"complete"===y.readyState||"loading"!==y.readyState&&!y.documentElement.doScroll?i.setTimeout(E.ready):(y.addEventListener("DOMContentLoaded",G),i.addEventListener("load",G));var W=function(t,e,n,i,r,s,o){var a=0,c=t.length,u=null==n;if("object"===x(n))for(a in r=!0,n)W(t,e,a,n[a],!0,s,o);else if(void 0!==i&&(r=!0,v(i)||(o=!0),u&&(o?(e.call(t,i),e=null):(u=e,e=function(t,e,n){return u.call(E(t),n)})),e))for(;a<c;a++)e(t[a],n,o?i:i.call(t[a],a,e(t[a],n)));return r?t:u?e.call(t):c?e(t[0],n):s},q=/^-ms-/,X=/-([a-z])/g;function V(t,e){return e.toUpperCase()}function Y(t){return t.replace(q,"ms-").replace(X,V)}var $=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};function Q(){this.expando=E.expando+Q.uid++}Q.uid=1,Q.prototype={cache:function(t){var e=t[this.expando];return e||(e={},$(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,n){var i,r=this.cache(t);if("string"==typeof e)r[Y(e)]=n;else for(i in e)r[Y(i)]=e[i];return r},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][Y(e)]},access:function(t,e,n){return void 0===e||e&&"string"==typeof e&&void 0===n?this.get(t,e):(this.set(t,e,n),void 0!==n?n:e)},remove:function(t,e){var n,i=t[this.expando];if(void 0!==i){if(void 0!==e){n=(e=Array.isArray(e)?e.map(Y):(e=Y(e))in i?[e]:e.match(F)||[]).length;for(;n--;)delete i[e[n]]}(void 0===e||E.isEmptyObject(i))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!E.isEmptyObject(e)}};var J=new Q,Z=new Q,tt=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,et=/[A-Z]/g;function nt(t,e,n){var i;if(void 0===n&&1===t.nodeType)if(i="data-"+e.replace(et,"-$&").toLowerCase(),"string"==typeof(n=t.getAttribute(i))){try{n=function(t){return"true"===t||"false"!==t&&("null"===t?null:t===+t+""?+t:tt.test(t)?JSON.parse(t):t)}(n)}catch(t){}Z.set(t,e,n)}else n=void 0;return n}E.extend({hasData:function(t){return Z.hasData(t)||J.hasData(t)},data:function(t,e,n){return Z.access(t,e,n)},removeData:function(t,e){Z.remove(t,e)},_data:function(t,e,n){return J.access(t,e,n)},_removeData:function(t,e){J.remove(t,e)}}),E.fn.extend({data:function(t,e){var n,i,r,s=this[0],o=s&&s.attributes;if(void 0===t){if(this.length&&(r=Z.get(s),1===s.nodeType&&!J.get(s,"hasDataAttrs"))){for(n=o.length;n--;)o[n]&&0===(i=o[n].name).indexOf("data-")&&(i=Y(i.slice(5)),nt(s,i,r[i]));J.set(s,"hasDataAttrs",!0)}return r}return"object"==typeof t?this.each((function(){Z.set(this,t)})):W(this,(function(e){var n;if(s&&void 0===e)return void 0!==(n=Z.get(s,t))||void 0!==(n=nt(s,t))?n:void 0;this.each((function(){Z.set(this,t,e)}))}),null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each((function(){Z.remove(this,t)}))}}),E.extend({queue:function(t,e,n){var i;if(t)return e=(e||"fx")+"queue",i=J.get(t,e),n&&(!i||Array.isArray(n)?i=J.access(t,e,E.makeArray(n)):i.push(n)),i||[]},dequeue:function(t,e){e=e||"fx";var n=E.queue(t,e),i=n.length,r=n.shift(),s=E._queueHooks(t,e);"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===e&&n.unshift("inprogress"),delete s.stop,r.call(t,(function(){E.dequeue(t,e)}),s)),!i&&s&&s.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return J.get(t,n)||J.access(t,n,{empty:E.Callbacks("once memory").add((function(){J.remove(t,[e+"queue",n])}))})}}),E.fn.extend({queue:function(t,e){var n=2;return"string"!=typeof t&&(e=t,t="fx",n--),arguments.length<n?E.queue(this[0],t):void 0===e?this:this.each((function(){var n=E.queue(this,t,e);E._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&E.dequeue(this,t)}))},dequeue:function(t){return this.each((function(){E.dequeue(this,t)}))},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,i=1,r=E.Deferred(),s=this,o=this.length,a=function(){--i||r.resolveWith(s,[s])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";o--;)(n=J.get(s[o],t+"queueHooks"))&&n.empty&&(i++,n.empty.add(a));return a(),r.promise(e)}});var it=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,rt=new RegExp("^(?:([+-])=|)("+it+")([a-z%]*)$","i"),st=["Top","Right","Bottom","Left"],ot=y.documentElement,at=function(t){return E.contains(t.ownerDocument,t)},ct={composed:!0};ot.getRootNode&&(at=function(t){return E.contains(t.ownerDocument,t)||t.getRootNode(ct)===t.ownerDocument});var ut=function(t,e){return"none"===(t=e||t).style.display||""===t.style.display&&at(t)&&"none"===E.css(t,"display")};function lt(t,e,n,i){var r,s,o=20,a=i?function(){return i.cur()}:function(){return E.css(t,e,"")},c=a(),u=n&&n[3]||(E.cssNumber[e]?"":"px"),l=t.nodeType&&(E.cssNumber[e]||"px"!==u&&+c)&&rt.exec(E.css(t,e));if(l&&l[3]!==u){for(c/=2,u=u||l[3],l=+c||1;o--;)E.style(t,e,l+u),(1-s)*(1-(s=a()/c||.5))<=0&&(o=0),l/=s;l*=2,E.style(t,e,l+u),n=n||[]}return n&&(l=+l||+c||0,r=n[1]?l+(n[1]+1)*n[2]:+n[2],i&&(i.unit=u,i.start=l,i.end=r)),r}var ht={};function dt(t){var e,n=t.ownerDocument,i=t.nodeName,r=ht[i];return r||(e=n.body.appendChild(n.createElement(i)),r=E.css(e,"display"),e.parentNode.removeChild(e),"none"===r&&(r="block"),ht[i]=r,r)}function pt(t,e){for(var n,i,r=[],s=0,o=t.length;s<o;s++)(i=t[s]).style&&(n=i.style.display,e?("none"===n&&(r[s]=J.get(i,"display")||null,r[s]||(i.style.display="")),""===i.style.display&&ut(i)&&(r[s]=dt(i))):"none"!==n&&(r[s]="none",J.set(i,"display",n)));for(s=0;s<o;s++)null!=r[s]&&(t[s].style.display=r[s]);return t}E.fn.extend({show:function(){return pt(this,!0)},hide:function(){return pt(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each((function(){ut(this)?E(this).show():E(this).hide()}))}});var ft,mt,gt=/^(?:checkbox|radio)$/i,vt=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,bt=/^$|^module$|\/(?:java|ecma)script/i;ft=y.createDocumentFragment().appendChild(y.createElement("div")),(mt=y.createElement("input")).setAttribute("type","radio"),mt.setAttribute("checked","checked"),mt.setAttribute("name","t"),ft.appendChild(mt),g.checkClone=ft.cloneNode(!0).cloneNode(!0).lastChild.checked,ft.innerHTML="<textarea>x</textarea>",g.noCloneChecked=!!ft.cloneNode(!0).lastChild.defaultValue,ft.innerHTML="<option></option>",g.option=!!ft.lastChild;var yt={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function wt(t,e){var n;return n=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[],void 0===e||e&&D(t,e)?E.merge([t],n):n}function _t(t,e){for(var n=0,i=t.length;n<i;n++)J.set(t[n],"globalEval",!e||J.get(e[n],"globalEval"))}yt.tbody=yt.tfoot=yt.colgroup=yt.caption=yt.thead,yt.th=yt.td,g.option||(yt.optgroup=yt.option=[1,"<select multiple='multiple'>","</select>"]);var xt=/<|&#?\w+;/;function At(t,e,n,i,r){for(var s,o,a,c,u,l,h=e.createDocumentFragment(),d=[],p=0,f=t.length;p<f;p++)if((s=t[p])||0===s)if("object"===x(s))E.merge(d,s.nodeType?[s]:s);else if(xt.test(s)){for(o=o||h.appendChild(e.createElement("div")),a=(vt.exec(s)||["",""])[1].toLowerCase(),c=yt[a]||yt._default,o.innerHTML=c[1]+E.htmlPrefilter(s)+c[2],l=c[0];l--;)o=o.lastChild;E.merge(d,o.childNodes),(o=h.firstChild).textContent=""}else d.push(e.createTextNode(s));for(h.textContent="",p=0;s=d[p++];)if(i&&E.inArray(s,i)>-1)r&&r.push(s);else if(u=at(s),o=wt(h.appendChild(s),"script"),u&&_t(o),n)for(l=0;s=o[l++];)bt.test(s.type||"")&&n.push(s);return h}var Et=/^([^.]*)(?:\.(.+)|)/;function Ct(){return!0}function Tt(){return!1}function St(t,e){return t===function(){try{return y.activeElement}catch(t){}}()==("focus"===e)}function kt(t,e,n,i,r,s){var o,a;if("object"==typeof e){for(a in"string"!=typeof n&&(i=i||n,n=void 0),e)kt(t,a,n,i,e[a],s);return t}if(null==i&&null==r?(r=n,i=n=void 0):null==r&&("string"==typeof n?(r=i,i=void 0):(r=i,i=n,n=void 0)),!1===r)r=Tt;else if(!r)return t;return 1===s&&(o=r,r=function(t){return E().off(t),o.apply(this,arguments)},r.guid=o.guid||(o.guid=E.guid++)),t.each((function(){E.event.add(this,e,r,i,n)}))}function Rt(t,e,n){n?(J.set(t,e,!1),E.event.add(t,e,{namespace:!1,handler:function(t){var i,r,s=J.get(this,e);if(1&t.isTrigger&&this[e]){if(s.length)(E.event.special[e]||{}).delegateType&&t.stopPropagation();else if(s=a.call(arguments),J.set(this,e,s),i=n(this,e),this[e](),s!==(r=J.get(this,e))||i?J.set(this,e,!1):r={},s!==r)return t.stopImmediatePropagation(),t.preventDefault(),r&&r.value}else s.length&&(J.set(this,e,{value:E.event.trigger(E.extend(s[0],E.Event.prototype),s.slice(1),this)}),t.stopImmediatePropagation())}})):void 0===J.get(t,e)&&E.event.add(t,e,Ct)}E.event={global:{},add:function(t,e,n,i,r){var s,o,a,c,u,l,h,d,p,f,m,g=J.get(t);if($(t))for(n.handler&&(n=(s=n).handler,r=s.selector),r&&E.find.matchesSelector(ot,r),n.guid||(n.guid=E.guid++),(c=g.events)||(c=g.events=Object.create(null)),(o=g.handle)||(o=g.handle=function(e){return void 0!==E&&E.event.triggered!==e.type?E.event.dispatch.apply(t,arguments):void 0}),u=(e=(e||"").match(F)||[""]).length;u--;)p=m=(a=Et.exec(e[u])||[])[1],f=(a[2]||"").split(".").sort(),p&&(h=E.event.special[p]||{},p=(r?h.delegateType:h.bindType)||p,h=E.event.special[p]||{},l=E.extend({type:p,origType:m,data:i,handler:n,guid:n.guid,selector:r,needsContext:r&&E.expr.match.needsContext.test(r),namespace:f.join(".")},s),(d=c[p])||((d=c[p]=[]).delegateCount=0,h.setup&&!1!==h.setup.call(t,i,f,o)||t.addEventListener&&t.addEventListener(p,o)),h.add&&(h.add.call(t,l),l.handler.guid||(l.handler.guid=n.guid)),r?d.splice(d.delegateCount++,0,l):d.push(l),E.event.global[p]=!0)},remove:function(t,e,n,i,r){var s,o,a,c,u,l,h,d,p,f,m,g=J.hasData(t)&&J.get(t);if(g&&(c=g.events)){for(u=(e=(e||"").match(F)||[""]).length;u--;)if(p=m=(a=Et.exec(e[u])||[])[1],f=(a[2]||"").split(".").sort(),p){for(h=E.event.special[p]||{},d=c[p=(i?h.delegateType:h.bindType)||p]||[],a=a[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=s=d.length;s--;)l=d[s],!r&&m!==l.origType||n&&n.guid!==l.guid||a&&!a.test(l.namespace)||i&&i!==l.selector&&("**"!==i||!l.selector)||(d.splice(s,1),l.selector&&d.delegateCount--,h.remove&&h.remove.call(t,l));o&&!d.length&&(h.teardown&&!1!==h.teardown.call(t,f,g.handle)||E.removeEvent(t,p,g.handle),delete c[p])}else for(p in c)E.event.remove(t,p+e[u],n,i,!0);E.isEmptyObject(c)&&J.remove(t,"handle events")}},dispatch:function(t){var e,n,i,r,s,o,a=new Array(arguments.length),c=E.event.fix(t),u=(J.get(this,"events")||Object.create(null))[c.type]||[],l=E.event.special[c.type]||{};for(a[0]=c,e=1;e<arguments.length;e++)a[e]=arguments[e];if(c.delegateTarget=this,!l.preDispatch||!1!==l.preDispatch.call(this,c)){for(o=E.event.handlers.call(this,c,u),e=0;(r=o[e++])&&!c.isPropagationStopped();)for(c.currentTarget=r.elem,n=0;(s=r.handlers[n++])&&!c.isImmediatePropagationStopped();)c.rnamespace&&!1!==s.namespace&&!c.rnamespace.test(s.namespace)||(c.handleObj=s,c.data=s.data,void 0!==(i=((E.event.special[s.origType]||{}).handle||s.handler).apply(r.elem,a))&&!1===(c.result=i)&&(c.preventDefault(),c.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,c),c.result}},handlers:function(t,e){var n,i,r,s,o,a=[],c=e.delegateCount,u=t.target;if(c&&u.nodeType&&!("click"===t.type&&t.button>=1))for(;u!==this;u=u.parentNode||this)if(1===u.nodeType&&("click"!==t.type||!0!==u.disabled)){for(s=[],o={},n=0;n<c;n++)void 0===o[r=(i=e[n]).selector+" "]&&(o[r]=i.needsContext?E(r,this).index(u)>-1:E.find(r,this,null,[u]).length),o[r]&&s.push(i);s.length&&a.push({elem:u,handlers:s})}return u=this,c<e.length&&a.push({elem:u,handlers:e.slice(c)}),a},addProp:function(t,e){Object.defineProperty(E.Event.prototype,t,{enumerable:!0,configurable:!0,get:v(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(t){return t[E.expando]?t:new E.Event(t)},special:{load:{noBubble:!0},click:{setup:function(t){var e=this||t;return gt.test(e.type)&&e.click&&D(e,"input")&&Rt(e,"click",Ct),!1},trigger:function(t){var e=this||t;return gt.test(e.type)&&e.click&&D(e,"input")&&Rt(e,"click"),!0},_default:function(t){var e=t.target;return gt.test(e.type)&&e.click&&D(e,"input")&&J.get(e,"click")||D(e,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},E.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n)},E.Event=function(t,e){if(!(this instanceof E.Event))return new E.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?Ct:Tt,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&E.extend(this,e),this.timeStamp=t&&t.timeStamp||Date.now(),this[E.expando]=!0},E.Event.prototype={constructor:E.Event,isDefaultPrevented:Tt,isPropagationStopped:Tt,isImmediatePropagationStopped:Tt,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=Ct,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=Ct,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=Ct,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},E.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},E.event.addProp),E.each({focus:"focusin",blur:"focusout"},(function(t,e){E.event.special[t]={setup:function(){return Rt(this,t,St),!1},trigger:function(){return Rt(this,t),!0},_default:function(){return!0},delegateType:e}})),E.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(t,e){E.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,i=this,r=t.relatedTarget,s=t.handleObj;return r&&(r===i||E.contains(i,r))||(t.type=s.origType,n=s.handler.apply(this,arguments),t.type=e),n}}})),E.fn.extend({on:function(t,e,n,i){return kt(this,t,e,n,i)},one:function(t,e,n,i){return kt(this,t,e,n,i,1)},off:function(t,e,n){var i,r;if(t&&t.preventDefault&&t.handleObj)return i=t.handleObj,E(t.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof t){for(r in t)this.off(r,e,t[r]);return this}return!1!==e&&"function"!=typeof e||(n=e,e=void 0),!1===n&&(n=Tt),this.each((function(){E.event.remove(this,t,n,e)}))}});var Dt=/<script|<style|<link/i,Ot=/checked\s*(?:[^=]|=\s*.checked.)/i,Lt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Pt(t,e){return D(t,"table")&&D(11!==e.nodeType?e:e.firstChild,"tr")&&E(t).children("tbody")[0]||t}function It(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function Nt(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function Mt(t,e){var n,i,r,s,o,a;if(1===e.nodeType){if(J.hasData(t)&&(a=J.get(t).events))for(r in J.remove(e,"handle events"),a)for(n=0,i=a[r].length;n<i;n++)E.event.add(e,r,a[r][n]);Z.hasData(t)&&(s=Z.access(t),o=E.extend({},s),Z.set(e,o))}}function Bt(t,e){var n=e.nodeName.toLowerCase();"input"===n&&gt.test(t.type)?e.checked=t.checked:"input"!==n&&"textarea"!==n||(e.defaultValue=t.defaultValue)}function Ft(t,e,n,i){e=c(e);var r,s,o,a,u,l,h=0,d=t.length,p=d-1,f=e[0],m=v(f);if(m||d>1&&"string"==typeof f&&!g.checkClone&&Ot.test(f))return t.each((function(r){var s=t.eq(r);m&&(e[0]=f.call(this,r,s.html())),Ft(s,e,n,i)}));if(d&&(s=(r=At(e,t[0].ownerDocument,!1,t,i)).firstChild,1===r.childNodes.length&&(r=s),s||i)){for(a=(o=E.map(wt(r,"script"),It)).length;h<d;h++)u=r,h!==p&&(u=E.clone(u,!0,!0),a&&E.merge(o,wt(u,"script"))),n.call(t[h],u,h);if(a)for(l=o[o.length-1].ownerDocument,E.map(o,Nt),h=0;h<a;h++)u=o[h],bt.test(u.type||"")&&!J.access(u,"globalEval")&&E.contains(l,u)&&(u.src&&"module"!==(u.type||"").toLowerCase()?E._evalUrl&&!u.noModule&&E._evalUrl(u.src,{nonce:u.nonce||u.getAttribute("nonce")},l):_(u.textContent.replace(Lt,""),u,l))}return t}function Ut(t,e,n){for(var i,r=e?E.filter(e,t):t,s=0;null!=(i=r[s]);s++)n||1!==i.nodeType||E.cleanData(wt(i)),i.parentNode&&(n&&at(i)&&_t(wt(i,"script")),i.parentNode.removeChild(i));return t}E.extend({htmlPrefilter:function(t){return t},clone:function(t,e,n){var i,r,s,o,a=t.cloneNode(!0),c=at(t);if(!(g.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||E.isXMLDoc(t)))for(o=wt(a),i=0,r=(s=wt(t)).length;i<r;i++)Bt(s[i],o[i]);if(e)if(n)for(s=s||wt(t),o=o||wt(a),i=0,r=s.length;i<r;i++)Mt(s[i],o[i]);else Mt(t,a);return(o=wt(a,"script")).length>0&&_t(o,!c&&wt(t,"script")),a},cleanData:function(t){for(var e,n,i,r=E.event.special,s=0;void 0!==(n=t[s]);s++)if($(n)){if(e=n[J.expando]){if(e.events)for(i in e.events)r[i]?E.event.remove(n,i):E.removeEvent(n,i,e.handle);n[J.expando]=void 0}n[Z.expando]&&(n[Z.expando]=void 0)}}}),E.fn.extend({detach:function(t){return Ut(this,t,!0)},remove:function(t){return Ut(this,t)},text:function(t){return W(this,(function(t){return void 0===t?E.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)}))}),null,t,arguments.length)},append:function(){return Ft(this,arguments,(function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Pt(this,t).appendChild(t)}))},prepend:function(){return Ft(this,arguments,(function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=Pt(this,t);e.insertBefore(t,e.firstChild)}}))},before:function(){return Ft(this,arguments,(function(t){this.parentNode&&this.parentNode.insertBefore(t,this)}))},after:function(){return Ft(this,arguments,(function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)}))},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(E.cleanData(wt(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map((function(){return E.clone(this,t,e)}))},html:function(t){return W(this,(function(t){var e=this[0]||{},n=0,i=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!Dt.test(t)&&!yt[(vt.exec(t)||["",""])[1].toLowerCase()]){t=E.htmlPrefilter(t);try{for(;n<i;n++)1===(e=this[n]||{}).nodeType&&(E.cleanData(wt(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)}),null,t,arguments.length)},replaceWith:function(){var t=[];return Ft(this,arguments,(function(e){var n=this.parentNode;E.inArray(this,t)<0&&(E.cleanData(wt(this)),n&&n.replaceChild(e,this))}),t)}}),E.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(t,e){E.fn[t]=function(t){for(var n,i=[],r=E(t),s=r.length-1,o=0;o<=s;o++)n=o===s?this:this.clone(!0),E(r[o])[e](n),u.apply(i,n.get());return this.pushStack(i)}}));var Ht=new RegExp("^("+it+")(?!px)[a-z%]+$","i"),jt=function(t){var e=t.ownerDocument.defaultView;return e&&e.opener||(e=i),e.getComputedStyle(t)},zt=function(t,e,n){var i,r,s={};for(r in e)s[r]=t.style[r],t.style[r]=e[r];for(r in i=n.call(t),e)t.style[r]=s[r];return i},Kt=new RegExp(st.join("|"),"i");function Gt(t,e,n){var i,r,s,o,a=t.style;return(n=n||jt(t))&&(""!==(o=n.getPropertyValue(e)||n[e])||at(t)||(o=E.style(t,e)),!g.pixelBoxStyles()&&Ht.test(o)&&Kt.test(e)&&(i=a.width,r=a.minWidth,s=a.maxWidth,a.minWidth=a.maxWidth=a.width=o,o=n.width,a.width=i,a.minWidth=r,a.maxWidth=s)),void 0!==o?o+"":o}function Wt(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}!function(){function t(){if(l){u.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",l.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",ot.appendChild(u).appendChild(l);var t=i.getComputedStyle(l);n="1%"!==t.top,c=12===e(t.marginLeft),l.style.right="60%",o=36===e(t.right),r=36===e(t.width),l.style.position="absolute",s=12===e(l.offsetWidth/3),ot.removeChild(u),l=null}}function e(t){return Math.round(parseFloat(t))}var n,r,s,o,a,c,u=y.createElement("div"),l=y.createElement("div");l.style&&(l.style.backgroundClip="content-box",l.cloneNode(!0).style.backgroundClip="",g.clearCloneStyle="content-box"===l.style.backgroundClip,E.extend(g,{boxSizingReliable:function(){return t(),r},pixelBoxStyles:function(){return t(),o},pixelPosition:function(){return t(),n},reliableMarginLeft:function(){return t(),c},scrollboxSize:function(){return t(),s},reliableTrDimensions:function(){var t,e,n,r;return null==a&&(t=y.createElement("table"),e=y.createElement("tr"),n=y.createElement("div"),t.style.cssText="position:absolute;left:-11111px;border-collapse:separate",e.style.cssText="border:1px solid",e.style.height="1px",n.style.height="9px",n.style.display="block",ot.appendChild(t).appendChild(e).appendChild(n),r=i.getComputedStyle(e),a=parseInt(r.height,10)+parseInt(r.borderTopWidth,10)+parseInt(r.borderBottomWidth,10)===e.offsetHeight,ot.removeChild(t)),a}}))}();var qt=["Webkit","Moz","ms"],Xt=y.createElement("div").style,Vt={};function Yt(t){var e=E.cssProps[t]||Vt[t];return e||(t in Xt?t:Vt[t]=function(t){for(var e=t[0].toUpperCase()+t.slice(1),n=qt.length;n--;)if((t=qt[n]+e)in Xt)return t}(t)||t)}var $t=/^(none|table(?!-c[ea]).+)/,Qt=/^--/,Jt={position:"absolute",visibility:"hidden",display:"block"},Zt={letterSpacing:"0",fontWeight:"400"};function te(t,e,n){var i=rt.exec(e);return i?Math.max(0,i[2]-(n||0))+(i[3]||"px"):e}function ee(t,e,n,i,r,s){var o="width"===e?1:0,a=0,c=0;if(n===(i?"border":"content"))return 0;for(;o<4;o+=2)"margin"===n&&(c+=E.css(t,n+st[o],!0,r)),i?("content"===n&&(c-=E.css(t,"padding"+st[o],!0,r)),"margin"!==n&&(c-=E.css(t,"border"+st[o]+"Width",!0,r))):(c+=E.css(t,"padding"+st[o],!0,r),"padding"!==n?c+=E.css(t,"border"+st[o]+"Width",!0,r):a+=E.css(t,"border"+st[o]+"Width",!0,r));return!i&&s>=0&&(c+=Math.max(0,Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-s-c-a-.5))||0),c}function ne(t,e,n){var i=jt(t),r=(!g.boxSizingReliable()||n)&&"border-box"===E.css(t,"boxSizing",!1,i),s=r,o=Gt(t,e,i),a="offset"+e[0].toUpperCase()+e.slice(1);if(Ht.test(o)){if(!n)return o;o="auto"}return(!g.boxSizingReliable()&&r||!g.reliableTrDimensions()&&D(t,"tr")||"auto"===o||!parseFloat(o)&&"inline"===E.css(t,"display",!1,i))&&t.getClientRects().length&&(r="border-box"===E.css(t,"boxSizing",!1,i),(s=a in t)&&(o=t[a])),(o=parseFloat(o)||0)+ee(t,e,n||(r?"border":"content"),s,i,o)+"px"}function ie(t,e,n,i,r){return new ie.prototype.init(t,e,n,i,r)}E.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=Gt(t,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(t,e,n,i){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var r,s,o,a=Y(e),c=Qt.test(e),u=t.style;if(c||(e=Yt(a)),o=E.cssHooks[e]||E.cssHooks[a],void 0===n)return o&&"get"in o&&void 0!==(r=o.get(t,!1,i))?r:u[e];"string"===(s=typeof n)&&(r=rt.exec(n))&&r[1]&&(n=lt(t,e,r),s="number"),null!=n&&n==n&&("number"!==s||c||(n+=r&&r[3]||(E.cssNumber[a]?"":"px")),g.clearCloneStyle||""!==n||0!==e.indexOf("background")||(u[e]="inherit"),o&&"set"in o&&void 0===(n=o.set(t,n,i))||(c?u.setProperty(e,n):u[e]=n))}},css:function(t,e,n,i){var r,s,o,a=Y(e);return Qt.test(e)||(e=Yt(a)),(o=E.cssHooks[e]||E.cssHooks[a])&&"get"in o&&(r=o.get(t,!0,n)),void 0===r&&(r=Gt(t,e,i)),"normal"===r&&e in Zt&&(r=Zt[e]),""===n||n?(s=parseFloat(r),!0===n||isFinite(s)?s||0:r):r}}),E.each(["height","width"],(function(t,e){E.cssHooks[e]={get:function(t,n,i){if(n)return!$t.test(E.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?ne(t,e,i):zt(t,Jt,(function(){return ne(t,e,i)}))},set:function(t,n,i){var r,s=jt(t),o=!g.scrollboxSize()&&"absolute"===s.position,a=(o||i)&&"border-box"===E.css(t,"boxSizing",!1,s),c=i?ee(t,e,i,a,s):0;return a&&o&&(c-=Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-parseFloat(s[e])-ee(t,e,"border",!1,s)-.5)),c&&(r=rt.exec(n))&&"px"!==(r[3]||"px")&&(t.style[e]=n,n=E.css(t,e)),te(0,n,c)}}})),E.cssHooks.marginLeft=Wt(g.reliableMarginLeft,(function(t,e){if(e)return(parseFloat(Gt(t,"marginLeft"))||t.getBoundingClientRect().left-zt(t,{marginLeft:0},(function(){return t.getBoundingClientRect().left})))+"px"})),E.each({margin:"",padding:"",border:"Width"},(function(t,e){E.cssHooks[t+e]={expand:function(n){for(var i=0,r={},s="string"==typeof n?n.split(" "):[n];i<4;i++)r[t+st[i]+e]=s[i]||s[i-2]||s[0];return r}},"margin"!==t&&(E.cssHooks[t+e].set=te)})),E.fn.extend({css:function(t,e){return W(this,(function(t,e,n){var i,r,s={},o=0;if(Array.isArray(e)){for(i=jt(t),r=e.length;o<r;o++)s[e[o]]=E.css(t,e[o],!1,i);return s}return void 0!==n?E.style(t,e,n):E.css(t,e)}),t,e,arguments.length>1)}}),E.Tween=ie,ie.prototype={constructor:ie,init:function(t,e,n,i,r,s){this.elem=t,this.prop=n,this.easing=r||E.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=i,this.unit=s||(E.cssNumber[n]?"":"px")},cur:function(){var t=ie.propHooks[this.prop];return t&&t.get?t.get(this):ie.propHooks._default.get(this)},run:function(t){var e,n=ie.propHooks[this.prop];return this.options.duration?this.pos=e=E.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):ie.propHooks._default.set(this),this}},ie.prototype.init.prototype=ie.prototype,ie.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=E.css(t.elem,t.prop,""))&&"auto"!==e?e:0},set:function(t){E.fx.step[t.prop]?E.fx.step[t.prop](t):1!==t.elem.nodeType||!E.cssHooks[t.prop]&&null==t.elem.style[Yt(t.prop)]?t.elem[t.prop]=t.now:E.style(t.elem,t.prop,t.now+t.unit)}}},ie.propHooks.scrollTop=ie.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},E.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},E.fx=ie.prototype.init,E.fx.step={};var re,se,oe=/^(?:toggle|show|hide)$/,ae=/queueHooks$/;function ce(){se&&(!1===y.hidden&&i.requestAnimationFrame?i.requestAnimationFrame(ce):i.setTimeout(ce,E.fx.interval),E.fx.tick())}function ue(){return i.setTimeout((function(){re=void 0})),re=Date.now()}function le(t,e){var n,i=0,r={height:t};for(e=e?1:0;i<4;i+=2-e)r["margin"+(n=st[i])]=r["padding"+n]=t;return e&&(r.opacity=r.width=t),r}function he(t,e,n){for(var i,r=(de.tweeners[e]||[]).concat(de.tweeners["*"]),s=0,o=r.length;s<o;s++)if(i=r[s].call(n,e,t))return i}function de(t,e,n){var i,r,s=0,o=de.prefilters.length,a=E.Deferred().always((function(){delete c.elem})),c=function(){if(r)return!1;for(var e=re||ue(),n=Math.max(0,u.startTime+u.duration-e),i=1-(n/u.duration||0),s=0,o=u.tweens.length;s<o;s++)u.tweens[s].run(i);return a.notifyWith(t,[u,i,n]),i<1&&o?n:(o||a.notifyWith(t,[u,1,0]),a.resolveWith(t,[u]),!1)},u=a.promise({elem:t,props:E.extend({},e),opts:E.extend(!0,{specialEasing:{},easing:E.easing._default},n),originalProperties:e,originalOptions:n,startTime:re||ue(),duration:n.duration,tweens:[],createTween:function(e,n){var i=E.Tween(t,u.opts,e,n,u.opts.specialEasing[e]||u.opts.easing);return u.tweens.push(i),i},stop:function(e){var n=0,i=e?u.tweens.length:0;if(r)return this;for(r=!0;n<i;n++)u.tweens[n].run(1);return e?(a.notifyWith(t,[u,1,0]),a.resolveWith(t,[u,e])):a.rejectWith(t,[u,e]),this}}),l=u.props;for(!function(t,e){var n,i,r,s,o;for(n in t)if(r=e[i=Y(n)],s=t[n],Array.isArray(s)&&(r=s[1],s=t[n]=s[0]),n!==i&&(t[i]=s,delete t[n]),(o=E.cssHooks[i])&&"expand"in o)for(n in s=o.expand(s),delete t[i],s)n in t||(t[n]=s[n],e[n]=r);else e[i]=r}(l,u.opts.specialEasing);s<o;s++)if(i=de.prefilters[s].call(u,t,l,u.opts))return v(i.stop)&&(E._queueHooks(u.elem,u.opts.queue).stop=i.stop.bind(i)),i;return E.map(l,he,u),v(u.opts.start)&&u.opts.start.call(t,u),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always),E.fx.timer(E.extend(c,{elem:t,anim:u,queue:u.opts.queue})),u}E.Animation=E.extend(de,{tweeners:{"*":[function(t,e){var n=this.createTween(t,e);return lt(n.elem,t,rt.exec(e),n),n}]},tweener:function(t,e){v(t)?(e=t,t=["*"]):t=t.match(F);for(var n,i=0,r=t.length;i<r;i++)n=t[i],de.tweeners[n]=de.tweeners[n]||[],de.tweeners[n].unshift(e)},prefilters:[function(t,e,n){var i,r,s,o,a,c,u,l,h="width"in e||"height"in e,d=this,p={},f=t.style,m=t.nodeType&&ut(t),g=J.get(t,"fxshow");for(i in n.queue||(null==(o=E._queueHooks(t,"fx")).unqueued&&(o.unqueued=0,a=o.empty.fire,o.empty.fire=function(){o.unqueued||a()}),o.unqueued++,d.always((function(){d.always((function(){o.unqueued--,E.queue(t,"fx").length||o.empty.fire()}))}))),e)if(r=e[i],oe.test(r)){if(delete e[i],s=s||"toggle"===r,r===(m?"hide":"show")){if("show"!==r||!g||void 0===g[i])continue;m=!0}p[i]=g&&g[i]||E.style(t,i)}if((c=!E.isEmptyObject(e))||!E.isEmptyObject(p))for(i in h&&1===t.nodeType&&(n.overflow=[f.overflow,f.overflowX,f.overflowY],null==(u=g&&g.display)&&(u=J.get(t,"display")),"none"===(l=E.css(t,"display"))&&(u?l=u:(pt([t],!0),u=t.style.display||u,l=E.css(t,"display"),pt([t]))),("inline"===l||"inline-block"===l&&null!=u)&&"none"===E.css(t,"float")&&(c||(d.done((function(){f.display=u})),null==u&&(l=f.display,u="none"===l?"":l)),f.display="inline-block")),n.overflow&&(f.overflow="hidden",d.always((function(){f.overflow=n.overflow[0],f.overflowX=n.overflow[1],f.overflowY=n.overflow[2]}))),c=!1,p)c||(g?"hidden"in g&&(m=g.hidden):g=J.access(t,"fxshow",{display:u}),s&&(g.hidden=!m),m&&pt([t],!0),d.done((function(){for(i in m||pt([t]),J.remove(t,"fxshow"),p)E.style(t,i,p[i])}))),c=he(m?g[i]:0,i,d),i in g||(g[i]=c.start,m&&(c.end=c.start,c.start=0))}],prefilter:function(t,e){e?de.prefilters.unshift(t):de.prefilters.push(t)}}),E.speed=function(t,e,n){var i=t&&"object"==typeof t?E.extend({},t):{complete:n||!n&&e||v(t)&&t,duration:t,easing:n&&e||e&&!v(e)&&e};return E.fx.off?i.duration=0:"number"!=typeof i.duration&&(i.duration in E.fx.speeds?i.duration=E.fx.speeds[i.duration]:i.duration=E.fx.speeds._default),null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){v(i.old)&&i.old.call(this),i.queue&&E.dequeue(this,i.queue)},i},E.fn.extend({fadeTo:function(t,e,n,i){return this.filter(ut).css("opacity",0).show().end().animate({opacity:e},t,n,i)},animate:function(t,e,n,i){var r=E.isEmptyObject(t),s=E.speed(e,n,i),o=function(){var e=de(this,E.extend({},t),s);(r||J.get(this,"finish"))&&e.stop(!0)};return o.finish=o,r||!1===s.queue?this.each(o):this.queue(s.queue,o)},stop:function(t,e,n){var i=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=e,e=t,t=void 0),e&&this.queue(t||"fx",[]),this.each((function(){var e=!0,r=null!=t&&t+"queueHooks",s=E.timers,o=J.get(this);if(r)o[r]&&o[r].stop&&i(o[r]);else for(r in o)o[r]&&o[r].stop&&ae.test(r)&&i(o[r]);for(r=s.length;r--;)s[r].elem!==this||null!=t&&s[r].queue!==t||(s[r].anim.stop(n),e=!1,s.splice(r,1));!e&&n||E.dequeue(this,t)}))},finish:function(t){return!1!==t&&(t=t||"fx"),this.each((function(){var e,n=J.get(this),i=n[t+"queue"],r=n[t+"queueHooks"],s=E.timers,o=i?i.length:0;for(n.finish=!0,E.queue(this,t,[]),r&&r.stop&&r.stop.call(this,!0),e=s.length;e--;)s[e].elem===this&&s[e].queue===t&&(s[e].anim.stop(!0),s.splice(e,1));for(e=0;e<o;e++)i[e]&&i[e].finish&&i[e].finish.call(this);delete n.finish}))}}),E.each(["toggle","show","hide"],(function(t,e){var n=E.fn[e];E.fn[e]=function(t,i,r){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(le(e,!0),t,i,r)}})),E.each({slideDown:le("show"),slideUp:le("hide"),slideToggle:le("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(t,e){E.fn[t]=function(t,n,i){return this.animate(e,t,n,i)}})),E.timers=[],E.fx.tick=function(){var t,e=0,n=E.timers;for(re=Date.now();e<n.length;e++)(t=n[e])()||n[e]!==t||n.splice(e--,1);n.length||E.fx.stop(),re=void 0},E.fx.timer=function(t){E.timers.push(t),E.fx.start()},E.fx.interval=13,E.fx.start=function(){se||(se=!0,ce())},E.fx.stop=function(){se=null},E.fx.speeds={slow:600,fast:200,_default:400},E.fn.delay=function(t,e){return t=E.fx&&E.fx.speeds[t]||t,e=e||"fx",this.queue(e,(function(e,n){var r=i.setTimeout(e,t);n.stop=function(){i.clearTimeout(r)}}))},function(){var t=y.createElement("input"),e=y.createElement("select").appendChild(y.createElement("option"));t.type="checkbox",g.checkOn=""!==t.value,g.optSelected=e.selected,(t=y.createElement("input")).value="t",t.type="radio",g.radioValue="t"===t.value}();var pe,fe=E.expr.attrHandle;E.fn.extend({attr:function(t,e){return W(this,E.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each((function(){E.removeAttr(this,t)}))}}),E.extend({attr:function(t,e,n){var i,r,s=t.nodeType;if(3!==s&&8!==s&&2!==s)return void 0===t.getAttribute?E.prop(t,e,n):(1===s&&E.isXMLDoc(t)||(r=E.attrHooks[e.toLowerCase()]||(E.expr.match.bool.test(e)?pe:void 0)),void 0!==n?null===n?void E.removeAttr(t,e):r&&"set"in r&&void 0!==(i=r.set(t,n,e))?i:(t.setAttribute(e,n+""),n):r&&"get"in r&&null!==(i=r.get(t,e))?i:null==(i=E.find.attr(t,e))?void 0:i)},attrHooks:{type:{set:function(t,e){if(!g.radioValue&&"radio"===e&&D(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},removeAttr:function(t,e){var n,i=0,r=e&&e.match(F);if(r&&1===t.nodeType)for(;n=r[i++];)t.removeAttribute(n)}}),pe={set:function(t,e,n){return!1===e?E.removeAttr(t,n):t.setAttribute(n,n),n}},E.each(E.expr.match.bool.source.match(/\w+/g),(function(t,e){var n=fe[e]||E.find.attr;fe[e]=function(t,e,i){var r,s,o=e.toLowerCase();return i||(s=fe[o],fe[o]=r,r=null!=n(t,e,i)?o:null,fe[o]=s),r}}));var me=/^(?:input|select|textarea|button)$/i,ge=/^(?:a|area)$/i;function ve(t){return(t.match(F)||[]).join(" ")}function be(t){return t.getAttribute&&t.getAttribute("class")||""}function ye(t){return Array.isArray(t)?t:"string"==typeof t&&t.match(F)||[]}E.fn.extend({prop:function(t,e){return W(this,E.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each((function(){delete this[E.propFix[t]||t]}))}}),E.extend({prop:function(t,e,n){var i,r,s=t.nodeType;if(3!==s&&8!==s&&2!==s)return 1===s&&E.isXMLDoc(t)||(e=E.propFix[e]||e,r=E.propHooks[e]),void 0!==n?r&&"set"in r&&void 0!==(i=r.set(t,n,e))?i:t[e]=n:r&&"get"in r&&null!==(i=r.get(t,e))?i:t[e]},propHooks:{tabIndex:{get:function(t){var e=E.find.attr(t,"tabindex");return e?parseInt(e,10):me.test(t.nodeName)||ge.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),g.optSelected||(E.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),E.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){E.propFix[this.toLowerCase()]=this})),E.fn.extend({addClass:function(t){var e,n,i,r,s,o,a,c=0;if(v(t))return this.each((function(e){E(this).addClass(t.call(this,e,be(this)))}));if((e=ye(t)).length)for(;n=this[c++];)if(r=be(n),i=1===n.nodeType&&" "+ve(r)+" "){for(o=0;s=e[o++];)i.indexOf(" "+s+" ")<0&&(i+=s+" ");r!==(a=ve(i))&&n.setAttribute("class",a)}return this},removeClass:function(t){var e,n,i,r,s,o,a,c=0;if(v(t))return this.each((function(e){E(this).removeClass(t.call(this,e,be(this)))}));if(!arguments.length)return this.attr("class","");if((e=ye(t)).length)for(;n=this[c++];)if(r=be(n),i=1===n.nodeType&&" "+ve(r)+" "){for(o=0;s=e[o++];)for(;i.indexOf(" "+s+" ")>-1;)i=i.replace(" "+s+" "," ");r!==(a=ve(i))&&n.setAttribute("class",a)}return this},toggleClass:function(t,e){var n=typeof t,i="string"===n||Array.isArray(t);return"boolean"==typeof e&&i?e?this.addClass(t):this.removeClass(t):v(t)?this.each((function(n){E(this).toggleClass(t.call(this,n,be(this),e),e)})):this.each((function(){var e,r,s,o;if(i)for(r=0,s=E(this),o=ye(t);e=o[r++];)s.hasClass(e)?s.removeClass(e):s.addClass(e);else void 0!==t&&"boolean"!==n||((e=be(this))&&J.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===t?"":J.get(this,"__className__")||""))}))},hasClass:function(t){var e,n,i=0;for(e=" "+t+" ";n=this[i++];)if(1===n.nodeType&&(" "+ve(be(n))+" ").indexOf(e)>-1)return!0;return!1}});var we=/\r/g;E.fn.extend({val:function(t){var e,n,i,r=this[0];return arguments.length?(i=v(t),this.each((function(n){var r;1===this.nodeType&&(null==(r=i?t.call(this,n,E(this).val()):t)?r="":"number"==typeof r?r+="":Array.isArray(r)&&(r=E.map(r,(function(t){return null==t?"":t+""}))),(e=E.valHooks[this.type]||E.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&void 0!==e.set(this,r,"value")||(this.value=r))}))):r?(e=E.valHooks[r.type]||E.valHooks[r.nodeName.toLowerCase()])&&"get"in e&&void 0!==(n=e.get(r,"value"))?n:"string"==typeof(n=r.value)?n.replace(we,""):null==n?"":n:void 0}}),E.extend({valHooks:{option:{get:function(t){var e=E.find.attr(t,"value");return null!=e?e:ve(E.text(t))}},select:{get:function(t){var e,n,i,r=t.options,s=t.selectedIndex,o="select-one"===t.type,a=o?null:[],c=o?s+1:r.length;for(i=s<0?c:o?s:0;i<c;i++)if(((n=r[i]).selected||i===s)&&!n.disabled&&(!n.parentNode.disabled||!D(n.parentNode,"optgroup"))){if(e=E(n).val(),o)return e;a.push(e)}return a},set:function(t,e){for(var n,i,r=t.options,s=E.makeArray(e),o=r.length;o--;)((i=r[o]).selected=E.inArray(E.valHooks.option.get(i),s)>-1)&&(n=!0);return n||(t.selectedIndex=-1),s}}}}),E.each(["radio","checkbox"],(function(){E.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=E.inArray(E(t).val(),e)>-1}},g.checkOn||(E.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})})),g.focusin="onfocusin"in i;var _e=/^(?:focusinfocus|focusoutblur)$/,xe=function(t){t.stopPropagation()};E.extend(E.event,{trigger:function(t,e,n,r){var s,o,a,c,u,l,h,d,f=[n||y],m=p.call(t,"type")?t.type:t,g=p.call(t,"namespace")?t.namespace.split("."):[];if(o=d=a=n=n||y,3!==n.nodeType&&8!==n.nodeType&&!_e.test(m+E.event.triggered)&&(m.indexOf(".")>-1&&(g=m.split("."),m=g.shift(),g.sort()),u=m.indexOf(":")<0&&"on"+m,(t=t[E.expando]?t:new E.Event(m,"object"==typeof t&&t)).isTrigger=r?2:3,t.namespace=g.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=n),e=null==e?[t]:E.makeArray(e,[t]),h=E.event.special[m]||{},r||!h.trigger||!1!==h.trigger.apply(n,e))){if(!r&&!h.noBubble&&!b(n)){for(c=h.delegateType||m,_e.test(c+m)||(o=o.parentNode);o;o=o.parentNode)f.push(o),a=o;a===(n.ownerDocument||y)&&f.push(a.defaultView||a.parentWindow||i)}for(s=0;(o=f[s++])&&!t.isPropagationStopped();)d=o,t.type=s>1?c:h.bindType||m,(l=(J.get(o,"events")||Object.create(null))[t.type]&&J.get(o,"handle"))&&l.apply(o,e),(l=u&&o[u])&&l.apply&&$(o)&&(t.result=l.apply(o,e),!1===t.result&&t.preventDefault());return t.type=m,r||t.isDefaultPrevented()||h._default&&!1!==h._default.apply(f.pop(),e)||!$(n)||u&&v(n[m])&&!b(n)&&((a=n[u])&&(n[u]=null),E.event.triggered=m,t.isPropagationStopped()&&d.addEventListener(m,xe),n[m](),t.isPropagationStopped()&&d.removeEventListener(m,xe),E.event.triggered=void 0,a&&(n[u]=a)),t.result}},simulate:function(t,e,n){var i=E.extend(new E.Event,n,{type:t,isSimulated:!0});E.event.trigger(i,null,e)}}),E.fn.extend({trigger:function(t,e){return this.each((function(){E.event.trigger(t,e,this)}))},triggerHandler:function(t,e){var n=this[0];if(n)return E.event.trigger(t,e,n,!0)}}),g.focusin||E.each({focus:"focusin",blur:"focusout"},(function(t,e){var n=function(t){E.event.simulate(e,t.target,E.event.fix(t))};E.event.special[e]={setup:function(){var i=this.ownerDocument||this.document||this,r=J.access(i,e);r||i.addEventListener(t,n,!0),J.access(i,e,(r||0)+1)},teardown:function(){var i=this.ownerDocument||this.document||this,r=J.access(i,e)-1;r?J.access(i,e,r):(i.removeEventListener(t,n,!0),J.remove(i,e))}}}));var Ae=i.location,Ee={guid:Date.now()},Ce=/\?/;E.parseXML=function(t){var e,n;if(!t||"string"!=typeof t)return null;try{e=(new i.DOMParser).parseFromString(t,"text/xml")}catch(t){}return n=e&&e.getElementsByTagName("parsererror")[0],e&&!n||E.error("Invalid XML: "+(n?E.map(n.childNodes,(function(t){return t.textContent})).join("\n"):t)),e};var Te=/\[\]$/,Se=/\r?\n/g,ke=/^(?:submit|button|image|reset|file)$/i,Re=/^(?:input|select|textarea|keygen)/i;function De(t,e,n,i){var r;if(Array.isArray(e))E.each(e,(function(e,r){n||Te.test(t)?i(t,r):De(t+"["+("object"==typeof r&&null!=r?e:"")+"]",r,n,i)}));else if(n||"object"!==x(e))i(t,e);else for(r in e)De(t+"["+r+"]",e[r],n,i)}E.param=function(t,e){var n,i=[],r=function(t,e){var n=v(e)?e():e;i[i.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==n?"":n)};if(null==t)return"";if(Array.isArray(t)||t.jquery&&!E.isPlainObject(t))E.each(t,(function(){r(this.name,this.value)}));else for(n in t)De(n,t[n],e,r);return i.join("&")},E.fn.extend({serialize:function(){return E.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var t=E.prop(this,"elements");return t?E.makeArray(t):this})).filter((function(){var t=this.type;return this.name&&!E(this).is(":disabled")&&Re.test(this.nodeName)&&!ke.test(t)&&(this.checked||!gt.test(t))})).map((function(t,e){var n=E(this).val();return null==n?null:Array.isArray(n)?E.map(n,(function(t){return{name:e.name,value:t.replace(Se,"\r\n")}})):{name:e.name,value:n.replace(Se,"\r\n")}})).get()}});var Oe=/%20/g,Le=/#.*$/,Pe=/([?&])_=[^&]*/,Ie=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ne=/^(?:GET|HEAD)$/,Me=/^\/\//,Be={},Fe={},Ue="*/".concat("*"),He=y.createElement("a");function je(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var i,r=0,s=e.toLowerCase().match(F)||[];if(v(n))for(;i=s[r++];)"+"===i[0]?(i=i.slice(1)||"*",(t[i]=t[i]||[]).unshift(n)):(t[i]=t[i]||[]).push(n)}}function ze(t,e,n,i){var r={},s=t===Fe;function o(a){var c;return r[a]=!0,E.each(t[a]||[],(function(t,a){var u=a(e,n,i);return"string"!=typeof u||s||r[u]?s?!(c=u):void 0:(e.dataTypes.unshift(u),o(u),!1)})),c}return o(e.dataTypes[0])||!r["*"]&&o("*")}function Ke(t,e){var n,i,r=E.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((r[n]?t:i||(i={}))[n]=e[n]);return i&&E.extend(!0,t,i),t}He.href=Ae.href,E.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ae.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Ae.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ue,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":E.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?Ke(Ke(t,E.ajaxSettings),e):Ke(E.ajaxSettings,t)},ajaxPrefilter:je(Be),ajaxTransport:je(Fe),ajax:function(t,e){"object"==typeof t&&(e=t,t=void 0),e=e||{};var n,r,s,o,a,c,u,l,h,d,p=E.ajaxSetup({},e),f=p.context||p,m=p.context&&(f.nodeType||f.jquery)?E(f):E.event,g=E.Deferred(),v=E.Callbacks("once memory"),b=p.statusCode||{},w={},_={},x="canceled",A={readyState:0,getResponseHeader:function(t){var e;if(u){if(!o)for(o={};e=Ie.exec(s);)o[e[1].toLowerCase()+" "]=(o[e[1].toLowerCase()+" "]||[]).concat(e[2]);e=o[t.toLowerCase()+" "]}return null==e?null:e.join(", ")},getAllResponseHeaders:function(){return u?s:null},setRequestHeader:function(t,e){return null==u&&(t=_[t.toLowerCase()]=_[t.toLowerCase()]||t,w[t]=e),this},overrideMimeType:function(t){return null==u&&(p.mimeType=t),this},statusCode:function(t){var e;if(t)if(u)A.always(t[A.status]);else for(e in t)b[e]=[b[e],t[e]];return this},abort:function(t){var e=t||x;return n&&n.abort(e),C(0,e),this}};if(g.promise(A),p.url=((t||p.url||Ae.href)+"").replace(Me,Ae.protocol+"//"),p.type=e.method||e.type||p.method||p.type,p.dataTypes=(p.dataType||"*").toLowerCase().match(F)||[""],null==p.crossDomain){c=y.createElement("a");try{c.href=p.url,c.href=c.href,p.crossDomain=He.protocol+"//"+He.host!=c.protocol+"//"+c.host}catch(t){p.crossDomain=!0}}if(p.data&&p.processData&&"string"!=typeof p.data&&(p.data=E.param(p.data,p.traditional)),ze(Be,p,e,A),u)return A;for(h in(l=E.event&&p.global)&&0==E.active++&&E.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!Ne.test(p.type),r=p.url.replace(Le,""),p.hasContent?p.data&&p.processData&&0===(p.contentType||"").indexOf("application/x-www-form-urlencoded")&&(p.data=p.data.replace(Oe,"+")):(d=p.url.slice(r.length),p.data&&(p.processData||"string"==typeof p.data)&&(r+=(Ce.test(r)?"&":"?")+p.data,delete p.data),!1===p.cache&&(r=r.replace(Pe,"$1"),d=(Ce.test(r)?"&":"?")+"_="+Ee.guid+++d),p.url=r+d),p.ifModified&&(E.lastModified[r]&&A.setRequestHeader("If-Modified-Since",E.lastModified[r]),E.etag[r]&&A.setRequestHeader("If-None-Match",E.etag[r])),(p.data&&p.hasContent&&!1!==p.contentType||e.contentType)&&A.setRequestHeader("Content-Type",p.contentType),A.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+Ue+"; q=0.01":""):p.accepts["*"]),p.headers)A.setRequestHeader(h,p.headers[h]);if(p.beforeSend&&(!1===p.beforeSend.call(f,A,p)||u))return A.abort();if(x="abort",v.add(p.complete),A.done(p.success),A.fail(p.error),n=ze(Fe,p,e,A)){if(A.readyState=1,l&&m.trigger("ajaxSend",[A,p]),u)return A;p.async&&p.timeout>0&&(a=i.setTimeout((function(){A.abort("timeout")}),p.timeout));try{u=!1,n.send(w,C)}catch(t){if(u)throw t;C(-1,t)}}else C(-1,"No Transport");function C(t,e,o,c){var h,d,y,w,_,x=e;u||(u=!0,a&&i.clearTimeout(a),n=void 0,s=c||"",A.readyState=t>0?4:0,h=t>=200&&t<300||304===t,o&&(w=function(t,e,n){for(var i,r,s,o,a=t.contents,c=t.dataTypes;"*"===c[0];)c.shift(),void 0===i&&(i=t.mimeType||e.getResponseHeader("Content-Type"));if(i)for(r in a)if(a[r]&&a[r].test(i)){c.unshift(r);break}if(c[0]in n)s=c[0];else{for(r in n){if(!c[0]||t.converters[r+" "+c[0]]){s=r;break}o||(o=r)}s=s||o}if(s)return s!==c[0]&&c.unshift(s),n[s]}(p,A,o)),!h&&E.inArray("script",p.dataTypes)>-1&&E.inArray("json",p.dataTypes)<0&&(p.converters["text script"]=function(){}),w=function(t,e,n,i){var r,s,o,a,c,u={},l=t.dataTypes.slice();if(l[1])for(o in t.converters)u[o.toLowerCase()]=t.converters[o];for(s=l.shift();s;)if(t.responseFields[s]&&(n[t.responseFields[s]]=e),!c&&i&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),c=s,s=l.shift())if("*"===s)s=c;else if("*"!==c&&c!==s){if(!(o=u[c+" "+s]||u["* "+s]))for(r in u)if((a=r.split(" "))[1]===s&&(o=u[c+" "+a[0]]||u["* "+a[0]])){!0===o?o=u[r]:!0!==u[r]&&(s=a[0],l.unshift(a[1]));break}if(!0!==o)if(o&&t.throws)e=o(e);else try{e=o(e)}catch(t){return{state:"parsererror",error:o?t:"No conversion from "+c+" to "+s}}}return{state:"success",data:e}}(p,w,A,h),h?(p.ifModified&&((_=A.getResponseHeader("Last-Modified"))&&(E.lastModified[r]=_),(_=A.getResponseHeader("etag"))&&(E.etag[r]=_)),204===t||"HEAD"===p.type?x="nocontent":304===t?x="notmodified":(x=w.state,d=w.data,h=!(y=w.error))):(y=x,!t&&x||(x="error",t<0&&(t=0))),A.status=t,A.statusText=(e||x)+"",h?g.resolveWith(f,[d,x,A]):g.rejectWith(f,[A,x,y]),A.statusCode(b),b=void 0,l&&m.trigger(h?"ajaxSuccess":"ajaxError",[A,p,h?d:y]),v.fireWith(f,[A,x]),l&&(m.trigger("ajaxComplete",[A,p]),--E.active||E.event.trigger("ajaxStop")))}return A},getJSON:function(t,e,n){return E.get(t,e,n,"json")},getScript:function(t,e){return E.get(t,void 0,e,"script")}}),E.each(["get","post"],(function(t,e){E[e]=function(t,n,i,r){return v(n)&&(r=r||i,i=n,n=void 0),E.ajax(E.extend({url:t,type:e,dataType:r,data:n,success:i},E.isPlainObject(t)&&t))}})),E.ajaxPrefilter((function(t){var e;for(e in t.headers)"content-type"===e.toLowerCase()&&(t.contentType=t.headers[e]||"")})),E._evalUrl=function(t,e,n){return E.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(t){E.globalEval(t,e,n)}})},E.fn.extend({wrapAll:function(t){var e;return this[0]&&(v(t)&&(t=t.call(this[0])),e=E(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map((function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t})).append(this)),this},wrapInner:function(t){return v(t)?this.each((function(e){E(this).wrapInner(t.call(this,e))})):this.each((function(){var e=E(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)}))},wrap:function(t){var e=v(t);return this.each((function(n){E(this).wrapAll(e?t.call(this,n):t)}))},unwrap:function(t){return this.parent(t).not("body").each((function(){E(this).replaceWith(this.childNodes)})),this}}),E.expr.pseudos.hidden=function(t){return!E.expr.pseudos.visible(t)},E.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},E.ajaxSettings.xhr=function(){try{return new i.XMLHttpRequest}catch(t){}};var Ge={0:200,1223:204},We=E.ajaxSettings.xhr();g.cors=!!We&&"withCredentials"in We,g.ajax=We=!!We,E.ajaxTransport((function(t){var e,n;if(g.cors||We&&!t.crossDomain)return{send:function(r,s){var o,a=t.xhr();if(a.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(o in t.xhrFields)a[o]=t.xhrFields[o];for(o in t.mimeType&&a.overrideMimeType&&a.overrideMimeType(t.mimeType),t.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest"),r)a.setRequestHeader(o,r[o]);e=function(t){return function(){e&&(e=n=a.onload=a.onerror=a.onabort=a.ontimeout=a.onreadystatechange=null,"abort"===t?a.abort():"error"===t?"number"!=typeof a.status?s(0,"error"):s(a.status,a.statusText):s(Ge[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!=typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=e(),n=a.onerror=a.ontimeout=e("error"),void 0!==a.onabort?a.onabort=n:a.onreadystatechange=function(){4===a.readyState&&i.setTimeout((function(){e&&n()}))},e=e("abort");try{a.send(t.hasContent&&t.data||null)}catch(t){if(e)throw t}},abort:function(){e&&e()}}})),E.ajaxPrefilter((function(t){t.crossDomain&&(t.contents.script=!1)})),E.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return E.globalEval(t),t}}}),E.ajaxPrefilter("script",(function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")})),E.ajaxTransport("script",(function(t){var e,n;if(t.crossDomain||t.scriptAttrs)return{send:function(i,r){e=E("<script>").attr(t.scriptAttrs||{}).prop({charset:t.scriptCharset,src:t.url}).on("load error",n=function(t){e.remove(),n=null,t&&r("error"===t.type?404:200,t.type)}),y.head.appendChild(e[0])},abort:function(){n&&n()}}}));var qe,Xe=[],Ve=/(=)\?(?=&|$)|\?\?/;E.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Xe.pop()||E.expando+"_"+Ee.guid++;return this[t]=!0,t}}),E.ajaxPrefilter("json jsonp",(function(t,e,n){var r,s,o,a=!1!==t.jsonp&&(Ve.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ve.test(t.data)&&"data");if(a||"jsonp"===t.dataTypes[0])return r=t.jsonpCallback=v(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a?t[a]=t[a].replace(Ve,"$1"+r):!1!==t.jsonp&&(t.url+=(Ce.test(t.url)?"&":"?")+t.jsonp+"="+r),t.converters["script json"]=function(){return o||E.error(r+" was not called"),o[0]},t.dataTypes[0]="json",s=i[r],i[r]=function(){o=arguments},n.always((function(){void 0===s?E(i).removeProp(r):i[r]=s,t[r]&&(t.jsonpCallback=e.jsonpCallback,Xe.push(r)),o&&v(s)&&s(o[0]),o=s=void 0})),"script"})),g.createHTMLDocument=((qe=y.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===qe.childNodes.length),E.parseHTML=function(t,e,n){return"string"!=typeof t?[]:("boolean"==typeof e&&(n=e,e=!1),e||(g.createHTMLDocument?((i=(e=y.implementation.createHTMLDocument("")).createElement("base")).href=y.location.href,e.head.appendChild(i)):e=y),s=!n&&[],(r=O.exec(t))?[e.createElement(r[1])]:(r=At([t],e,s),s&&s.length&&E(s).remove(),E.merge([],r.childNodes)));var i,r,s},E.fn.load=function(t,e,n){var i,r,s,o=this,a=t.indexOf(" ");return a>-1&&(i=ve(t.slice(a)),t=t.slice(0,a)),v(e)?(n=e,e=void 0):e&&"object"==typeof e&&(r="POST"),o.length>0&&E.ajax({url:t,type:r||"GET",dataType:"html",data:e}).done((function(t){s=arguments,o.html(i?E("<div>").append(E.parseHTML(t)).find(i):t)})).always(n&&function(t,e){o.each((function(){n.apply(this,s||[t.responseText,e,t])}))}),this},E.expr.pseudos.animated=function(t){return E.grep(E.timers,(function(e){return t===e.elem})).length},E.offset={setOffset:function(t,e,n){var i,r,s,o,a,c,u=E.css(t,"position"),l=E(t),h={};"static"===u&&(t.style.position="relative"),a=l.offset(),s=E.css(t,"top"),c=E.css(t,"left"),("absolute"===u||"fixed"===u)&&(s+c).indexOf("auto")>-1?(o=(i=l.position()).top,r=i.left):(o=parseFloat(s)||0,r=parseFloat(c)||0),v(e)&&(e=e.call(t,n,E.extend({},a))),null!=e.top&&(h.top=e.top-a.top+o),null!=e.left&&(h.left=e.left-a.left+r),"using"in e?e.using.call(t,h):l.css(h)}},E.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each((function(e){E.offset.setOffset(this,t,e)}));var e,n,i=this[0];return i?i.getClientRects().length?(e=i.getBoundingClientRect(),n=i.ownerDocument.defaultView,{top:e.top+n.pageYOffset,left:e.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var t,e,n,i=this[0],r={top:0,left:0};if("fixed"===E.css(i,"position"))e=i.getBoundingClientRect();else{for(e=this.offset(),n=i.ownerDocument,t=i.offsetParent||n.documentElement;t&&(t===n.body||t===n.documentElement)&&"static"===E.css(t,"position");)t=t.parentNode;t&&t!==i&&1===t.nodeType&&((r=E(t).offset()).top+=E.css(t,"borderTopWidth",!0),r.left+=E.css(t,"borderLeftWidth",!0))}return{top:e.top-r.top-E.css(i,"marginTop",!0),left:e.left-r.left-E.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var t=this.offsetParent;t&&"static"===E.css(t,"position");)t=t.offsetParent;return t||ot}))}}),E.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(t,e){var n="pageYOffset"===e;E.fn[t]=function(i){return W(this,(function(t,i,r){var s;if(b(t)?s=t:9===t.nodeType&&(s=t.defaultView),void 0===r)return s?s[e]:t[i];s?s.scrollTo(n?s.pageXOffset:r,n?r:s.pageYOffset):t[i]=r}),t,i,arguments.length)}})),E.each(["top","left"],(function(t,e){E.cssHooks[e]=Wt(g.pixelPosition,(function(t,n){if(n)return n=Gt(t,e),Ht.test(n)?E(t).position()[e]+"px":n}))})),E.each({Height:"height",Width:"width"},(function(t,e){E.each({padding:"inner"+t,content:e,"":"outer"+t},(function(n,i){E.fn[i]=function(r,s){var o=arguments.length&&(n||"boolean"!=typeof r),a=n||(!0===r||!0===s?"margin":"border");return W(this,(function(e,n,r){var s;return b(e)?0===i.indexOf("outer")?e["inner"+t]:e.document.documentElement["client"+t]:9===e.nodeType?(s=e.documentElement,Math.max(e.body["scroll"+t],s["scroll"+t],e.body["offset"+t],s["offset"+t],s["client"+t])):void 0===r?E.css(e,n,a):E.style(e,n,r,a)}),e,o?r:void 0,o)}}))})),E.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(t,e){E.fn[e]=function(t){return this.on(e,t)}})),E.fn.extend({bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,i){return this.on(e,t,n,i)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)},hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),E.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(t,e){E.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}}));var Ye=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;E.proxy=function(t,e){var n,i,r;if("string"==typeof e&&(n=t[e],e=t,t=n),v(t))return i=a.call(arguments,2),r=function(){return t.apply(e||this,i.concat(a.call(arguments)))},r.guid=t.guid=t.guid||E.guid++,r},E.holdReady=function(t){t?E.readyWait++:E.ready(!0)},E.isArray=Array.isArray,E.parseJSON=JSON.parse,E.nodeName=D,E.isFunction=v,E.isWindow=b,E.camelCase=Y,E.type=x,E.now=Date.now,E.isNumeric=function(t){var e=E.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},E.trim=function(t){return null==t?"":(t+"").replace(Ye,"")},void 0===(n=function(){return E}.apply(e,[]))||(t.exports=n);var $e=i.jQuery,Qe=i.$;return E.noConflict=function(t){return i.$===E&&(i.$=Qe),t&&i.jQuery===E&&(i.jQuery=$e),E},void 0===r&&(i.jQuery=i.$=E),E}))},565:t=>{"use strict";t.exports=fs}},i={};function r(t){var e=i[t];if(void 0!==e)return e.exports;var s=i[t]={exports:{}};return n[t].call(s.exports,s,s.exports,r),s.exports}e=Object.getPrototypeOf?t=>Object.getPrototypeOf(t):t=>t.__proto__,r.t=function(n,i){if(1&i&&(n=this(n)),8&i)return n;if("object"==typeof n&&n){if(4&i&&n.__esModule)return n;if(16&i&&"function"==typeof n.then)return n}var s=Object.create(null);r.r(s);var o={};t=t||[null,e({}),e([]),e(e)];for(var a=2&i&&n;"object"==typeof a&&!~t.indexOf(a);a=e(a))Object.getOwnPropertyNames(a).forEach((t=>o[t]=()=>n[t]));return o.default=()=>n,r.d(s,o),s},r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{"use strict";var t={};r.r(t),r.d(t,{VERSION:()=>i,after:()=>Ie,all:()=>tn,allKeys:()=>gt,any:()=>en,assign:()=>It,before:()=>Ne,bind:()=>xe,bindAll:()=>Ce,chain:()=>be,chunk:()=>Fn,clone:()=>Ft,collect:()=>Ve,compact:()=>Sn,compose:()=>Pe,constant:()=>J,contains:()=>nn,countBy:()=>vn,create:()=>Bt,debounce:()=>De,default:()=>jn,defaults:()=>Nt,defer:()=>ke,delay:()=>Se,detect:()=>We,difference:()=>Rn,drop:()=>Cn,each:()=>Xe,escape:()=>oe,every:()=>tn,extend:()=>Pt,extendOwn:()=>It,filter:()=>Je,find:()=>We,findIndex:()=>Ue,findKey:()=>Be,findLastIndex:()=>He,findWhere:()=>qe,first:()=>En,flatten:()=>kn,foldl:()=>$e,foldr:()=>Qe,forEach:()=>Xe,functions:()=>Ot,get:()=>Kt,groupBy:()=>mn,has:()=>Gt,head:()=>En,identity:()=>Wt,include:()=>nn,includes:()=>nn,indexBy:()=>gn,indexOf:()=>Ke,initial:()=>An,inject:()=>$e,intersection:()=>Pn,invert:()=>Dt,invoke:()=>rn,isArguments:()=>Y,isArray:()=>q,isArrayBuffer:()=>B,isBoolean:()=>k,isDataView:()=>W,isDate:()=>P,isElement:()=>R,isEmpty:()=>ct,isEqual:()=>mt,isError:()=>N,isFinite:()=>$,isFunction:()=>H,isMap:()=>Et,isMatch:()=>ut,isNaN:()=>Q,isNull:()=>T,isNumber:()=>L,isObject:()=>C,isRegExp:()=>I,isSet:()=>Tt,isString:()=>O,isSymbol:()=>M,isTypedArray:()=>rt,isUndefined:()=>S,isWeakMap:()=>Ct,isWeakSet:()=>St,iteratee:()=>$t,keys:()=>at,last:()=>Tn,lastIndexOf:()=>Ge,map:()=>Ve,mapObject:()=>Jt,matcher:()=>qt,matches:()=>qt,max:()=>an,memoize:()=>Te,methods:()=>Ot,min:()=>cn,mixin:()=>Hn,negate:()=>Le,noop:()=>Zt,now:()=>ie,object:()=>Mn,omit:()=>xn,once:()=>Me,pairs:()=>Rt,partial:()=>_e,partition:()=>bn,pick:()=>_n,pluck:()=>sn,property:()=>Xt,propertyOf:()=>te,random:()=>ne,range:()=>Bn,reduce:()=>$e,reduceRight:()=>Qe,reject:()=>Ze,rest:()=>Cn,restArguments:()=>E,result:()=>me,sample:()=>hn,select:()=>Je,shuffle:()=>dn,size:()=>yn,some:()=>en,sortBy:()=>pn,sortedIndex:()=>je,tail:()=>Cn,take:()=>En,tap:()=>Ut,template:()=>fe,templateSettings:()=>ce,throttle:()=>Re,times:()=>ee,toArray:()=>ln,toPath:()=>Ht,transpose:()=>In,unescape:()=>ae,union:()=>Ln,uniq:()=>On,unique:()=>On,uniqueId:()=>ve,unzip:()=>In,values:()=>kt,where:()=>on,without:()=>Dn,wrap:()=>Oe,zip:()=>Nn});var e={};r.r(e),r.d(e,{afterMain:()=>ui,afterRead:()=>oi,afterWrite:()=>di,applyStyles:()=>yi,arrow:()=>Bi,auto:()=>Vn,basePlacements:()=>Yn,beforeMain:()=>ai,beforeRead:()=>ri,beforeWrite:()=>li,bottom:()=>Wn,clippingParents:()=>Jn,computeStyles:()=>ji,createPopper:()=>vr,createPopperBase:()=>gr,createPopperLite:()=>br,detectOverflow:()=>ir,end:()=>Qn,eventListeners:()=>Ki,flip:()=>rr,hide:()=>ar,left:()=>Xn,main:()=>ci,modifierPhases:()=>pi,offset:()=>cr,placements:()=>ii,popper:()=>ti,popperGenerator:()=>mr,popperOffsets:()=>ur,preventOverflow:()=>lr,read:()=>si,reference:()=>ei,right:()=>qn,start:()=>$n,top:()=>Gn,variationPlacements:()=>ni,viewport:()=>Zn,write:()=>hi});var n=r(755),i="1.13.2",s="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||Function("return this")()||{},o=Array.prototype,a=Object.prototype,c="undefined"!=typeof Symbol?Symbol.prototype:null,u=o.push,l=o.slice,h=a.toString,d=a.hasOwnProperty,p="undefined"!=typeof ArrayBuffer,f="undefined"!=typeof DataView,m=Array.isArray,g=Object.keys,v=Object.create,b=p&&ArrayBuffer.isView,y=isNaN,w=isFinite,_=!{toString:null}.propertyIsEnumerable("toString"),x=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],A=Math.pow(2,53)-1;function E(t,e){return e=null==e?t.length-1:+e,function(){for(var n=Math.max(arguments.length-e,0),i=Array(n),r=0;r<n;r++)i[r]=arguments[r+e];switch(e){case 0:return t.call(this,i);case 1:return t.call(this,arguments[0],i);case 2:return t.call(this,arguments[0],arguments[1],i)}var s=Array(e+1);for(r=0;r<e;r++)s[r]=arguments[r];return s[e]=i,t.apply(this,s)}}function C(t){var e=typeof t;return"function"===e||"object"===e&&!!t}function T(t){return null===t}function S(t){return void 0===t}function k(t){return!0===t||!1===t||"[object Boolean]"===h.call(t)}function R(t){return!(!t||1!==t.nodeType)}function D(t){var e="[object "+t+"]";return function(t){return h.call(t)===e}}const O=D("String"),L=D("Number"),P=D("Date"),I=D("RegExp"),N=D("Error"),M=D("Symbol"),B=D("ArrayBuffer");var F=D("Function"),U=s.document&&s.document.childNodes;"object"!=typeof Int8Array&&"function"!=typeof U&&(F=function(t){return"function"==typeof t||!1});const H=F,j=D("Object");var z=f&&j(new DataView(new ArrayBuffer(8))),K="undefined"!=typeof Map&&j(new Map),G=D("DataView");const W=z?function(t){return null!=t&&H(t.getInt8)&&B(t.buffer)}:G,q=m||D("Array");function X(t,e){return null!=t&&d.call(t,e)}var V=D("Arguments");!function(){V(arguments)||(V=function(t){return X(t,"callee")})}();const Y=V;function $(t){return!M(t)&&w(t)&&!isNaN(parseFloat(t))}function Q(t){return L(t)&&y(t)}function J(t){return function(){return t}}function Z(t){return function(e){var n=t(e);return"number"==typeof n&&n>=0&&n<=A}}function tt(t){return function(e){return null==e?void 0:e[t]}}const et=tt("byteLength"),nt=Z(et);var it=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;const rt=p?function(t){return b?b(t)&&!W(t):nt(t)&&it.test(h.call(t))}:J(!1),st=tt("length");function ot(t,e){e=function(t){for(var e={},n=t.length,i=0;i<n;++i)e[t[i]]=!0;return{contains:function(t){return!0===e[t]},push:function(n){return e[n]=!0,t.push(n)}}}(e);var n=x.length,i=t.constructor,r=H(i)&&i.prototype||a,s="constructor";for(X(t,s)&&!e.contains(s)&&e.push(s);n--;)(s=x[n])in t&&t[s]!==r[s]&&!e.contains(s)&&e.push(s)}function at(t){if(!C(t))return[];if(g)return g(t);var e=[];for(var n in t)X(t,n)&&e.push(n);return _&&ot(t,e),e}function ct(t){if(null==t)return!0;var e=st(t);return"number"==typeof e&&(q(t)||O(t)||Y(t))?0===e:0===st(at(t))}function ut(t,e){var n=at(e),i=n.length;if(null==t)return!i;for(var r=Object(t),s=0;s<i;s++){var o=n[s];if(e[o]!==r[o]||!(o in r))return!1}return!0}function lt(t){return t instanceof lt?t:this instanceof lt?void(this._wrapped=t):new lt(t)}function ht(t){return new Uint8Array(t.buffer||t,t.byteOffset||0,et(t))}lt.VERSION=i,lt.prototype.value=function(){return this._wrapped},lt.prototype.valueOf=lt.prototype.toJSON=lt.prototype.value,lt.prototype.toString=function(){return String(this._wrapped)};var dt="[object DataView]";function pt(t,e,n,i){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return!1;if(t!=t)return e!=e;var r=typeof t;return("function"===r||"object"===r||"object"==typeof e)&&ft(t,e,n,i)}function ft(t,e,n,i){t instanceof lt&&(t=t._wrapped),e instanceof lt&&(e=e._wrapped);var r=h.call(t);if(r!==h.call(e))return!1;if(z&&"[object Object]"==r&&W(t)){if(!W(e))return!1;r=dt}switch(r){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:0==+t?1/+t==1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object Symbol]":return c.valueOf.call(t)===c.valueOf.call(e);case"[object ArrayBuffer]":case dt:return ft(ht(t),ht(e),n,i)}var s="[object Array]"===r;if(!s&&rt(t)){if(et(t)!==et(e))return!1;if(t.buffer===e.buffer&&t.byteOffset===e.byteOffset)return!0;s=!0}if(!s){if("object"!=typeof t||"object"!=typeof e)return!1;var o=t.constructor,a=e.constructor;if(o!==a&&!(H(o)&&o instanceof o&&H(a)&&a instanceof a)&&"constructor"in t&&"constructor"in e)return!1}i=i||[];for(var u=(n=n||[]).length;u--;)if(n[u]===t)return i[u]===e;if(n.push(t),i.push(e),s){if((u=t.length)!==e.length)return!1;for(;u--;)if(!pt(t[u],e[u],n,i))return!1}else{var l,d=at(t);if(u=d.length,at(e).length!==u)return!1;for(;u--;)if(!X(e,l=d[u])||!pt(t[l],e[l],n,i))return!1}return n.pop(),i.pop(),!0}function mt(t,e){return pt(t,e)}function gt(t){if(!C(t))return[];var e=[];for(var n in t)e.push(n);return _&&ot(t,e),e}function vt(t){var e=st(t);return function(n){if(null==n)return!1;var i=gt(n);if(st(i))return!1;for(var r=0;r<e;r++)if(!H(n[t[r]]))return!1;return t!==xt||!H(n[bt])}}var bt="forEach",yt=["clear","delete"],wt=["get","has","set"],_t=yt.concat(bt,wt),xt=yt.concat(wt),At=["add"].concat(yt,bt,"has");const Et=K?vt(_t):D("Map"),Ct=K?vt(xt):D("WeakMap"),Tt=K?vt(At):D("Set"),St=D("WeakSet");function kt(t){for(var e=at(t),n=e.length,i=Array(n),r=0;r<n;r++)i[r]=t[e[r]];return i}function Rt(t){for(var e=at(t),n=e.length,i=Array(n),r=0;r<n;r++)i[r]=[e[r],t[e[r]]];return i}function Dt(t){for(var e={},n=at(t),i=0,r=n.length;i<r;i++)e[t[n[i]]]=n[i];return e}function Ot(t){var e=[];for(var n in t)H(t[n])&&e.push(n);return e.sort()}function Lt(t,e){return function(n){var i=arguments.length;if(e&&(n=Object(n)),i<2||null==n)return n;for(var r=1;r<i;r++)for(var s=arguments[r],o=t(s),a=o.length,c=0;c<a;c++){var u=o[c];e&&void 0!==n[u]||(n[u]=s[u])}return n}}const Pt=Lt(gt),It=Lt(at),Nt=Lt(gt,!0);function Mt(t){if(!C(t))return{};if(v)return v(t);var e=function(){};e.prototype=t;var n=new e;return e.prototype=null,n}function Bt(t,e){var n=Mt(t);return e&&It(n,e),n}function Ft(t){return C(t)?q(t)?t.slice():Pt({},t):t}function Ut(t,e){return e(t),t}function Ht(t){return q(t)?t:[t]}function jt(t){return lt.toPath(t)}function zt(t,e){for(var n=e.length,i=0;i<n;i++){if(null==t)return;t=t[e[i]]}return n?t:void 0}function Kt(t,e,n){var i=zt(t,jt(e));return S(i)?n:i}function Gt(t,e){for(var n=(e=jt(e)).length,i=0;i<n;i++){var r=e[i];if(!X(t,r))return!1;t=t[r]}return!!n}function Wt(t){return t}function qt(t){return t=It({},t),function(e){return ut(e,t)}}function Xt(t){return t=jt(t),function(e){return zt(e,t)}}function Vt(t,e,n){if(void 0===e)return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,i,r){return t.call(e,n,i,r)};case 4:return function(n,i,r,s){return t.call(e,n,i,r,s)}}return function(){return t.apply(e,arguments)}}function Yt(t,e,n){return null==t?Wt:H(t)?Vt(t,e,n):C(t)&&!q(t)?qt(t):Xt(t)}function $t(t,e){return Yt(t,e,1/0)}function Qt(t,e,n){return lt.iteratee!==$t?lt.iteratee(t,e):Yt(t,e,n)}function Jt(t,e,n){e=Qt(e,n);for(var i=at(t),r=i.length,s={},o=0;o<r;o++){var a=i[o];s[a]=e(t[a],a,t)}return s}function Zt(){}function te(t){return null==t?Zt:function(e){return Kt(t,e)}}function ee(t,e,n){var i=Array(Math.max(0,t));e=Vt(e,n,1);for(var r=0;r<t;r++)i[r]=e(r);return i}function ne(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))}lt.toPath=Ht,lt.iteratee=$t;const ie=Date.now||function(){return(new Date).getTime()};function re(t){var e=function(e){return t[e]},n="(?:"+at(t).join("|")+")",i=RegExp(n),r=RegExp(n,"g");return function(t){return t=null==t?"":""+t,i.test(t)?t.replace(r,e):t}}const se={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},oe=re(se),ae=re(Dt(se)),ce=lt.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var ue=/(.)^/,le={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},he=/\\|'|\r|\n|\u2028|\u2029/g;function de(t){return"\\"+le[t]}var pe=/^\s*(\w|\$)+\s*$/;function fe(t,e,n){!e&&n&&(e=n),e=Nt({},e,lt.templateSettings);var i=RegExp([(e.escape||ue).source,(e.interpolate||ue).source,(e.evaluate||ue).source].join("|")+"|$","g"),r=0,s="__p+='";t.replace(i,(function(e,n,i,o,a){return s+=t.slice(r,a).replace(he,de),r=a+e.length,n?s+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":i?s+="'+\n((__t=("+i+"))==null?'':__t)+\n'":o&&(s+="';\n"+o+"\n__p+='"),e})),s+="';\n";var o,a=e.variable;if(a){if(!pe.test(a))throw new Error("variable is not a bare identifier: "+a)}else s="with(obj||{}){\n"+s+"}\n",a="obj";s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{o=new Function(a,"_",s)}catch(t){throw t.source=s,t}var c=function(t){return o.call(this,t,lt)};return c.source="function("+a+"){\n"+s+"}",c}function me(t,e,n){var i=(e=jt(e)).length;if(!i)return H(n)?n.call(t):n;for(var r=0;r<i;r++){var s=null==t?void 0:t[e[r]];void 0===s&&(s=n,r=i),t=H(s)?s.call(t):s}return t}var ge=0;function ve(t){var e=++ge+"";return t?t+e:e}function be(t){var e=lt(t);return e._chain=!0,e}function ye(t,e,n,i,r){if(!(i instanceof e))return t.apply(n,r);var s=Mt(t.prototype),o=t.apply(s,r);return C(o)?o:s}var we=E((function(t,e){var n=we.placeholder,i=function(){for(var r=0,s=e.length,o=Array(s),a=0;a<s;a++)o[a]=e[a]===n?arguments[r++]:e[a];for(;r<arguments.length;)o.push(arguments[r++]);return ye(t,i,this,this,o)};return i}));we.placeholder=lt;const _e=we,xe=E((function(t,e,n){if(!H(t))throw new TypeError("Bind must be called on a function");var i=E((function(r){return ye(t,i,e,this,n.concat(r))}));return i})),Ae=Z(st);function Ee(t,e,n,i){if(i=i||[],e||0===e){if(e<=0)return i.concat(t)}else e=1/0;for(var r=i.length,s=0,o=st(t);s<o;s++){var a=t[s];if(Ae(a)&&(q(a)||Y(a)))if(e>1)Ee(a,e-1,n,i),r=i.length;else for(var c=0,u=a.length;c<u;)i[r++]=a[c++];else n||(i[r++]=a)}return i}const Ce=E((function(t,e){var n=(e=Ee(e,!1,!1)).length;if(n<1)throw new Error("bindAll must be passed function names");for(;n--;){var i=e[n];t[i]=xe(t[i],t)}return t}));function Te(t,e){var n=function(i){var r=n.cache,s=""+(e?e.apply(this,arguments):i);return X(r,s)||(r[s]=t.apply(this,arguments)),r[s]};return n.cache={},n}const Se=E((function(t,e,n){return setTimeout((function(){return t.apply(null,n)}),e)})),ke=_e(Se,lt,1);function Re(t,e,n){var i,r,s,o,a=0;n||(n={});var c=function(){a=!1===n.leading?0:ie(),i=null,o=t.apply(r,s),i||(r=s=null)},u=function(){var u=ie();a||!1!==n.leading||(a=u);var l=e-(u-a);return r=this,s=arguments,l<=0||l>e?(i&&(clearTimeout(i),i=null),a=u,o=t.apply(r,s),i||(r=s=null)):i||!1===n.trailing||(i=setTimeout(c,l)),o};return u.cancel=function(){clearTimeout(i),a=0,i=r=s=null},u}function De(t,e,n){var i,r,s,o,a,c=function(){var u=ie()-r;e>u?i=setTimeout(c,e-u):(i=null,n||(o=t.apply(a,s)),i||(s=a=null))},u=E((function(u){return a=this,s=u,r=ie(),i||(i=setTimeout(c,e),n&&(o=t.apply(a,s))),o}));return u.cancel=function(){clearTimeout(i),i=s=a=null},u}function Oe(t,e){return _e(e,t)}function Le(t){return function(){return!t.apply(this,arguments)}}function Pe(){var t=arguments,e=t.length-1;return function(){for(var n=e,i=t[e].apply(this,arguments);n--;)i=t[n].call(this,i);return i}}function Ie(t,e){return function(){if(--t<1)return e.apply(this,arguments)}}function Ne(t,e){var n;return function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=null),n}}const Me=_e(Ne,2);function Be(t,e,n){e=Qt(e,n);for(var i,r=at(t),s=0,o=r.length;s<o;s++)if(e(t[i=r[s]],i,t))return i}function Fe(t){return function(e,n,i){n=Qt(n,i);for(var r=st(e),s=t>0?0:r-1;s>=0&&s<r;s+=t)if(n(e[s],s,e))return s;return-1}}const Ue=Fe(1),He=Fe(-1);function je(t,e,n,i){for(var r=(n=Qt(n,i,1))(e),s=0,o=st(t);s<o;){var a=Math.floor((s+o)/2);n(t[a])<r?s=a+1:o=a}return s}function ze(t,e,n){return function(i,r,s){var o=0,a=st(i);if("number"==typeof s)t>0?o=s>=0?s:Math.max(s+a,o):a=s>=0?Math.min(s+1,a):s+a+1;else if(n&&s&&a)return i[s=n(i,r)]===r?s:-1;if(r!=r)return(s=e(l.call(i,o,a),Q))>=0?s+o:-1;for(s=t>0?o:a-1;s>=0&&s<a;s+=t)if(i[s]===r)return s;return-1}}const Ke=ze(1,Ue,je),Ge=ze(-1,He);function We(t,e,n){var i=(Ae(t)?Ue:Be)(t,e,n);if(void 0!==i&&-1!==i)return t[i]}function qe(t,e){return We(t,qt(e))}function Xe(t,e,n){var i,r;if(e=Vt(e,n),Ae(t))for(i=0,r=t.length;i<r;i++)e(t[i],i,t);else{var s=at(t);for(i=0,r=s.length;i<r;i++)e(t[s[i]],s[i],t)}return t}function Ve(t,e,n){e=Qt(e,n);for(var i=!Ae(t)&&at(t),r=(i||t).length,s=Array(r),o=0;o<r;o++){var a=i?i[o]:o;s[o]=e(t[a],a,t)}return s}function Ye(t){var e=function(e,n,i,r){var s=!Ae(e)&&at(e),o=(s||e).length,a=t>0?0:o-1;for(r||(i=e[s?s[a]:a],a+=t);a>=0&&a<o;a+=t){var c=s?s[a]:a;i=n(i,e[c],c,e)}return i};return function(t,n,i,r){var s=arguments.length>=3;return e(t,Vt(n,r,4),i,s)}}const $e=Ye(1),Qe=Ye(-1);function Je(t,e,n){var i=[];return e=Qt(e,n),Xe(t,(function(t,n,r){e(t,n,r)&&i.push(t)})),i}function Ze(t,e,n){return Je(t,Le(Qt(e)),n)}function tn(t,e,n){e=Qt(e,n);for(var i=!Ae(t)&&at(t),r=(i||t).length,s=0;s<r;s++){var o=i?i[s]:s;if(!e(t[o],o,t))return!1}return!0}function en(t,e,n){e=Qt(e,n);for(var i=!Ae(t)&&at(t),r=(i||t).length,s=0;s<r;s++){var o=i?i[s]:s;if(e(t[o],o,t))return!0}return!1}function nn(t,e,n,i){return Ae(t)||(t=kt(t)),("number"!=typeof n||i)&&(n=0),Ke(t,e,n)>=0}const rn=E((function(t,e,n){var i,r;return H(e)?r=e:(e=jt(e),i=e.slice(0,-1),e=e[e.length-1]),Ve(t,(function(t){var s=r;if(!s){if(i&&i.length&&(t=zt(t,i)),null==t)return;s=t[e]}return null==s?s:s.apply(t,n)}))}));function sn(t,e){return Ve(t,Xt(e))}function on(t,e){return Je(t,qt(e))}function an(t,e,n){var i,r,s=-1/0,o=-1/0;if(null==e||"number"==typeof e&&"object"!=typeof t[0]&&null!=t)for(var a=0,c=(t=Ae(t)?t:kt(t)).length;a<c;a++)null!=(i=t[a])&&i>s&&(s=i);else e=Qt(e,n),Xe(t,(function(t,n,i){((r=e(t,n,i))>o||r===-1/0&&s===-1/0)&&(s=t,o=r)}));return s}function cn(t,e,n){var i,r,s=1/0,o=1/0;if(null==e||"number"==typeof e&&"object"!=typeof t[0]&&null!=t)for(var a=0,c=(t=Ae(t)?t:kt(t)).length;a<c;a++)null!=(i=t[a])&&i<s&&(s=i);else e=Qt(e,n),Xe(t,(function(t,n,i){((r=e(t,n,i))<o||r===1/0&&s===1/0)&&(s=t,o=r)}));return s}var un=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function ln(t){return t?q(t)?l.call(t):O(t)?t.match(un):Ae(t)?Ve(t,Wt):kt(t):[]}function hn(t,e,n){if(null==e||n)return Ae(t)||(t=kt(t)),t[ne(t.length-1)];var i=ln(t),r=st(i);e=Math.max(Math.min(e,r),0);for(var s=r-1,o=0;o<e;o++){var a=ne(o,s),c=i[o];i[o]=i[a],i[a]=c}return i.slice(0,e)}function dn(t){return hn(t,1/0)}function pn(t,e,n){var i=0;return e=Qt(e,n),sn(Ve(t,(function(t,n,r){return{value:t,index:i++,criteria:e(t,n,r)}})).sort((function(t,e){var n=t.criteria,i=e.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(n<i||void 0===i)return-1}return t.index-e.index})),"value")}function fn(t,e){return function(n,i,r){var s=e?[[],[]]:{};return i=Qt(i,r),Xe(n,(function(e,r){var o=i(e,r,n);t(s,e,o)})),s}}const mn=fn((function(t,e,n){X(t,n)?t[n].push(e):t[n]=[e]})),gn=fn((function(t,e,n){t[n]=e})),vn=fn((function(t,e,n){X(t,n)?t[n]++:t[n]=1})),bn=fn((function(t,e,n){t[n?0:1].push(e)}),!0);function yn(t){return null==t?0:Ae(t)?t.length:at(t).length}function wn(t,e,n){return e in n}const _n=E((function(t,e){var n={},i=e[0];if(null==t)return n;H(i)?(e.length>1&&(i=Vt(i,e[1])),e=gt(t)):(i=wn,e=Ee(e,!1,!1),t=Object(t));for(var r=0,s=e.length;r<s;r++){var o=e[r],a=t[o];i(a,o,t)&&(n[o]=a)}return n})),xn=E((function(t,e){var n,i=e[0];return H(i)?(i=Le(i),e.length>1&&(n=e[1])):(e=Ve(Ee(e,!1,!1),String),i=function(t,n){return!nn(e,n)}),_n(t,i,n)}));function An(t,e,n){return l.call(t,0,Math.max(0,t.length-(null==e||n?1:e)))}function En(t,e,n){return null==t||t.length<1?null==e||n?void 0:[]:null==e||n?t[0]:An(t,t.length-e)}function Cn(t,e,n){return l.call(t,null==e||n?1:e)}function Tn(t,e,n){return null==t||t.length<1?null==e||n?void 0:[]:null==e||n?t[t.length-1]:Cn(t,Math.max(0,t.length-e))}function Sn(t){return Je(t,Boolean)}function kn(t,e){return Ee(t,e,!1)}const Rn=E((function(t,e){return e=Ee(e,!0,!0),Je(t,(function(t){return!nn(e,t)}))})),Dn=E((function(t,e){return Rn(t,e)}));function On(t,e,n,i){k(e)||(i=n,n=e,e=!1),null!=n&&(n=Qt(n,i));for(var r=[],s=[],o=0,a=st(t);o<a;o++){var c=t[o],u=n?n(c,o,t):c;e&&!n?(o&&s===u||r.push(c),s=u):n?nn(s,u)||(s.push(u),r.push(c)):nn(r,c)||r.push(c)}return r}const Ln=E((function(t){return On(Ee(t,!0,!0))}));function Pn(t){for(var e=[],n=arguments.length,i=0,r=st(t);i<r;i++){var s=t[i];if(!nn(e,s)){var o;for(o=1;o<n&&nn(arguments[o],s);o++);o===n&&e.push(s)}}return e}function In(t){for(var e=t&&an(t,st).length||0,n=Array(e),i=0;i<e;i++)n[i]=sn(t,i);return n}const Nn=E(In);function Mn(t,e){for(var n={},i=0,r=st(t);i<r;i++)e?n[t[i]]=e[i]:n[t[i][0]]=t[i][1];return n}function Bn(t,e,n){null==e&&(e=t||0,t=0),n||(n=e<t?-1:1);for(var i=Math.max(Math.ceil((e-t)/n),0),r=Array(i),s=0;s<i;s++,t+=n)r[s]=t;return r}function Fn(t,e){if(null==e||e<1)return[];for(var n=[],i=0,r=t.length;i<r;)n.push(l.call(t,i,i+=e));return n}function Un(t,e){return t._chain?lt(e).chain():e}function Hn(t){return Xe(Ot(t),(function(e){var n=lt[e]=t[e];lt.prototype[e]=function(){var t=[this._wrapped];return u.apply(t,arguments),Un(this,n.apply(lt,t))}})),lt}Xe(["pop","push","reverse","shift","sort","splice","unshift"],(function(t){var e=o[t];lt.prototype[t]=function(){var n=this._wrapped;return null!=n&&(e.apply(n,arguments),"shift"!==t&&"splice"!==t||0!==n.length||delete n[0]),Un(this,n)}})),Xe(["concat","join","slice"],(function(t){var e=o[t];lt.prototype[t]=function(){var t=this._wrapped;return null!=t&&(t=e.apply(t,arguments)),Un(this,t)}}));const jn=lt;var zn=Hn(t);zn._=zn;const Kn=zn;var Gn="top",Wn="bottom",qn="right",Xn="left",Vn="auto",Yn=[Gn,Wn,qn,Xn],$n="start",Qn="end",Jn="clippingParents",Zn="viewport",ti="popper",ei="reference",ni=Yn.reduce((function(t,e){return t.concat([e+"-"+$n,e+"-"+Qn])}),[]),ii=[].concat(Yn,[Vn]).reduce((function(t,e){return t.concat([e,e+"-"+$n,e+"-"+Qn])}),[]),ri="beforeRead",si="read",oi="afterRead",ai="beforeMain",ci="main",ui="afterMain",li="beforeWrite",hi="write",di="afterWrite",pi=[ri,si,oi,ai,ci,ui,li,hi,di];function fi(t){return t?(t.nodeName||"").toLowerCase():null}function mi(t){if(null==t)return window;if("[object Window]"!==t.toString()){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function gi(t){return t instanceof mi(t).Element||t instanceof Element}function vi(t){return t instanceof mi(t).HTMLElement||t instanceof HTMLElement}function bi(t){return"undefined"!=typeof ShadowRoot&&(t instanceof mi(t).ShadowRoot||t instanceof ShadowRoot)}const yi={name:"applyStyles",enabled:!0,phase:"write",fn:function(t){var e=t.state;Object.keys(e.elements).forEach((function(t){var n=e.styles[t]||{},i=e.attributes[t]||{},r=e.elements[t];vi(r)&&fi(r)&&(Object.assign(r.style,n),Object.keys(i).forEach((function(t){var e=i[t];!1===e?r.removeAttribute(t):r.setAttribute(t,!0===e?"":e)})))}))},effect:function(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach((function(t){var i=e.elements[t],r=e.attributes[t]||{},s=Object.keys(e.styles.hasOwnProperty(t)?e.styles[t]:n[t]).reduce((function(t,e){return t[e]="",t}),{});vi(i)&&fi(i)&&(Object.assign(i.style,s),Object.keys(r).forEach((function(t){i.removeAttribute(t)})))}))}},requires:["computeStyles"]};function wi(t){return t.split("-")[0]}var _i=Math.max,xi=Math.min,Ai=Math.round;function Ei(t,e){void 0===e&&(e=!1);var n=t.getBoundingClientRect(),i=1,r=1;if(vi(t)&&e){var s=t.offsetHeight,o=t.offsetWidth;o>0&&(i=Ai(n.width)/o||1),s>0&&(r=Ai(n.height)/s||1)}return{width:n.width/i,height:n.height/r,top:n.top/r,right:n.right/i,bottom:n.bottom/r,left:n.left/i,x:n.left/i,y:n.top/r}}function Ci(t){var e=Ei(t),n=t.offsetWidth,i=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-i)<=1&&(i=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:i}}function Ti(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&bi(n)){var i=e;do{if(i&&t.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function Si(t){return mi(t).getComputedStyle(t)}function ki(t){return["table","td","th"].indexOf(fi(t))>=0}function Ri(t){return((gi(t)?t.ownerDocument:t.document)||window.document).documentElement}function Di(t){return"html"===fi(t)?t:t.assignedSlot||t.parentNode||(bi(t)?t.host:null)||Ri(t)}function Oi(t){return vi(t)&&"fixed"!==Si(t).position?t.offsetParent:null}function Li(t){for(var e=mi(t),n=Oi(t);n&&ki(n)&&"static"===Si(n).position;)n=Oi(n);return n&&("html"===fi(n)||"body"===fi(n)&&"static"===Si(n).position)?e:n||function(t){var e=-1!==navigator.userAgent.toLowerCase().indexOf("firefox");if(-1!==navigator.userAgent.indexOf("Trident")&&vi(t)&&"fixed"===Si(t).position)return null;var n=Di(t);for(bi(n)&&(n=n.host);vi(n)&&["html","body"].indexOf(fi(n))<0;){var i=Si(n);if("none"!==i.transform||"none"!==i.perspective||"paint"===i.contain||-1!==["transform","perspective"].indexOf(i.willChange)||e&&"filter"===i.willChange||e&&i.filter&&"none"!==i.filter)return n;n=n.parentNode}return null}(t)||e}function Pi(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function Ii(t,e,n){return _i(t,xi(e,n))}function Ni(t){return Object.assign({},{top:0,right:0,bottom:0,left:0},t)}function Mi(t,e){return e.reduce((function(e,n){return e[n]=t,e}),{})}const Bi={name:"arrow",enabled:!0,phase:"main",fn:function(t){var e,n=t.state,i=t.name,r=t.options,s=n.elements.arrow,o=n.modifiersData.popperOffsets,a=wi(n.placement),c=Pi(a),u=[Xn,qn].indexOf(a)>=0?"height":"width";if(s&&o){var l=function(t,e){return Ni("number"!=typeof(t="function"==typeof t?t(Object.assign({},e.rects,{placement:e.placement})):t)?t:Mi(t,Yn))}(r.padding,n),h=Ci(s),d="y"===c?Gn:Xn,p="y"===c?Wn:qn,f=n.rects.reference[u]+n.rects.reference[c]-o[c]-n.rects.popper[u],m=o[c]-n.rects.reference[c],g=Li(s),v=g?"y"===c?g.clientHeight||0:g.clientWidth||0:0,b=f/2-m/2,y=l[d],w=v-h[u]-l[p],_=v/2-h[u]/2+b,x=Ii(y,_,w),A=c;n.modifiersData[i]=((e={})[A]=x,e.centerOffset=x-_,e)}},effect:function(t){var e=t.state,n=t.options.element,i=void 0===n?"[data-popper-arrow]":n;null!=i&&("string"!=typeof i||(i=e.elements.popper.querySelector(i)))&&Ti(e.elements.popper,i)&&(e.elements.arrow=i)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Fi(t){return t.split("-")[1]}var Ui={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Hi(t){var e,n=t.popper,i=t.popperRect,r=t.placement,s=t.variation,o=t.offsets,a=t.position,c=t.gpuAcceleration,u=t.adaptive,l=t.roundOffsets,h=t.isFixed,d=o.x,p=void 0===d?0:d,f=o.y,m=void 0===f?0:f,g="function"==typeof l?l({x:p,y:m}):{x:p,y:m};p=g.x,m=g.y;var v=o.hasOwnProperty("x"),b=o.hasOwnProperty("y"),y=Xn,w=Gn,_=window;if(u){var x=Li(n),A="clientHeight",E="clientWidth";if(x===mi(n)&&"static"!==Si(x=Ri(n)).position&&"absolute"===a&&(A="scrollHeight",E="scrollWidth"),x=x,r===Gn||(r===Xn||r===qn)&&s===Qn)w=Wn,m-=(h&&x===_&&_.visualViewport?_.visualViewport.height:x[A])-i.height,m*=c?1:-1;if(r===Xn||(r===Gn||r===Wn)&&s===Qn)y=qn,p-=(h&&x===_&&_.visualViewport?_.visualViewport.width:x[E])-i.width,p*=c?1:-1}var C,T=Object.assign({position:a},u&&Ui),S=!0===l?function(t){var e=t.x,n=t.y,i=window.devicePixelRatio||1;return{x:Ai(e*i)/i||0,y:Ai(n*i)/i||0}}({x:p,y:m}):{x:p,y:m};return p=S.x,m=S.y,c?Object.assign({},T,((C={})[w]=b?"0":"",C[y]=v?"0":"",C.transform=(_.devicePixelRatio||1)<=1?"translate("+p+"px, "+m+"px)":"translate3d("+p+"px, "+m+"px, 0)",C)):Object.assign({},T,((e={})[w]=b?m+"px":"",e[y]=v?p+"px":"",e.transform="",e))}const ji={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(t){var e=t.state,n=t.options,i=n.gpuAcceleration,r=void 0===i||i,s=n.adaptive,o=void 0===s||s,a=n.roundOffsets,c=void 0===a||a,u={placement:wi(e.placement),variation:Fi(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:r,isFixed:"fixed"===e.options.strategy};null!=e.modifiersData.popperOffsets&&(e.styles.popper=Object.assign({},e.styles.popper,Hi(Object.assign({},u,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:c})))),null!=e.modifiersData.arrow&&(e.styles.arrow=Object.assign({},e.styles.arrow,Hi(Object.assign({},u,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})},data:{}};var zi={passive:!0};const Ki={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(t){var e=t.state,n=t.instance,i=t.options,r=i.scroll,s=void 0===r||r,o=i.resize,a=void 0===o||o,c=mi(e.elements.popper),u=[].concat(e.scrollParents.reference,e.scrollParents.popper);return s&&u.forEach((function(t){t.addEventListener("scroll",n.update,zi)})),a&&c.addEventListener("resize",n.update,zi),function(){s&&u.forEach((function(t){t.removeEventListener("scroll",n.update,zi)})),a&&c.removeEventListener("resize",n.update,zi)}},data:{}};var Gi={left:"right",right:"left",bottom:"top",top:"bottom"};function Wi(t){return t.replace(/left|right|bottom|top/g,(function(t){return Gi[t]}))}var qi={start:"end",end:"start"};function Xi(t){return t.replace(/start|end/g,(function(t){return qi[t]}))}function Vi(t){var e=mi(t);return{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function Yi(t){return Ei(Ri(t)).left+Vi(t).scrollLeft}function $i(t){var e=Si(t),n=e.overflow,i=e.overflowX,r=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+r+i)}function Qi(t){return["html","body","#document"].indexOf(fi(t))>=0?t.ownerDocument.body:vi(t)&&$i(t)?t:Qi(Di(t))}function Ji(t,e){var n;void 0===e&&(e=[]);var i=Qi(t),r=i===(null==(n=t.ownerDocument)?void 0:n.body),s=mi(i),o=r?[s].concat(s.visualViewport||[],$i(i)?i:[]):i,a=e.concat(o);return r?a:a.concat(Ji(Di(o)))}function Zi(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function tr(t,e){return e===Zn?Zi(function(t){var e=mi(t),n=Ri(t),i=e.visualViewport,r=n.clientWidth,s=n.clientHeight,o=0,a=0;return i&&(r=i.width,s=i.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(o=i.offsetLeft,a=i.offsetTop)),{width:r,height:s,x:o+Yi(t),y:a}}(t)):gi(e)?function(t){var e=Ei(t);return e.top=e.top+t.clientTop,e.left=e.left+t.clientLeft,e.bottom=e.top+t.clientHeight,e.right=e.left+t.clientWidth,e.width=t.clientWidth,e.height=t.clientHeight,e.x=e.left,e.y=e.top,e}(e):Zi(function(t){var e,n=Ri(t),i=Vi(t),r=null==(e=t.ownerDocument)?void 0:e.body,s=_i(n.scrollWidth,n.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),o=_i(n.scrollHeight,n.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),a=-i.scrollLeft+Yi(t),c=-i.scrollTop;return"rtl"===Si(r||n).direction&&(a+=_i(n.clientWidth,r?r.clientWidth:0)-s),{width:s,height:o,x:a,y:c}}(Ri(t)))}function er(t,e,n){var i="clippingParents"===e?function(t){var e=Ji(Di(t)),n=["absolute","fixed"].indexOf(Si(t).position)>=0&&vi(t)?Li(t):t;return gi(n)?e.filter((function(t){return gi(t)&&Ti(t,n)&&"body"!==fi(t)})):[]}(t):[].concat(e),r=[].concat(i,[n]),s=r[0],o=r.reduce((function(e,n){var i=tr(t,n);return e.top=_i(i.top,e.top),e.right=xi(i.right,e.right),e.bottom=xi(i.bottom,e.bottom),e.left=_i(i.left,e.left),e}),tr(t,s));return o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}function nr(t){var e,n=t.reference,i=t.element,r=t.placement,s=r?wi(r):null,o=r?Fi(r):null,a=n.x+n.width/2-i.width/2,c=n.y+n.height/2-i.height/2;switch(s){case Gn:e={x:a,y:n.y-i.height};break;case Wn:e={x:a,y:n.y+n.height};break;case qn:e={x:n.x+n.width,y:c};break;case Xn:e={x:n.x-i.width,y:c};break;default:e={x:n.x,y:n.y}}var u=s?Pi(s):null;if(null!=u){var l="y"===u?"height":"width";switch(o){case $n:e[u]=e[u]-(n[l]/2-i[l]/2);break;case Qn:e[u]=e[u]+(n[l]/2-i[l]/2)}}return e}function ir(t,e){void 0===e&&(e={});var n=e,i=n.placement,r=void 0===i?t.placement:i,s=n.boundary,o=void 0===s?Jn:s,a=n.rootBoundary,c=void 0===a?Zn:a,u=n.elementContext,l=void 0===u?ti:u,h=n.altBoundary,d=void 0!==h&&h,p=n.padding,f=void 0===p?0:p,m=Ni("number"!=typeof f?f:Mi(f,Yn)),g=l===ti?ei:ti,v=t.rects.popper,b=t.elements[d?g:l],y=er(gi(b)?b:b.contextElement||Ri(t.elements.popper),o,c),w=Ei(t.elements.reference),_=nr({reference:w,element:v,strategy:"absolute",placement:r}),x=Zi(Object.assign({},v,_)),A=l===ti?x:w,E={top:y.top-A.top+m.top,bottom:A.bottom-y.bottom+m.bottom,left:y.left-A.left+m.left,right:A.right-y.right+m.right},C=t.modifiersData.offset;if(l===ti&&C){var T=C[r];Object.keys(E).forEach((function(t){var e=[qn,Wn].indexOf(t)>=0?1:-1,n=[Gn,Wn].indexOf(t)>=0?"y":"x";E[t]+=T[n]*e}))}return E}const rr={name:"flip",enabled:!0,phase:"main",fn:function(t){var e=t.state,n=t.options,i=t.name;if(!e.modifiersData[i]._skip){for(var r=n.mainAxis,s=void 0===r||r,o=n.altAxis,a=void 0===o||o,c=n.fallbackPlacements,u=n.padding,l=n.boundary,h=n.rootBoundary,d=n.altBoundary,p=n.flipVariations,f=void 0===p||p,m=n.allowedAutoPlacements,g=e.options.placement,v=wi(g),b=c||(v===g||!f?[Wi(g)]:function(t){if(wi(t)===Vn)return[];var e=Wi(t);return[Xi(t),e,Xi(e)]}(g)),y=[g].concat(b).reduce((function(t,n){return t.concat(wi(n)===Vn?function(t,e){void 0===e&&(e={});var n=e,i=n.placement,r=n.boundary,s=n.rootBoundary,o=n.padding,a=n.flipVariations,c=n.allowedAutoPlacements,u=void 0===c?ii:c,l=Fi(i),h=l?a?ni:ni.filter((function(t){return Fi(t)===l})):Yn,d=h.filter((function(t){return u.indexOf(t)>=0}));0===d.length&&(d=h);var p=d.reduce((function(e,n){return e[n]=ir(t,{placement:n,boundary:r,rootBoundary:s,padding:o})[wi(n)],e}),{});return Object.keys(p).sort((function(t,e){return p[t]-p[e]}))}(e,{placement:n,boundary:l,rootBoundary:h,padding:u,flipVariations:f,allowedAutoPlacements:m}):n)}),[]),w=e.rects.reference,_=e.rects.popper,x=new Map,A=!0,E=y[0],C=0;C<y.length;C++){var T=y[C],S=wi(T),k=Fi(T)===$n,R=[Gn,Wn].indexOf(S)>=0,D=R?"width":"height",O=ir(e,{placement:T,boundary:l,rootBoundary:h,altBoundary:d,padding:u}),L=R?k?qn:Xn:k?Wn:Gn;w[D]>_[D]&&(L=Wi(L));var P=Wi(L),I=[];if(s&&I.push(O[S]<=0),a&&I.push(O[L]<=0,O[P]<=0),I.every((function(t){return t}))){E=T,A=!1;break}x.set(T,I)}if(A)for(var N=function(t){var e=y.find((function(e){var n=x.get(e);if(n)return n.slice(0,t).every((function(t){return t}))}));if(e)return E=e,"break"},M=f?3:1;M>0;M--){if("break"===N(M))break}e.placement!==E&&(e.modifiersData[i]._skip=!0,e.placement=E,e.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function sr(t,e,n){return void 0===n&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function or(t){return[Gn,qn,Wn,Xn].some((function(e){return t[e]>=0}))}const ar={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(t){var e=t.state,n=t.name,i=e.rects.reference,r=e.rects.popper,s=e.modifiersData.preventOverflow,o=ir(e,{elementContext:"reference"}),a=ir(e,{altBoundary:!0}),c=sr(o,i),u=sr(a,r,s),l=or(c),h=or(u);e.modifiersData[n]={referenceClippingOffsets:c,popperEscapeOffsets:u,isReferenceHidden:l,hasPopperEscaped:h},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":l,"data-popper-escaped":h})}};const cr={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(t){var e=t.state,n=t.options,i=t.name,r=n.offset,s=void 0===r?[0,0]:r,o=ii.reduce((function(t,n){return t[n]=function(t,e,n){var i=wi(t),r=[Xn,Gn].indexOf(i)>=0?-1:1,s="function"==typeof n?n(Object.assign({},e,{placement:t})):n,o=s[0],a=s[1];return o=o||0,a=(a||0)*r,[Xn,qn].indexOf(i)>=0?{x:a,y:o}:{x:o,y:a}}(n,e.rects,s),t}),{}),a=o[e.placement],c=a.x,u=a.y;null!=e.modifiersData.popperOffsets&&(e.modifiersData.popperOffsets.x+=c,e.modifiersData.popperOffsets.y+=u),e.modifiersData[i]=o}};const ur={name:"popperOffsets",enabled:!0,phase:"read",fn:function(t){var e=t.state,n=t.name;e.modifiersData[n]=nr({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})},data:{}};const lr={name:"preventOverflow",enabled:!0,phase:"main",fn:function(t){var e=t.state,n=t.options,i=t.name,r=n.mainAxis,s=void 0===r||r,o=n.altAxis,a=void 0!==o&&o,c=n.boundary,u=n.rootBoundary,l=n.altBoundary,h=n.padding,d=n.tether,p=void 0===d||d,f=n.tetherOffset,m=void 0===f?0:f,g=ir(e,{boundary:c,rootBoundary:u,padding:h,altBoundary:l}),v=wi(e.placement),b=Fi(e.placement),y=!b,w=Pi(v),_="x"===w?"y":"x",x=e.modifiersData.popperOffsets,A=e.rects.reference,E=e.rects.popper,C="function"==typeof m?m(Object.assign({},e.rects,{placement:e.placement})):m,T="number"==typeof C?{mainAxis:C,altAxis:C}:Object.assign({mainAxis:0,altAxis:0},C),S=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,k={x:0,y:0};if(x){if(s){var R,D="y"===w?Gn:Xn,O="y"===w?Wn:qn,L="y"===w?"height":"width",P=x[w],I=P+g[D],N=P-g[O],M=p?-E[L]/2:0,B=b===$n?A[L]:E[L],F=b===$n?-E[L]:-A[L],U=e.elements.arrow,H=p&&U?Ci(U):{width:0,height:0},j=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},z=j[D],K=j[O],G=Ii(0,A[L],H[L]),W=y?A[L]/2-M-G-z-T.mainAxis:B-G-z-T.mainAxis,q=y?-A[L]/2+M+G+K+T.mainAxis:F+G+K+T.mainAxis,X=e.elements.arrow&&Li(e.elements.arrow),V=X?"y"===w?X.clientTop||0:X.clientLeft||0:0,Y=null!=(R=null==S?void 0:S[w])?R:0,$=P+q-Y,Q=Ii(p?xi(I,P+W-Y-V):I,P,p?_i(N,$):N);x[w]=Q,k[w]=Q-P}if(a){var J,Z="x"===w?Gn:Xn,tt="x"===w?Wn:qn,et=x[_],nt="y"===_?"height":"width",it=et+g[Z],rt=et-g[tt],st=-1!==[Gn,Xn].indexOf(v),ot=null!=(J=null==S?void 0:S[_])?J:0,at=st?it:et-A[nt]-E[nt]-ot+T.altAxis,ct=st?et+A[nt]+E[nt]-ot-T.altAxis:rt,ut=p&&st?function(t,e,n){var i=Ii(t,e,n);return i>n?n:i}(at,et,ct):Ii(p?at:it,et,p?ct:rt);x[_]=ut,k[_]=ut-et}e.modifiersData[i]=k}},requiresIfExists:["offset"]};function hr(t,e,n){void 0===n&&(n=!1);var i,r,s=vi(e),o=vi(e)&&function(t){var e=t.getBoundingClientRect(),n=Ai(e.width)/t.offsetWidth||1,i=Ai(e.height)/t.offsetHeight||1;return 1!==n||1!==i}(e),a=Ri(e),c=Ei(t,o),u={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(s||!s&&!n)&&(("body"!==fi(e)||$i(a))&&(u=(i=e)!==mi(i)&&vi(i)?{scrollLeft:(r=i).scrollLeft,scrollTop:r.scrollTop}:Vi(i)),vi(e)?((l=Ei(e,!0)).x+=e.clientLeft,l.y+=e.clientTop):a&&(l.x=Yi(a))),{x:c.left+u.scrollLeft-l.x,y:c.top+u.scrollTop-l.y,width:c.width,height:c.height}}function dr(t){var e=new Map,n=new Set,i=[];function r(t){n.add(t.name),[].concat(t.requires||[],t.requiresIfExists||[]).forEach((function(t){if(!n.has(t)){var i=e.get(t);i&&r(i)}})),i.push(t)}return t.forEach((function(t){e.set(t.name,t)})),t.forEach((function(t){n.has(t.name)||r(t)})),i}var pr={placement:"bottom",modifiers:[],strategy:"absolute"};function fr(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some((function(t){return!(t&&"function"==typeof t.getBoundingClientRect)}))}function mr(t){void 0===t&&(t={});var e=t,n=e.defaultModifiers,i=void 0===n?[]:n,r=e.defaultOptions,s=void 0===r?pr:r;return function(t,e,n){void 0===n&&(n=s);var r,o,a={placement:"bottom",orderedModifiers:[],options:Object.assign({},pr,s),modifiersData:{},elements:{reference:t,popper:e},attributes:{},styles:{}},c=[],u=!1,l={state:a,setOptions:function(n){var r="function"==typeof n?n(a.options):n;h(),a.options=Object.assign({},s,a.options,r),a.scrollParents={reference:gi(t)?Ji(t):t.contextElement?Ji(t.contextElement):[],popper:Ji(e)};var o=function(t){var e=dr(t);return pi.reduce((function(t,n){return t.concat(e.filter((function(t){return t.phase===n})))}),[])}(function(t){var e=t.reduce((function(t,e){var n=t[e.name];return t[e.name]=n?Object.assign({},n,e,{options:Object.assign({},n.options,e.options),data:Object.assign({},n.data,e.data)}):e,t}),{});return Object.keys(e).map((function(t){return e[t]}))}([].concat(i,a.options.modifiers)));return a.orderedModifiers=o.filter((function(t){return t.enabled})),a.orderedModifiers.forEach((function(t){var e=t.name,n=t.options,i=void 0===n?{}:n,r=t.effect;if("function"==typeof r){var s=r({state:a,name:e,instance:l,options:i}),o=function(){};c.push(s||o)}})),l.update()},forceUpdate:function(){if(!u){var t=a.elements,e=t.reference,n=t.popper;if(fr(e,n)){a.rects={reference:hr(e,Li(n),"fixed"===a.options.strategy),popper:Ci(n)},a.reset=!1,a.placement=a.options.placement,a.orderedModifiers.forEach((function(t){return a.modifiersData[t.name]=Object.assign({},t.data)}));for(var i=0;i<a.orderedModifiers.length;i++)if(!0!==a.reset){var r=a.orderedModifiers[i],s=r.fn,o=r.options,c=void 0===o?{}:o,h=r.name;"function"==typeof s&&(a=s({state:a,options:c,name:h,instance:l})||a)}else a.reset=!1,i=-1}}},update:(r=function(){return new Promise((function(t){l.forceUpdate(),t(a)}))},function(){return o||(o=new Promise((function(t){Promise.resolve().then((function(){o=void 0,t(r())}))}))),o}),destroy:function(){h(),u=!0}};if(!fr(t,e))return l;function h(){c.forEach((function(t){return t()})),c=[]}return l.setOptions(n).then((function(t){!u&&n.onFirstUpdate&&n.onFirstUpdate(t)})),l}}var gr=mr(),vr=mr({defaultModifiers:[Ki,ur,ji,yi,cr,rr,lr,Bi,ar]}),br=mr({defaultModifiers:[Ki,ur,ji,yi]});const yr="transitionend",wr=t=>{let e=t.getAttribute("data-bs-target");if(!e||"#"===e){let n=t.getAttribute("href");if(!n||!n.includes("#")&&!n.startsWith("."))return null;n.includes("#")&&!n.startsWith("#")&&(n=`#${n.split("#")[1]}`),e=n&&"#"!==n?n.trim():null}return e},_r=t=>{const e=wr(t);return e&&document.querySelector(e)?e:null},xr=t=>{const e=wr(t);return e?document.querySelector(e):null},Ar=t=>{t.dispatchEvent(new Event(yr))},Er=t=>!(!t||"object"!=typeof t)&&(void 0!==t.jquery&&(t=t[0]),void 0!==t.nodeType),Cr=t=>Er(t)?t.jquery?t[0]:t:"string"==typeof t&&t.length>0?document.querySelector(t):null,Tr=(t,e,n)=>{Object.keys(n).forEach((i=>{const r=n[i],s=e[i],o=s&&Er(s)?"element":null==(a=s)?`${a}`:{}.toString.call(a).match(/\s([a-z]+)/i)[1].toLowerCase();var a;if(!new RegExp(r).test(o))throw new TypeError(`${t.toUpperCase()}: Option "${i}" provided type "${o}" but expected type "${r}".`)}))},Sr=t=>!(!Er(t)||0===t.getClientRects().length)&&"visible"===getComputedStyle(t).getPropertyValue("visibility"),kr=t=>!t||t.nodeType!==Node.ELEMENT_NODE||(!!t.classList.contains("disabled")||(void 0!==t.disabled?t.disabled:t.hasAttribute("disabled")&&"false"!==t.getAttribute("disabled"))),Rr=t=>{if(!document.documentElement.attachShadow)return null;if("function"==typeof t.getRootNode){const e=t.getRootNode();return e instanceof ShadowRoot?e:null}return t instanceof ShadowRoot?t:t.parentNode?Rr(t.parentNode):null},Dr=()=>{},Or=t=>{t.offsetHeight},Lr=()=>{const{jQuery:t}=window;return t&&!document.body.hasAttribute("data-bs-no-jquery")?t:null},Pr=[],Ir=()=>"rtl"===document.documentElement.dir,Nr=t=>{var e;e=()=>{const e=Lr();if(e){const n=t.NAME,i=e.fn[n];e.fn[n]=t.jQueryInterface,e.fn[n].Constructor=t,e.fn[n].noConflict=()=>(e.fn[n]=i,t.jQueryInterface)}},"loading"===document.readyState?(Pr.length||document.addEventListener("DOMContentLoaded",(()=>{Pr.forEach((t=>t()))})),Pr.push(e)):e()},Mr=t=>{"function"==typeof t&&t()},Br=(t,e,n=!0)=>{if(!n)return void Mr(t);const i=(t=>{if(!t)return 0;let{transitionDuration:e,transitionDelay:n}=window.getComputedStyle(t);const i=Number.parseFloat(e),r=Number.parseFloat(n);return i||r?(e=e.split(",")[0],n=n.split(",")[0],1e3*(Number.parseFloat(e)+Number.parseFloat(n))):0})(e)+5;let r=!1;const s=({target:n})=>{n===e&&(r=!0,e.removeEventListener(yr,s),Mr(t))};e.addEventListener(yr,s),setTimeout((()=>{r||Ar(e)}),i)},Fr=(t,e,n,i)=>{let r=t.indexOf(e);if(-1===r)return t[!n&&i?t.length-1:0];const s=t.length;return r+=n?1:-1,i&&(r=(r+s)%s),t[Math.max(0,Math.min(r,s-1))]},Ur=/[^.]*(?=\..*)\.|.*/,Hr=/\..*/,jr=/::\d+$/,zr={};let Kr=1;const Gr={mouseenter:"mouseover",mouseleave:"mouseout"},Wr=/^(mouseenter|mouseleave)/i,qr=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function Xr(t,e){return e&&`${e}::${Kr++}`||t.uidEvent||Kr++}function Vr(t){const e=Xr(t);return t.uidEvent=e,zr[e]=zr[e]||{},zr[e]}function Yr(t,e,n=null){const i=Object.keys(t);for(let r=0,s=i.length;r<s;r++){const s=t[i[r]];if(s.originalHandler===e&&s.delegationSelector===n)return s}return null}function $r(t,e,n){const i="string"==typeof e,r=i?n:e;let s=Zr(t);return qr.has(s)||(s=t),[i,r,s]}function Qr(t,e,n,i,r){if("string"!=typeof e||!t)return;if(n||(n=i,i=null),Wr.test(e)){const t=t=>function(e){if(!e.relatedTarget||e.relatedTarget!==e.delegateTarget&&!e.delegateTarget.contains(e.relatedTarget))return t.call(this,e)};i?i=t(i):n=t(n)}const[s,o,a]=$r(e,n,i),c=Vr(t),u=c[a]||(c[a]={}),l=Yr(u,o,s?n:null);if(l)return void(l.oneOff=l.oneOff&&r);const h=Xr(o,e.replace(Ur,"")),d=s?function(t,e,n){return function i(r){const s=t.querySelectorAll(e);for(let{target:o}=r;o&&o!==this;o=o.parentNode)for(let a=s.length;a--;)if(s[a]===o)return r.delegateTarget=o,i.oneOff&&ts.off(t,r.type,e,n),n.apply(o,[r]);return null}}(t,n,i):function(t,e){return function n(i){return i.delegateTarget=t,n.oneOff&&ts.off(t,i.type,e),e.apply(t,[i])}}(t,n);d.delegationSelector=s?n:null,d.originalHandler=o,d.oneOff=r,d.uidEvent=h,u[h]=d,t.addEventListener(a,d,s)}function Jr(t,e,n,i,r){const s=Yr(e[n],i,r);s&&(t.removeEventListener(n,s,Boolean(r)),delete e[n][s.uidEvent])}function Zr(t){return t=t.replace(Hr,""),Gr[t]||t}const ts={on(t,e,n,i){Qr(t,e,n,i,!1)},one(t,e,n,i){Qr(t,e,n,i,!0)},off(t,e,n,i){if("string"!=typeof e||!t)return;const[r,s,o]=$r(e,n,i),a=o!==e,c=Vr(t),u=e.startsWith(".");if(void 0!==s){if(!c||!c[o])return;return void Jr(t,c,o,s,r?n:null)}u&&Object.keys(c).forEach((n=>{!function(t,e,n,i){const r=e[n]||{};Object.keys(r).forEach((s=>{if(s.includes(i)){const i=r[s];Jr(t,e,n,i.originalHandler,i.delegationSelector)}}))}(t,c,n,e.slice(1))}));const l=c[o]||{};Object.keys(l).forEach((n=>{const i=n.replace(jr,"");if(!a||e.includes(i)){const e=l[n];Jr(t,c,o,e.originalHandler,e.delegationSelector)}}))},trigger(t,e,n){if("string"!=typeof e||!t)return null;const i=Lr(),r=Zr(e),s=e!==r,o=qr.has(r);let a,c=!0,u=!0,l=!1,h=null;return s&&i&&(a=i.Event(e,n),i(t).trigger(a),c=!a.isPropagationStopped(),u=!a.isImmediatePropagationStopped(),l=a.isDefaultPrevented()),o?(h=document.createEvent("HTMLEvents"),h.initEvent(r,c,!0)):h=new CustomEvent(e,{bubbles:c,cancelable:!0}),void 0!==n&&Object.keys(n).forEach((t=>{Object.defineProperty(h,t,{get:()=>n[t]})})),l&&h.preventDefault(),u&&t.dispatchEvent(h),h.defaultPrevented&&void 0!==a&&a.preventDefault(),h}},es=new Map,ns={set(t,e,n){es.has(t)||es.set(t,new Map);const i=es.get(t);i.has(e)||0===i.size?i.set(e,n):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(i.keys())[0]}.`)},get:(t,e)=>es.has(t)&&es.get(t).get(e)||null,remove(t,e){if(!es.has(t))return;const n=es.get(t);n.delete(e),0===n.size&&es.delete(t)}};class is{constructor(t){(t=Cr(t))&&(this._element=t,ns.set(this._element,this.constructor.DATA_KEY,this))}dispose(){ns.remove(this._element,this.constructor.DATA_KEY),ts.off(this._element,this.constructor.EVENT_KEY),Object.getOwnPropertyNames(this).forEach((t=>{this[t]=null}))}_queueCallback(t,e,n=!0){Br(t,e,n)}static getInstance(t){return ns.get(Cr(t),this.DATA_KEY)}static getOrCreateInstance(t,e={}){return this.getInstance(t)||new this(t,"object"==typeof e?e:null)}static get VERSION(){return"5.1.3"}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}}const rs=(t,e="hide")=>{const n=`click.dismiss${t.EVENT_KEY}`,i=t.NAME;ts.on(document,n,`[data-bs-dismiss="${i}"]`,(function(n){if(["A","AREA"].includes(this.tagName)&&n.preventDefault(),kr(this))return;const r=xr(this)||this.closest(`.${i}`);t.getOrCreateInstance(r)[e]()}))};class ss extends is{static get NAME(){return"alert"}close(){if(ts.trigger(this._element,"close.bs.alert").defaultPrevented)return;this._element.classList.remove("show");const t=this._element.classList.contains("fade");this._queueCallback((()=>this._destroyElement()),this._element,t)}_destroyElement(){this._element.remove(),ts.trigger(this._element,"closed.bs.alert"),this.dispose()}static jQueryInterface(t){return this.each((function(){const e=ss.getOrCreateInstance(this);if("string"==typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);e[t](this)}}))}}rs(ss,"close"),Nr(ss);const os='[data-bs-toggle="button"]';class as extends is{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(t){return this.each((function(){const e=as.getOrCreateInstance(this);"toggle"===t&&e[t]()}))}}function cs(t){return"true"===t||"false"!==t&&(t===Number(t).toString()?Number(t):""===t||"null"===t?null:t)}function us(t){return t.replace(/[A-Z]/g,(t=>`-${t.toLowerCase()}`))}ts.on(document,"click.bs.button.data-api",os,(t=>{t.preventDefault();const e=t.target.closest(os);as.getOrCreateInstance(e).toggle()})),Nr(as);const ls={setDataAttribute(t,e,n){t.setAttribute(`data-bs-${us(e)}`,n)},removeDataAttribute(t,e){t.removeAttribute(`data-bs-${us(e)}`)},getDataAttributes(t){if(!t)return{};const e={};return Object.keys(t.dataset).filter((t=>t.startsWith("bs"))).forEach((n=>{let i=n.replace(/^bs/,"");i=i.charAt(0).toLowerCase()+i.slice(1,i.length),e[i]=cs(t.dataset[n])})),e},getDataAttribute:(t,e)=>cs(t.getAttribute(`data-bs-${us(e)}`)),offset(t){const e=t.getBoundingClientRect();return{top:e.top+window.pageYOffset,left:e.left+window.pageXOffset}},position:t=>({top:t.offsetTop,left:t.offsetLeft})},hs={find:(t,e=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(e,t)),findOne:(t,e=document.documentElement)=>Element.prototype.querySelector.call(e,t),children:(t,e)=>[].concat(...t.children).filter((t=>t.matches(e))),parents(t,e){const n=[];let i=t.parentNode;for(;i&&i.nodeType===Node.ELEMENT_NODE&&3!==i.nodeType;)i.matches(e)&&n.push(i),i=i.parentNode;return n},prev(t,e){let n=t.previousElementSibling;for(;n;){if(n.matches(e))return[n];n=n.previousElementSibling}return[]},next(t,e){let n=t.nextElementSibling;for(;n;){if(n.matches(e))return[n];n=n.nextElementSibling}return[]},focusableChildren(t){const e=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map((t=>`${t}:not([tabindex^="-"])`)).join(", ");return this.find(e,t).filter((t=>!kr(t)&&Sr(t)))}},ds="carousel",ps={interval:5e3,keyboard:!0,slide:!1,pause:"hover",wrap:!0,touch:!0},fs={interval:"(number|boolean)",keyboard:"boolean",slide:"(boolean|string)",pause:"(string|boolean)",wrap:"boolean",touch:"boolean"},ms="next",gs="prev",vs="left",bs="right",ys={ArrowLeft:bs,ArrowRight:vs},ws="slid.bs.carousel",_s="active",xs=".active.carousel-item";class As extends is{constructor(t,e){super(t),this._items=null,this._interval=null,this._activeElement=null,this._isPaused=!1,this._isSliding=!1,this.touchTimeout=null,this.touchStartX=0,this.touchDeltaX=0,this._config=this._getConfig(e),this._indicatorsElement=hs.findOne(".carousel-indicators",this._element),this._touchSupported="ontouchstart"in document.documentElement||navigator.maxTouchPoints>0,this._pointerEvent=Boolean(window.PointerEvent),this._addEventListeners()}static get Default(){return ps}static get NAME(){return ds}next(){this._slide(ms)}nextWhenVisible(){!document.hidden&&Sr(this._element)&&this.next()}prev(){this._slide(gs)}pause(t){t||(this._isPaused=!0),hs.findOne(".carousel-item-next, .carousel-item-prev",this._element)&&(Ar(this._element),this.cycle(!0)),clearInterval(this._interval),this._interval=null}cycle(t){t||(this._isPaused=!1),this._interval&&(clearInterval(this._interval),this._interval=null),this._config&&this._config.interval&&!this._isPaused&&(this._updateInterval(),this._interval=setInterval((document.visibilityState?this.nextWhenVisible:this.next).bind(this),this._config.interval))}to(t){this._activeElement=hs.findOne(xs,this._element);const e=this._getItemIndex(this._activeElement);if(t>this._items.length-1||t<0)return;if(this._isSliding)return void ts.one(this._element,ws,(()=>this.to(t)));if(e===t)return this.pause(),void this.cycle();const n=t>e?ms:gs;this._slide(n,this._items[t])}_getConfig(t){return t={...ps,...ls.getDataAttributes(this._element),..."object"==typeof t?t:{}},Tr(ds,t,fs),t}_handleSwipe(){const t=Math.abs(this.touchDeltaX);if(t<=40)return;const e=t/this.touchDeltaX;this.touchDeltaX=0,e&&this._slide(e>0?bs:vs)}_addEventListeners(){this._config.keyboard&&ts.on(this._element,"keydown.bs.carousel",(t=>this._keydown(t))),"hover"===this._config.pause&&(ts.on(this._element,"mouseenter.bs.carousel",(t=>this.pause(t))),ts.on(this._element,"mouseleave.bs.carousel",(t=>this.cycle(t)))),this._config.touch&&this._touchSupported&&this._addTouchEventListeners()}_addTouchEventListeners(){const t=t=>this._pointerEvent&&("pen"===t.pointerType||"touch"===t.pointerType),e=e=>{t(e)?this.touchStartX=e.clientX:this._pointerEvent||(this.touchStartX=e.touches[0].clientX)},n=t=>{this.touchDeltaX=t.touches&&t.touches.length>1?0:t.touches[0].clientX-this.touchStartX},i=e=>{t(e)&&(this.touchDeltaX=e.clientX-this.touchStartX),this._handleSwipe(),"hover"===this._config.pause&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout((t=>this.cycle(t)),500+this._config.interval))};hs.find(".carousel-item img",this._element).forEach((t=>{ts.on(t,"dragstart.bs.carousel",(t=>t.preventDefault()))})),this._pointerEvent?(ts.on(this._element,"pointerdown.bs.carousel",(t=>e(t))),ts.on(this._element,"pointerup.bs.carousel",(t=>i(t))),this._element.classList.add("pointer-event")):(ts.on(this._element,"touchstart.bs.carousel",(t=>e(t))),ts.on(this._element,"touchmove.bs.carousel",(t=>n(t))),ts.on(this._element,"touchend.bs.carousel",(t=>i(t))))}_keydown(t){if(/input|textarea/i.test(t.target.tagName))return;const e=ys[t.key];e&&(t.preventDefault(),this._slide(e))}_getItemIndex(t){return this._items=t&&t.parentNode?hs.find(".carousel-item",t.parentNode):[],this._items.indexOf(t)}_getItemByOrder(t,e){const n=t===ms;return Fr(this._items,e,n,this._config.wrap)}_triggerSlideEvent(t,e){const n=this._getItemIndex(t),i=this._getItemIndex(hs.findOne(xs,this._element));return ts.trigger(this._element,"slide.bs.carousel",{relatedTarget:t,direction:e,from:i,to:n})}_setActiveIndicatorElement(t){if(this._indicatorsElement){const e=hs.findOne(".active",this._indicatorsElement);e.classList.remove(_s),e.removeAttribute("aria-current");const n=hs.find("[data-bs-target]",this._indicatorsElement);for(let e=0;e<n.length;e++)if(Number.parseInt(n[e].getAttribute("data-bs-slide-to"),10)===this._getItemIndex(t)){n[e].classList.add(_s),n[e].setAttribute("aria-current","true");break}}}_updateInterval(){const t=this._activeElement||hs.findOne(xs,this._element);if(!t)return;const e=Number.parseInt(t.getAttribute("data-bs-interval"),10);e?(this._config.defaultInterval=this._config.defaultInterval||this._config.interval,this._config.interval=e):this._config.interval=this._config.defaultInterval||this._config.interval}_slide(t,e){const n=this._directionToOrder(t),i=hs.findOne(xs,this._element),r=this._getItemIndex(i),s=e||this._getItemByOrder(n,i),o=this._getItemIndex(s),a=Boolean(this._interval),c=n===ms,u=c?"carousel-item-start":"carousel-item-end",l=c?"carousel-item-next":"carousel-item-prev",h=this._orderToDirection(n);if(s&&s.classList.contains(_s))return void(this._isSliding=!1);if(this._isSliding)return;if(this._triggerSlideEvent(s,h).defaultPrevented)return;if(!i||!s)return;this._isSliding=!0,a&&this.pause(),this._setActiveIndicatorElement(s),this._activeElement=s;const d=()=>{ts.trigger(this._element,ws,{relatedTarget:s,direction:h,from:r,to:o})};if(this._element.classList.contains("slide")){s.classList.add(l),Or(s),i.classList.add(u),s.classList.add(u);const t=()=>{s.classList.remove(u,l),s.classList.add(_s),i.classList.remove(_s,l,u),this._isSliding=!1,setTimeout(d,0)};this._queueCallback(t,i,!0)}else i.classList.remove(_s),s.classList.add(_s),this._isSliding=!1,d();a&&this.cycle()}_directionToOrder(t){return[bs,vs].includes(t)?Ir()?t===vs?gs:ms:t===vs?ms:gs:t}_orderToDirection(t){return[ms,gs].includes(t)?Ir()?t===gs?vs:bs:t===gs?bs:vs:t}static carouselInterface(t,e){const n=As.getOrCreateInstance(t,e);let{_config:i}=n;"object"==typeof e&&(i={...i,...e});const r="string"==typeof e?e:i.slide;if("number"==typeof e)n.to(e);else if("string"==typeof r){if(void 0===n[r])throw new TypeError(`No method named "${r}"`);n[r]()}else i.interval&&i.ride&&(n.pause(),n.cycle())}static jQueryInterface(t){return this.each((function(){As.carouselInterface(this,t)}))}static dataApiClickHandler(t){const e=xr(this);if(!e||!e.classList.contains("carousel"))return;const n={...ls.getDataAttributes(e),...ls.getDataAttributes(this)},i=this.getAttribute("data-bs-slide-to");i&&(n.interval=!1),As.carouselInterface(e,n),i&&As.getInstance(e).to(i),t.preventDefault()}}ts.on(document,"click.bs.carousel.data-api","[data-bs-slide], [data-bs-slide-to]",As.dataApiClickHandler),ts.on(window,"load.bs.carousel.data-api",(()=>{const t=hs.find('[data-bs-ride="carousel"]');for(let e=0,n=t.length;e<n;e++)As.carouselInterface(t[e],As.getInstance(t[e]))})),Nr(As);const Es="collapse",Cs="bs.collapse",Ts={toggle:!0,parent:null},Ss={toggle:"boolean",parent:"(null|element)"},ks="show",Rs="collapse",Ds="collapsing",Os="collapsed",Ls=":scope .collapse .collapse",Ps='[data-bs-toggle="collapse"]';class Is extends is{constructor(t,e){super(t),this._isTransitioning=!1,this._config=this._getConfig(e),this._triggerArray=[];const n=hs.find(Ps);for(let t=0,e=n.length;t<e;t++){const e=n[t],i=_r(e),r=hs.find(i).filter((t=>t===this._element));null!==i&&r.length&&(this._selector=i,this._triggerArray.push(e))}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return Ts}static get NAME(){return Es}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let t,e=[];if(this._config.parent){const t=hs.find(Ls,this._config.parent);e=hs.find(".collapse.show, .collapse.collapsing",this._config.parent).filter((e=>!t.includes(e)))}const n=hs.findOne(this._selector);if(e.length){const i=e.find((t=>n!==t));if(t=i?Is.getInstance(i):null,t&&t._isTransitioning)return}if(ts.trigger(this._element,"show.bs.collapse").defaultPrevented)return;e.forEach((e=>{n!==e&&Is.getOrCreateInstance(e,{toggle:!1}).hide(),t||ns.set(e,Cs,null)}));const i=this._getDimension();this._element.classList.remove(Rs),this._element.classList.add(Ds),this._element.style[i]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const r=`scroll${i[0].toUpperCase()+i.slice(1)}`;this._queueCallback((()=>{this._isTransitioning=!1,this._element.classList.remove(Ds),this._element.classList.add(Rs,ks),this._element.style[i]="",ts.trigger(this._element,"shown.bs.collapse")}),this._element,!0),this._element.style[i]=`${this._element[r]}px`}hide(){if(this._isTransitioning||!this._isShown())return;if(ts.trigger(this._element,"hide.bs.collapse").defaultPrevented)return;const t=this._getDimension();this._element.style[t]=`${this._element.getBoundingClientRect()[t]}px`,Or(this._element),this._element.classList.add(Ds),this._element.classList.remove(Rs,ks);const e=this._triggerArray.length;for(let t=0;t<e;t++){const e=this._triggerArray[t],n=xr(e);n&&!this._isShown(n)&&this._addAriaAndCollapsedClass([e],!1)}this._isTransitioning=!0;this._element.style[t]="",this._queueCallback((()=>{this._isTransitioning=!1,this._element.classList.remove(Ds),this._element.classList.add(Rs),ts.trigger(this._element,"hidden.bs.collapse")}),this._element,!0)}_isShown(t=this._element){return t.classList.contains(ks)}_getConfig(t){return(t={...Ts,...ls.getDataAttributes(this._element),...t}).toggle=Boolean(t.toggle),t.parent=Cr(t.parent),Tr(Es,t,Ss),t}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const t=hs.find(Ls,this._config.parent);hs.find(Ps,this._config.parent).filter((e=>!t.includes(e))).forEach((t=>{const e=xr(t);e&&this._addAriaAndCollapsedClass([t],this._isShown(e))}))}_addAriaAndCollapsedClass(t,e){t.length&&t.forEach((t=>{e?t.classList.remove(Os):t.classList.add(Os),t.setAttribute("aria-expanded",e)}))}static jQueryInterface(t){return this.each((function(){const e={};"string"==typeof t&&/show|hide/.test(t)&&(e.toggle=!1);const n=Is.getOrCreateInstance(this,e);if("string"==typeof t){if(void 0===n[t])throw new TypeError(`No method named "${t}"`);n[t]()}}))}}ts.on(document,"click.bs.collapse.data-api",Ps,(function(t){("A"===t.target.tagName||t.delegateTarget&&"A"===t.delegateTarget.tagName)&&t.preventDefault();const e=_r(this);hs.find(e).forEach((t=>{Is.getOrCreateInstance(t,{toggle:!1}).toggle()}))})),Nr(Is);const Ns="dropdown",Ms="Escape",Bs="Space",Fs="ArrowUp",Us="ArrowDown",Hs=new RegExp("ArrowUp|ArrowDown|Escape"),js="click.bs.dropdown.data-api",zs="keydown.bs.dropdown.data-api",Ks="show",Gs='[data-bs-toggle="dropdown"]',Ws=".dropdown-menu",qs=Ir()?"top-end":"top-start",Xs=Ir()?"top-start":"top-end",Vs=Ir()?"bottom-end":"bottom-start",Ys=Ir()?"bottom-start":"bottom-end",$s=Ir()?"left-start":"right-start",Qs=Ir()?"right-start":"left-start",Js={offset:[0,2],boundary:"clippingParents",reference:"toggle",display:"dynamic",popperConfig:null,autoClose:!0},Zs={offset:"(array|string|function)",boundary:"(string|element)",reference:"(string|element|object)",display:"string",popperConfig:"(null|object|function)",autoClose:"(boolean|string)"};class to extends is{constructor(t,e){super(t),this._popper=null,this._config=this._getConfig(e),this._menu=this._getMenuElement(),this._inNavbar=this._detectNavbar()}static get Default(){return Js}static get DefaultType(){return Zs}static get NAME(){return Ns}toggle(){return this._isShown()?this.hide():this.show()}show(){if(kr(this._element)||this._isShown(this._menu))return;const t={relatedTarget:this._element};if(ts.trigger(this._element,"show.bs.dropdown",t).defaultPrevented)return;const e=to.getParentFromElement(this._element);this._inNavbar?ls.setDataAttribute(this._menu,"popper","none"):this._createPopper(e),"ontouchstart"in document.documentElement&&!e.closest(".navbar-nav")&&[].concat(...document.body.children).forEach((t=>ts.on(t,"mouseover",Dr))),this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Ks),this._element.classList.add(Ks),ts.trigger(this._element,"shown.bs.dropdown",t)}hide(){if(kr(this._element)||!this._isShown(this._menu))return;const t={relatedTarget:this._element};this._completeHide(t)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(t){ts.trigger(this._element,"hide.bs.dropdown",t).defaultPrevented||("ontouchstart"in document.documentElement&&[].concat(...document.body.children).forEach((t=>ts.off(t,"mouseover",Dr))),this._popper&&this._popper.destroy(),this._menu.classList.remove(Ks),this._element.classList.remove(Ks),this._element.setAttribute("aria-expanded","false"),ls.removeDataAttribute(this._menu,"popper"),ts.trigger(this._element,"hidden.bs.dropdown",t))}_getConfig(t){if(t={...this.constructor.Default,...ls.getDataAttributes(this._element),...t},Tr(Ns,t,this.constructor.DefaultType),"object"==typeof t.reference&&!Er(t.reference)&&"function"!=typeof t.reference.getBoundingClientRect)throw new TypeError(`${Ns.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return t}_createPopper(t){if(void 0===e)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let n=this._element;"parent"===this._config.reference?n=t:Er(this._config.reference)?n=Cr(this._config.reference):"object"==typeof this._config.reference&&(n=this._config.reference);const i=this._getPopperConfig(),r=i.modifiers.find((t=>"applyStyles"===t.name&&!1===t.enabled));this._popper=vr(n,this._menu,i),r&&ls.setDataAttribute(this._menu,"popper","static")}_isShown(t=this._element){return t.classList.contains(Ks)}_getMenuElement(){return hs.next(this._element,Ws)[0]}_getPlacement(){const t=this._element.parentNode;if(t.classList.contains("dropend"))return $s;if(t.classList.contains("dropstart"))return Qs;const e="end"===getComputedStyle(this._menu).getPropertyValue("--bs-position").trim();return t.classList.contains("dropup")?e?Xs:qs:e?Ys:Vs}_detectNavbar(){return null!==this._element.closest(".navbar")}_getOffset(){const{offset:t}=this._config;return"string"==typeof t?t.split(",").map((t=>Number.parseInt(t,10))):"function"==typeof t?e=>t(e,this._element):t}_getPopperConfig(){const t={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return"static"===this._config.display&&(t.modifiers=[{name:"applyStyles",enabled:!1}]),{...t,..."function"==typeof this._config.popperConfig?this._config.popperConfig(t):this._config.popperConfig}}_selectMenuItem({key:t,target:e}){const n=hs.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter(Sr);n.length&&Fr(n,e,t===Us,!n.includes(e)).focus()}static jQueryInterface(t){return this.each((function(){const e=to.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t])throw new TypeError(`No method named "${t}"`);e[t]()}}))}static clearMenus(t){if(t&&(2===t.button||"keyup"===t.type&&"Tab"!==t.key))return;const e=hs.find(Gs);for(let n=0,i=e.length;n<i;n++){const i=to.getInstance(e[n]);if(!i||!1===i._config.autoClose)continue;if(!i._isShown())continue;const r={relatedTarget:i._element};if(t){const e=t.composedPath(),n=e.includes(i._menu);if(e.includes(i._element)||"inside"===i._config.autoClose&&!n||"outside"===i._config.autoClose&&n)continue;if(i._menu.contains(t.target)&&("keyup"===t.type&&"Tab"===t.key||/input|select|option|textarea|form/i.test(t.target.tagName)))continue;"click"===t.type&&(r.clickEvent=t)}i._completeHide(r)}}static getParentFromElement(t){return xr(t)||t.parentNode}static dataApiKeydownHandler(t){if(/input|textarea/i.test(t.target.tagName)?t.key===Bs||t.key!==Ms&&(t.key!==Us&&t.key!==Fs||t.target.closest(Ws)):!Hs.test(t.key))return;const e=this.classList.contains(Ks);if(!e&&t.key===Ms)return;if(t.preventDefault(),t.stopPropagation(),kr(this))return;const n=this.matches(Gs)?this:hs.prev(this,Gs)[0],i=to.getOrCreateInstance(n);if(t.key!==Ms)return t.key===Fs||t.key===Us?(e||i.show(),void i._selectMenuItem(t)):void(e&&t.key!==Bs||to.clearMenus());i.hide()}}ts.on(document,zs,Gs,to.dataApiKeydownHandler),ts.on(document,zs,Ws,to.dataApiKeydownHandler),ts.on(document,js,to.clearMenus),ts.on(document,"keyup.bs.dropdown.data-api",to.clearMenus),ts.on(document,js,Gs,(function(t){t.preventDefault(),to.getOrCreateInstance(this).toggle()})),Nr(to);const eo=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",no=".sticky-top";class io{constructor(){this._element=document.body}getWidth(){const t=document.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}hide(){const t=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,"paddingRight",(e=>e+t)),this._setElementAttributes(eo,"paddingRight",(e=>e+t)),this._setElementAttributes(no,"marginRight",(e=>e-t))}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(t,e,n){const i=this.getWidth();this._applyManipulationCallback(t,(t=>{if(t!==this._element&&window.innerWidth>t.clientWidth+i)return;this._saveInitialAttribute(t,e);const r=window.getComputedStyle(t)[e];t.style[e]=`${n(Number.parseFloat(r))}px`}))}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,"paddingRight"),this._resetElementAttributes(eo,"paddingRight"),this._resetElementAttributes(no,"marginRight")}_saveInitialAttribute(t,e){const n=t.style[e];n&&ls.setDataAttribute(t,e,n)}_resetElementAttributes(t,e){this._applyManipulationCallback(t,(t=>{const n=ls.getDataAttribute(t,e);void 0===n?t.style.removeProperty(e):(ls.removeDataAttribute(t,e),t.style[e]=n)}))}_applyManipulationCallback(t,e){Er(t)?e(t):hs.find(t,this._element).forEach(e)}isOverflowing(){return this.getWidth()>0}}const ro={className:"modal-backdrop",isVisible:!0,isAnimated:!1,rootElement:"body",clickCallback:null},so={className:"string",isVisible:"boolean",isAnimated:"boolean",rootElement:"(element|string)",clickCallback:"(function|null)"},oo="backdrop",ao="show",co="mousedown.bs.backdrop";class uo{constructor(t){this._config=this._getConfig(t),this._isAppended=!1,this._element=null}show(t){this._config.isVisible?(this._append(),this._config.isAnimated&&Or(this._getElement()),this._getElement().classList.add(ao),this._emulateAnimation((()=>{Mr(t)}))):Mr(t)}hide(t){this._config.isVisible?(this._getElement().classList.remove(ao),this._emulateAnimation((()=>{this.dispose(),Mr(t)}))):Mr(t)}_getElement(){if(!this._element){const t=document.createElement("div");t.className=this._config.className,this._config.isAnimated&&t.classList.add("fade"),this._element=t}return this._element}_getConfig(t){return(t={...ro,..."object"==typeof t?t:{}}).rootElement=Cr(t.rootElement),Tr(oo,t,so),t}_append(){this._isAppended||(this._config.rootElement.append(this._getElement()),ts.on(this._getElement(),co,(()=>{Mr(this._config.clickCallback)})),this._isAppended=!0)}dispose(){this._isAppended&&(ts.off(this._element,co),this._element.remove(),this._isAppended=!1)}_emulateAnimation(t){Br(t,this._getElement(),this._config.isAnimated)}}const lo={trapElement:null,autofocus:!0},ho={trapElement:"element",autofocus:"boolean"},po=".bs.focustrap",fo="backward";class mo{constructor(t){this._config=this._getConfig(t),this._isActive=!1,this._lastTabNavDirection=null}activate(){const{trapElement:t,autofocus:e}=this._config;this._isActive||(e&&t.focus(),ts.off(document,po),ts.on(document,"focusin.bs.focustrap",(t=>this._handleFocusin(t))),ts.on(document,"keydown.tab.bs.focustrap",(t=>this._handleKeydown(t))),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,ts.off(document,po))}_handleFocusin(t){const{target:e}=t,{trapElement:n}=this._config;if(e===document||e===n||n.contains(e))return;const i=hs.focusableChildren(n);0===i.length?n.focus():this._lastTabNavDirection===fo?i[i.length-1].focus():i[0].focus()}_handleKeydown(t){"Tab"===t.key&&(this._lastTabNavDirection=t.shiftKey?fo:"forward")}_getConfig(t){return t={...lo,..."object"==typeof t?t:{}},Tr("focustrap",t,ho),t}}const go="modal",vo=".bs.modal",bo="Escape",yo={backdrop:!0,keyboard:!0,focus:!0},wo={backdrop:"(boolean|string)",keyboard:"boolean",focus:"boolean"},_o="hidden.bs.modal",xo="show.bs.modal",Ao="resize.bs.modal",Eo="click.dismiss.bs.modal",Co="keydown.dismiss.bs.modal",To="mousedown.dismiss.bs.modal",So="modal-open",ko="show",Ro="modal-static";class Do extends is{constructor(t,e){super(t),this._config=this._getConfig(e),this._dialog=hs.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._ignoreBackdropClick=!1,this._isTransitioning=!1,this._scrollBar=new io}static get Default(){return yo}static get NAME(){return go}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){if(this._isShown||this._isTransitioning)return;ts.trigger(this._element,xo,{relatedTarget:t}).defaultPrevented||(this._isShown=!0,this._isAnimated()&&(this._isTransitioning=!0),this._scrollBar.hide(),document.body.classList.add(So),this._adjustDialog(),this._setEscapeEvent(),this._setResizeEvent(),ts.on(this._dialog,To,(()=>{ts.one(this._element,"mouseup.dismiss.bs.modal",(t=>{t.target===this._element&&(this._ignoreBackdropClick=!0)}))})),this._showBackdrop((()=>this._showElement(t))))}hide(){if(!this._isShown||this._isTransitioning)return;if(ts.trigger(this._element,"hide.bs.modal").defaultPrevented)return;this._isShown=!1;const t=this._isAnimated();t&&(this._isTransitioning=!0),this._setEscapeEvent(),this._setResizeEvent(),this._focustrap.deactivate(),this._element.classList.remove(ko),ts.off(this._element,Eo),ts.off(this._dialog,To),this._queueCallback((()=>this._hideModal()),this._element,t)}dispose(){[window,this._dialog].forEach((t=>ts.off(t,vo))),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new uo({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new mo({trapElement:this._element})}_getConfig(t){return t={...yo,...ls.getDataAttributes(this._element),..."object"==typeof t?t:{}},Tr(go,t,wo),t}_showElement(t){const e=this._isAnimated(),n=hs.findOne(".modal-body",this._dialog);this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0,n&&(n.scrollTop=0),e&&Or(this._element),this._element.classList.add(ko);this._queueCallback((()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,ts.trigger(this._element,"shown.bs.modal",{relatedTarget:t})}),this._dialog,e)}_setEscapeEvent(){this._isShown?ts.on(this._element,Co,(t=>{this._config.keyboard&&t.key===bo?(t.preventDefault(),this.hide()):this._config.keyboard||t.key!==bo||this._triggerBackdropTransition()})):ts.off(this._element,Co)}_setResizeEvent(){this._isShown?ts.on(window,Ao,(()=>this._adjustDialog())):ts.off(window,Ao)}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide((()=>{document.body.classList.remove(So),this._resetAdjustments(),this._scrollBar.reset(),ts.trigger(this._element,_o)}))}_showBackdrop(t){ts.on(this._element,Eo,(t=>{this._ignoreBackdropClick?this._ignoreBackdropClick=!1:t.target===t.currentTarget&&(!0===this._config.backdrop?this.hide():"static"===this._config.backdrop&&this._triggerBackdropTransition())})),this._backdrop.show(t)}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(ts.trigger(this._element,"hidePrevented.bs.modal").defaultPrevented)return;const{classList:t,scrollHeight:e,style:n}=this._element,i=e>document.documentElement.clientHeight;!i&&"hidden"===n.overflowY||t.contains(Ro)||(i||(n.overflowY="hidden"),t.add(Ro),this._queueCallback((()=>{t.remove(Ro),i||this._queueCallback((()=>{n.overflowY=""}),this._dialog)}),this._dialog),this._element.focus())}_adjustDialog(){const t=this._element.scrollHeight>document.documentElement.clientHeight,e=this._scrollBar.getWidth(),n=e>0;(!n&&t&&!Ir()||n&&!t&&Ir())&&(this._element.style.paddingLeft=`${e}px`),(n&&!t&&!Ir()||!n&&t&&Ir())&&(this._element.style.paddingRight=`${e}px`)}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(t,e){return this.each((function(){const n=Do.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===n[t])throw new TypeError(`No method named "${t}"`);n[t](e)}}))}}ts.on(document,"click.bs.modal.data-api",'[data-bs-toggle="modal"]',(function(t){const e=xr(this);["A","AREA"].includes(this.tagName)&&t.preventDefault(),ts.one(e,xo,(t=>{t.defaultPrevented||ts.one(e,_o,(()=>{Sr(this)&&this.focus()}))}));const n=hs.findOne(".modal.show");n&&Do.getInstance(n).hide();Do.getOrCreateInstance(e).toggle(this)})),rs(Do),Nr(Do);const Oo="offcanvas",Lo={backdrop:!0,keyboard:!0,scroll:!1},Po={backdrop:"boolean",keyboard:"boolean",scroll:"boolean"},Io="show",No=".offcanvas.show",Mo="hidden.bs.offcanvas";class Bo extends is{constructor(t,e){super(t),this._config=this._getConfig(e),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get NAME(){return Oo}static get Default(){return Lo}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){if(this._isShown)return;if(ts.trigger(this._element,"show.bs.offcanvas",{relatedTarget:t}).defaultPrevented)return;this._isShown=!0,this._element.style.visibility="visible",this._backdrop.show(),this._config.scroll||(new io).hide(),this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(Io);this._queueCallback((()=>{this._config.scroll||this._focustrap.activate(),ts.trigger(this._element,"shown.bs.offcanvas",{relatedTarget:t})}),this._element,!0)}hide(){if(!this._isShown)return;if(ts.trigger(this._element,"hide.bs.offcanvas").defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.remove(Io),this._backdrop.hide();this._queueCallback((()=>{this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._element.style.visibility="hidden",this._config.scroll||(new io).reset(),ts.trigger(this._element,Mo)}),this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_getConfig(t){return t={...Lo,...ls.getDataAttributes(this._element),..."object"==typeof t?t:{}},Tr(Oo,t,Po),t}_initializeBackDrop(){return new uo({className:"offcanvas-backdrop",isVisible:this._config.backdrop,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:()=>this.hide()})}_initializeFocusTrap(){return new mo({trapElement:this._element})}_addEventListeners(){ts.on(this._element,"keydown.dismiss.bs.offcanvas",(t=>{this._config.keyboard&&"Escape"===t.key&&this.hide()}))}static jQueryInterface(t){return this.each((function(){const e=Bo.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);e[t](this)}}))}}ts.on(document,"click.bs.offcanvas.data-api",'[data-bs-toggle="offcanvas"]',(function(t){const e=xr(this);if(["A","AREA"].includes(this.tagName)&&t.preventDefault(),kr(this))return;ts.one(e,Mo,(()=>{Sr(this)&&this.focus()}));const n=hs.findOne(No);n&&n!==e&&Bo.getInstance(n).hide();Bo.getOrCreateInstance(e).toggle(this)})),ts.on(window,"load.bs.offcanvas.data-api",(()=>hs.find(No).forEach((t=>Bo.getOrCreateInstance(t).show())))),rs(Bo),Nr(Bo);const Fo=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),Uo=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^#&/:?]*(?:[#/?]|$))/i,Ho=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[\d+/a-z]+=*$/i,jo=(t,e)=>{const n=t.nodeName.toLowerCase();if(e.includes(n))return!Fo.has(n)||Boolean(Uo.test(t.nodeValue)||Ho.test(t.nodeValue));const i=e.filter((t=>t instanceof RegExp));for(let t=0,e=i.length;t<e;t++)if(i[t].test(n))return!0;return!1},zo={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]};function Ko(t,e,n){if(!t.length)return t;if(n&&"function"==typeof n)return n(t);const i=(new window.DOMParser).parseFromString(t,"text/html"),r=[].concat(...i.body.querySelectorAll("*"));for(let t=0,n=r.length;t<n;t++){const n=r[t],i=n.nodeName.toLowerCase();if(!Object.keys(e).includes(i)){n.remove();continue}const s=[].concat(...n.attributes),o=[].concat(e["*"]||[],e[i]||[]);s.forEach((t=>{jo(t,o)||n.removeAttribute(t.nodeName)}))}return i.body.innerHTML}const Go="tooltip",Wo=new Set(["sanitize","allowList","sanitizeFn"]),qo={animation:"boolean",template:"string",title:"(string|element|function)",trigger:"string",delay:"(number|object)",html:"boolean",selector:"(string|boolean)",placement:"(string|function)",offset:"(array|string|function)",container:"(string|element|boolean)",fallbackPlacements:"array",boundary:"(string|element)",customClass:"(string|function)",sanitize:"boolean",sanitizeFn:"(null|function)",allowList:"object",popperConfig:"(null|object|function)"},Xo={AUTO:"auto",TOP:"top",RIGHT:Ir()?"left":"right",BOTTOM:"bottom",LEFT:Ir()?"right":"left"},Vo={animation:!0,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,selector:!1,placement:"top",offset:[0,0],container:!1,fallbackPlacements:["top","right","bottom","left"],boundary:"clippingParents",customClass:"",sanitize:!0,sanitizeFn:null,allowList:zo,popperConfig:null},Yo={HIDE:"hide.bs.tooltip",HIDDEN:"hidden.bs.tooltip",SHOW:"show.bs.tooltip",SHOWN:"shown.bs.tooltip",INSERTED:"inserted.bs.tooltip",CLICK:"click.bs.tooltip",FOCUSIN:"focusin.bs.tooltip",FOCUSOUT:"focusout.bs.tooltip",MOUSEENTER:"mouseenter.bs.tooltip",MOUSELEAVE:"mouseleave.bs.tooltip"},$o="fade",Qo="show",Jo="show",Zo="out",ta=".tooltip-inner",ea=".modal",na="hide.bs.modal",ia="hover",ra="focus";class sa extends is{constructor(t,n){if(void 0===e)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(t),this._isEnabled=!0,this._timeout=0,this._hoverState="",this._activeTrigger={},this._popper=null,this._config=this._getConfig(n),this.tip=null,this._setListeners()}static get Default(){return Vo}static get NAME(){return Go}static get Event(){return Yo}static get DefaultType(){return qo}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(t){if(this._isEnabled)if(t){const e=this._initializeOnDelegatedTarget(t);e._activeTrigger.click=!e._activeTrigger.click,e._isWithActiveTrigger()?e._enter(null,e):e._leave(null,e)}else{if(this.getTipElement().classList.contains(Qo))return void this._leave(null,this);this._enter(null,this)}}dispose(){clearTimeout(this._timeout),ts.off(this._element.closest(ea),na,this._hideModalHandler),this.tip&&this.tip.remove(),this._disposePopper(),super.dispose()}show(){if("none"===this._element.style.display)throw new Error("Please use show on visible elements");if(!this.isWithContent()||!this._isEnabled)return;const t=ts.trigger(this._element,this.constructor.Event.SHOW),e=Rr(this._element),n=null===e?this._element.ownerDocument.documentElement.contains(this._element):e.contains(this._element);if(t.defaultPrevented||!n)return;"tooltip"===this.constructor.NAME&&this.tip&&this.getTitle()!==this.tip.querySelector(ta).innerHTML&&(this._disposePopper(),this.tip.remove(),this.tip=null);const i=this.getTipElement(),r=(t=>{do{t+=Math.floor(1e6*Math.random())}while(document.getElementById(t));return t})(this.constructor.NAME);i.setAttribute("id",r),this._element.setAttribute("aria-describedby",r),this._config.animation&&i.classList.add($o);const s="function"==typeof this._config.placement?this._config.placement.call(this,i,this._element):this._config.placement,o=this._getAttachment(s);this._addAttachmentClass(o);const{container:a}=this._config;ns.set(i,this.constructor.DATA_KEY,this),this._element.ownerDocument.documentElement.contains(this.tip)||(a.append(i),ts.trigger(this._element,this.constructor.Event.INSERTED)),this._popper?this._popper.update():this._popper=vr(this._element,i,this._getPopperConfig(o)),i.classList.add(Qo);const c=this._resolvePossibleFunction(this._config.customClass);c&&i.classList.add(...c.split(" ")),"ontouchstart"in document.documentElement&&[].concat(...document.body.children).forEach((t=>{ts.on(t,"mouseover",Dr)}));const u=this.tip.classList.contains($o);this._queueCallback((()=>{const t=this._hoverState;this._hoverState=null,ts.trigger(this._element,this.constructor.Event.SHOWN),t===Zo&&this._leave(null,this)}),this.tip,u)}hide(){if(!this._popper)return;const t=this.getTipElement();if(ts.trigger(this._element,this.constructor.Event.HIDE).defaultPrevented)return;t.classList.remove(Qo),"ontouchstart"in document.documentElement&&[].concat(...document.body.children).forEach((t=>ts.off(t,"mouseover",Dr))),this._activeTrigger.click=!1,this._activeTrigger.focus=!1,this._activeTrigger.hover=!1;const e=this.tip.classList.contains($o);this._queueCallback((()=>{this._isWithActiveTrigger()||(this._hoverState!==Jo&&t.remove(),this._cleanTipClass(),this._element.removeAttribute("aria-describedby"),ts.trigger(this._element,this.constructor.Event.HIDDEN),this._disposePopper())}),this.tip,e),this._hoverState=""}update(){null!==this._popper&&this._popper.update()}isWithContent(){return Boolean(this.getTitle())}getTipElement(){if(this.tip)return this.tip;const t=document.createElement("div");t.innerHTML=this._config.template;const e=t.children[0];return this.setContent(e),e.classList.remove($o,Qo),this.tip=e,this.tip}setContent(t){this._sanitizeAndSetContent(t,this.getTitle(),ta)}_sanitizeAndSetContent(t,e,n){const i=hs.findOne(n,t);e||!i?this.setElementContent(i,e):i.remove()}setElementContent(t,e){if(null!==t)return Er(e)?(e=Cr(e),void(this._config.html?e.parentNode!==t&&(t.innerHTML="",t.append(e)):t.textContent=e.textContent)):void(this._config.html?(this._config.sanitize&&(e=Ko(e,this._config.allowList,this._config.sanitizeFn)),t.innerHTML=e):t.textContent=e)}getTitle(){const t=this._element.getAttribute("data-bs-original-title")||this._config.title;return this._resolvePossibleFunction(t)}updateAttachment(t){return"right"===t?"end":"left"===t?"start":t}_initializeOnDelegatedTarget(t,e){return e||this.constructor.getOrCreateInstance(t.delegateTarget,this._getDelegateConfig())}_getOffset(){const{offset:t}=this._config;return"string"==typeof t?t.split(",").map((t=>Number.parseInt(t,10))):"function"==typeof t?e=>t(e,this._element):t}_resolvePossibleFunction(t){return"function"==typeof t?t.call(this._element):t}_getPopperConfig(t){const e={placement:t,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"onChange",enabled:!0,phase:"afterWrite",fn:t=>this._handlePopperPlacementChange(t)}],onFirstUpdate:t=>{t.options.placement!==t.placement&&this._handlePopperPlacementChange(t)}};return{...e,..."function"==typeof this._config.popperConfig?this._config.popperConfig(e):this._config.popperConfig}}_addAttachmentClass(t){this.getTipElement().classList.add(`${this._getBasicClassPrefix()}-${this.updateAttachment(t)}`)}_getAttachment(t){return Xo[t.toUpperCase()]}_setListeners(){this._config.trigger.split(" ").forEach((t=>{if("click"===t)ts.on(this._element,this.constructor.Event.CLICK,this._config.selector,(t=>this.toggle(t)));else if("manual"!==t){const e=t===ia?this.constructor.Event.MOUSEENTER:this.constructor.Event.FOCUSIN,n=t===ia?this.constructor.Event.MOUSELEAVE:this.constructor.Event.FOCUSOUT;ts.on(this._element,e,this._config.selector,(t=>this._enter(t))),ts.on(this._element,n,this._config.selector,(t=>this._leave(t)))}})),this._hideModalHandler=()=>{this._element&&this.hide()},ts.on(this._element.closest(ea),na,this._hideModalHandler),this._config.selector?this._config={...this._config,trigger:"manual",selector:""}:this._fixTitle()}_fixTitle(){const t=this._element.getAttribute("title"),e=typeof this._element.getAttribute("data-bs-original-title");(t||"string"!==e)&&(this._element.setAttribute("data-bs-original-title",t||""),!t||this._element.getAttribute("aria-label")||this._element.textContent||this._element.setAttribute("aria-label",t),this._element.setAttribute("title",""))}_enter(t,e){e=this._initializeOnDelegatedTarget(t,e),t&&(e._activeTrigger["focusin"===t.type?ra:ia]=!0),e.getTipElement().classList.contains(Qo)||e._hoverState===Jo?e._hoverState=Jo:(clearTimeout(e._timeout),e._hoverState=Jo,e._config.delay&&e._config.delay.show?e._timeout=setTimeout((()=>{e._hoverState===Jo&&e.show()}),e._config.delay.show):e.show())}_leave(t,e){e=this._initializeOnDelegatedTarget(t,e),t&&(e._activeTrigger["focusout"===t.type?ra:ia]=e._element.contains(t.relatedTarget)),e._isWithActiveTrigger()||(clearTimeout(e._timeout),e._hoverState=Zo,e._config.delay&&e._config.delay.hide?e._timeout=setTimeout((()=>{e._hoverState===Zo&&e.hide()}),e._config.delay.hide):e.hide())}_isWithActiveTrigger(){for(const t in this._activeTrigger)if(this._activeTrigger[t])return!0;return!1}_getConfig(t){const e=ls.getDataAttributes(this._element);return Object.keys(e).forEach((t=>{Wo.has(t)&&delete e[t]})),(t={...this.constructor.Default,...e,..."object"==typeof t&&t?t:{}}).container=!1===t.container?document.body:Cr(t.container),"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),"number"==typeof t.title&&(t.title=t.title.toString()),"number"==typeof t.content&&(t.content=t.content.toString()),Tr(Go,t,this.constructor.DefaultType),t.sanitize&&(t.template=Ko(t.template,t.allowList,t.sanitizeFn)),t}_getDelegateConfig(){const t={};for(const e in this._config)this.constructor.Default[e]!==this._config[e]&&(t[e]=this._config[e]);return t}_cleanTipClass(){const t=this.getTipElement(),e=new RegExp(`(^|\\s)${this._getBasicClassPrefix()}\\S+`,"g"),n=t.getAttribute("class").match(e);null!==n&&n.length>0&&n.map((t=>t.trim())).forEach((e=>t.classList.remove(e)))}_getBasicClassPrefix(){return"bs-tooltip"}_handlePopperPlacementChange(t){const{state:e}=t;e&&(this.tip=e.elements.popper,this._cleanTipClass(),this._addAttachmentClass(this._getAttachment(e.placement)))}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null)}static jQueryInterface(t){return this.each((function(){const e=sa.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t])throw new TypeError(`No method named "${t}"`);e[t]()}}))}}Nr(sa);const oa={...sa.Default,placement:"right",offset:[0,8],trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>'},aa={...sa.DefaultType,content:"(string|element|function)"},ca={HIDE:"hide.bs.popover",HIDDEN:"hidden.bs.popover",SHOW:"show.bs.popover",SHOWN:"shown.bs.popover",INSERTED:"inserted.bs.popover",CLICK:"click.bs.popover",FOCUSIN:"focusin.bs.popover",FOCUSOUT:"focusout.bs.popover",MOUSEENTER:"mouseenter.bs.popover",MOUSELEAVE:"mouseleave.bs.popover"};class ua extends sa{static get Default(){return oa}static get NAME(){return"popover"}static get Event(){return ca}static get DefaultType(){return aa}isWithContent(){return this.getTitle()||this._getContent()}setContent(t){this._sanitizeAndSetContent(t,this.getTitle(),".popover-header"),this._sanitizeAndSetContent(t,this._getContent(),".popover-body")}_getContent(){return this._resolvePossibleFunction(this._config.content)}_getBasicClassPrefix(){return"bs-popover"}static jQueryInterface(t){return this.each((function(){const e=ua.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t])throw new TypeError(`No method named "${t}"`);e[t]()}}))}}Nr(ua);const la="scrollspy",ha=".bs.scrollspy",da={offset:10,method:"auto",target:""},pa={offset:"number",method:"string",target:"(string|element)"},fa="dropdown-item",ma="active",va=".nav-link",ba=".nav-link, .list-group-item, .dropdown-item",ya="position";class wa extends is{constructor(t,e){super(t),this._scrollElement="BODY"===this._element.tagName?window:this._element,this._config=this._getConfig(e),this._offsets=[],this._targets=[],this._activeTarget=null,this._scrollHeight=0,ts.on(this._scrollElement,"scroll.bs.scrollspy",(()=>this._process())),this.refresh(),this._process()}static get Default(){return da}static get NAME(){return la}refresh(){const t=this._scrollElement===this._scrollElement.window?"offset":ya,e="auto"===this._config.method?t:this._config.method,n=e===ya?this._getScrollTop():0;this._offsets=[],this._targets=[],this._scrollHeight=this._getScrollHeight();hs.find(ba,this._config.target).map((t=>{const i=_r(t),r=i?hs.findOne(i):null;if(r){const t=r.getBoundingClientRect();if(t.width||t.height)return[ls[e](r).top+n,i]}return null})).filter((t=>t)).sort(((t,e)=>t[0]-e[0])).forEach((t=>{this._offsets.push(t[0]),this._targets.push(t[1])}))}dispose(){ts.off(this._scrollElement,ha),super.dispose()}_getConfig(t){return(t={...da,...ls.getDataAttributes(this._element),..."object"==typeof t&&t?t:{}}).target=Cr(t.target)||document.documentElement,Tr(la,t,pa),t}_getScrollTop(){return this._scrollElement===window?this._scrollElement.pageYOffset:this._scrollElement.scrollTop}_getScrollHeight(){return this._scrollElement.scrollHeight||Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)}_getOffsetHeight(){return this._scrollElement===window?window.innerHeight:this._scrollElement.getBoundingClientRect().height}_process(){const t=this._getScrollTop()+this._config.offset,e=this._getScrollHeight(),n=this._config.offset+e-this._getOffsetHeight();if(this._scrollHeight!==e&&this.refresh(),t>=n){const t=this._targets[this._targets.length-1];this._activeTarget!==t&&this._activate(t)}else{if(this._activeTarget&&t<this._offsets[0]&&this._offsets[0]>0)return this._activeTarget=null,void this._clear();for(let e=this._offsets.length;e--;){this._activeTarget!==this._targets[e]&&t>=this._offsets[e]&&(void 0===this._offsets[e+1]||t<this._offsets[e+1])&&this._activate(this._targets[e])}}}_activate(t){this._activeTarget=t,this._clear();const e=ba.split(",").map((e=>`${e}[data-bs-target="${t}"],${e}[href="${t}"]`)),n=hs.findOne(e.join(","),this._config.target);n.classList.add(ma),n.classList.contains(fa)?hs.findOne(".dropdown-toggle",n.closest(".dropdown")).classList.add(ma):hs.parents(n,".nav, .list-group").forEach((t=>{hs.prev(t,".nav-link, .list-group-item").forEach((t=>t.classList.add(ma))),hs.prev(t,".nav-item").forEach((t=>{hs.children(t,va).forEach((t=>t.classList.add(ma)))}))})),ts.trigger(this._scrollElement,"activate.bs.scrollspy",{relatedTarget:t})}_clear(){hs.find(ba,this._config.target).filter((t=>t.classList.contains(ma))).forEach((t=>t.classList.remove(ma)))}static jQueryInterface(t){return this.each((function(){const e=wa.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t])throw new TypeError(`No method named "${t}"`);e[t]()}}))}}ts.on(window,"load.bs.scrollspy.data-api",(()=>{hs.find('[data-bs-spy="scroll"]').forEach((t=>new wa(t)))})),Nr(wa);const _a="active",xa="fade",Aa="show",Ea=".active",Ca=":scope > li > .active";class Ta extends is{static get NAME(){return"tab"}show(){if(this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE&&this._element.classList.contains(_a))return;let t;const e=xr(this._element),n=this._element.closest(".nav, .list-group");if(n){const e="UL"===n.nodeName||"OL"===n.nodeName?Ca:Ea;t=hs.find(e,n),t=t[t.length-1]}const i=t?ts.trigger(t,"hide.bs.tab",{relatedTarget:this._element}):null;if(ts.trigger(this._element,"show.bs.tab",{relatedTarget:t}).defaultPrevented||null!==i&&i.defaultPrevented)return;this._activate(this._element,n);const r=()=>{ts.trigger(t,"hidden.bs.tab",{relatedTarget:this._element}),ts.trigger(this._element,"shown.bs.tab",{relatedTarget:t})};e?this._activate(e,e.parentNode,r):r()}_activate(t,e,n){const i=(!e||"UL"!==e.nodeName&&"OL"!==e.nodeName?hs.children(e,Ea):hs.find(Ca,e))[0],r=n&&i&&i.classList.contains(xa),s=()=>this._transitionComplete(t,i,n);i&&r?(i.classList.remove(Aa),this._queueCallback(s,t,!0)):s()}_transitionComplete(t,e,n){if(e){e.classList.remove(_a);const t=hs.findOne(":scope > .dropdown-menu .active",e.parentNode);t&&t.classList.remove(_a),"tab"===e.getAttribute("role")&&e.setAttribute("aria-selected",!1)}t.classList.add(_a),"tab"===t.getAttribute("role")&&t.setAttribute("aria-selected",!0),Or(t),t.classList.contains(xa)&&t.classList.add(Aa);let i=t.parentNode;if(i&&"LI"===i.nodeName&&(i=i.parentNode),i&&i.classList.contains("dropdown-menu")){const e=t.closest(".dropdown");e&&hs.find(".dropdown-toggle",e).forEach((t=>t.classList.add(_a))),t.setAttribute("aria-expanded",!0)}n&&n()}static jQueryInterface(t){return this.each((function(){const e=Ta.getOrCreateInstance(this);if("string"==typeof t){if(void 0===e[t])throw new TypeError(`No method named "${t}"`);e[t]()}}))}}ts.on(document,"click.bs.tab.data-api",'[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',(function(t){if(["A","AREA"].includes(this.tagName)&&t.preventDefault(),kr(this))return;Ta.getOrCreateInstance(this).show()})),Nr(Ta);const Sa="toast",ka="hide",Ra="show",Da="showing",Oa={animation:"boolean",autohide:"boolean",delay:"number"},La={animation:!0,autohide:!0,delay:5e3};class Pa extends is{constructor(t,e){super(t),this._config=this._getConfig(e),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get DefaultType(){return Oa}static get Default(){return La}static get NAME(){return Sa}show(){if(ts.trigger(this._element,"show.bs.toast").defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add("fade");this._element.classList.remove(ka),Or(this._element),this._element.classList.add(Ra),this._element.classList.add(Da),this._queueCallback((()=>{this._element.classList.remove(Da),ts.trigger(this._element,"shown.bs.toast"),this._maybeScheduleHide()}),this._element,this._config.animation)}hide(){if(!this._element.classList.contains(Ra))return;if(ts.trigger(this._element,"hide.bs.toast").defaultPrevented)return;this._element.classList.add(Da),this._queueCallback((()=>{this._element.classList.add(ka),this._element.classList.remove(Da),this._element.classList.remove(Ra),ts.trigger(this._element,"hidden.bs.toast")}),this._element,this._config.animation)}dispose(){this._clearTimeout(),this._element.classList.contains(Ra)&&this._element.classList.remove(Ra),super.dispose()}_getConfig(t){return t={...La,...ls.getDataAttributes(this._element),..."object"==typeof t&&t?t:{}},Tr(Sa,t,this.constructor.DefaultType),t}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout((()=>{this.hide()}),this._config.delay)))}_onInteraction(t,e){switch(t.type){case"mouseover":case"mouseout":this._hasMouseInteraction=e;break;case"focusin":case"focusout":this._hasKeyboardInteraction=e}if(e)return void this._clearTimeout();const n=t.relatedTarget;this._element===n||this._element.contains(n)||this._maybeScheduleHide()}_setListeners(){ts.on(this._element,"mouseover.bs.toast",(t=>this._onInteraction(t,!0))),ts.on(this._element,"mouseout.bs.toast",(t=>this._onInteraction(t,!1))),ts.on(this._element,"focusin.bs.toast",(t=>this._onInteraction(t,!0))),ts.on(this._element,"focusout.bs.toast",(t=>this._onInteraction(t,!1)))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(t){return this.each((function(){const e=Pa.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t])throw new TypeError(`No method named "${t}"`);e[t](this)}}))}}var Ia;function Na(){this.getInt=function(t,e){switch(e){case 4:return(255&this.data[t+3])<<24|(255&this.data[t+2])<<16|(255&this.data[t+1])<<8|255&this.data[t+0];case 2:return(255&this.data[t+1])<<8|255&this.data[t+0];default:return 255&this.data[t]}},this.getDOSDate=function(t,e){return new Date(1980+(t>>>9&127),(t>>>5&15)-1,31&t,e>>>11&31,e>>>5&63,2*(31&e))},this.stringOf=function(t,e){for(var n="";t!=e;)n+=String.fromCharCode(this.data[t++]);return n},this.open=function(t){if(this.data=t,this.files=[],this.data.length<22)return{status:!1,error:"Invalid data"};for(var e=this.data.length-22;e>=0&&101010256!=this.getInt(e,4);)--e;if(e<0)return{status:!1,error:"Invalid data"};if(0!==this.getInt(e+4,2)||0!==this.getInt(e+6,2))return{status:!1,error:"No multidisk support"};var n=this.getInt(e+8,2),i=this.getInt(e+16,4),r=this.getInt(e+20,2);this.comment=this.stringOf(e+22,e+22+r);for(var s=i,o=0;o<n;++o){if(33639248!=this.getInt(s+0,4))return{status:!1,error:"Invalid data"};if(this.getInt(s+6,2)>20)return{status:!1,error:"Unsupported version"};if(1&this.getInt(s+8,2))return{status:!1,error:"Encryption not implemented"};var a=this.getInt(s+10,2);if(0!==a&&8!==a)return{status:!1,error:"Unsupported compression method"};var c=this.getInt(s+12,2),u=this.getInt(s+14,2),l=this.getDOSDate(u,c),h=(this.getInt(s+16,4),this.getInt(s+20,4)),d=this.getInt(s+24,4),p=this.getInt(s+28,2),f=this.getInt(s+30,2),m=this.getInt(s+32,2),g=this.getInt(s+42,4),v=this.stringOf(s+46,s+46+p),b=this.stringOf(s+46+p+f,s+46+p+f+m);if(67324752!=this.getInt(g+0,4))return{status:!1,error:"Invalid data"};var y=g+30+this.getInt(g+26,2)+this.getInt(g+28,2);this.files[v]={fileComment:b,compressionMethod:a,compressedSize:h,uncompressedSize:d,localFileContent:y,lastModifiedDate:l},s+=46+p+f+m}return{status:!0}},this.read=function(t){var e=this.files[t];if(e){if(8==e.compressionMethod){Ia||(Ia=new Ma).init();var n=Ia.uncompress(this.data,e.localFileContent,e.uncompressedSize);return n.status==Ia.OK?{status:!0,data:n.data}:{status:!1,error:"deflate error "+n.status}}return{status:!0,data:this.data.subarray(e.localFileContent,e.localFileContent+e.uncompressedSize)}}return{status:!1,error:"File '"+t+"' doesn't exist in zip"}}}function Ma(){this.OK=0,this.DATA_ERROR=-3,this.TREE=function(){this.table=new Array(16),this.trans=new Array(288)},this.DATA=function(t){this.source="",this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=[],this.ltree=new t.TREE,this.dtree=new t.TREE},this.sltree=new this.TREE,this.sdtree=new this.TREE,this.length_bits=new Array(30),this.length_base=new Array(30),this.dist_bits=new Array(30),this.dist_base=new Array(30),this.clcidx=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],this.build_bits_base=function(t,e,n,i){var r,s;for(r=0;r<n;++r)t[r]=0;for(r=0;r<30-n;++r)t[r+n]=Math.floor(r/n);for(s=i,r=0;r<30;++r)e[r]=s,s+=1<<t[r]},this.build_fixed_trees=function(t,e){var n;for(n=0;n<7;++n)t.table[n]=0;for(t.table[7]=24,t.table[8]=152,t.table[9]=112,n=0;n<24;++n)t.trans[n]=256+n;for(n=0;n<144;++n)t.trans[24+n]=n;for(n=0;n<8;++n)t.trans[168+n]=280+n;for(n=0;n<112;++n)t.trans[176+n]=144+n;for(n=0;n<5;++n)e.table[n]=0;for(e.table[5]=32,n=0;n<32;++n)e.trans[n]=n},this.build_tree=function(t,e,n,i){var r,s,o=new Array(16);for(r=0;r<16;++r)t.table[r]=0;for(r=0;r<i;++r)t.table[e[n+r]]++;for(t.table[0]=0,s=0,r=0;r<16;++r)o[r]=s,s+=t.table[r];for(r=0;r<i;++r)e[n+r]&&(t.trans[o[e[n+r]]++]=r)},this.getbit=function(t){var e;return t.bitcount--||(t.tag=255&t.source[t.sourceIndex++],t.bitcount=7),e=1&t.tag,t.tag>>>=1,e},this.read_bits=function(t,e,n){if(!e)return n;for(;t.bitcount<24;)t.tag=t.tag|(255&t.source[t.sourceIndex++])<<t.bitcount,t.bitcount+=8;var i=t.tag&65535>>>16-e;return t.tag>>>=e,t.bitcount-=e,i+n},this.round_to_byte_boundary=function(t){for(;t.bitcount>=8;)t.sourceIndex--,t.bitcount-=8;t.bitcount=t.tag=0},this.decode_symbol=function(t,e){for(;t.bitcount<24;)t.tag=t.tag|(255&t.source[t.sourceIndex++])<<t.bitcount,t.bitcount+=8;var n=0,i=0,r=0;do{i=2*i+((t.tag&1<<r)>>>r),++r,n+=e.table[r],i-=e.table[r]}while(i>=0);return t.tag>>>=r,t.bitcount-=r,e.trans[n+i]},this.decode_trees=function(t,e,n){var i,r,s,o,a,c,u=new this.TREE,l=new Array(320);for(i=this.read_bits(t,5,257),r=this.read_bits(t,5,1),s=this.read_bits(t,4,4),o=0;o<19;++o)l[o]=0;for(o=0;o<s;++o){var h=this.read_bits(t,3,0);l[this.clcidx[o]]=h}for(this.build_tree(u,l,0,19),a=0;a<i+r;){var d=this.decode_symbol(t,u);switch(d){case 16:var p=l[a-1];for(c=this.read_bits(t,2,3);c;--c)l[a++]=p;break;case 17:for(c=this.read_bits(t,3,3);c;--c)l[a++]=0;break;case 18:for(c=this.read_bits(t,7,11);c;--c)l[a++]=0;break;default:l[a++]=d}}this.build_tree(e,l,0,i),this.build_tree(n,l,i,r)},this.inflate_block_data=function(t,e,n){for(var i=t.dest,r=t.destIndex;;){var s,o,a,c,u=this.decode_symbol(t,e);if(256==u)return t.destIndex=r,this.OK;if(u<256)i[r++]=u;else for(u-=257,s=this.read_bits(t,this.length_bits[u],this.length_base[u]),o=this.decode_symbol(t,n),c=a=r-(a=this.read_bits(t,this.dist_bits[o],this.dist_base[o],26116==r));c<a+s;++c)i[r++]=i[c]}},this.inflate_uncompressed_block=function(t){var e,n;if(this.round_to_byte_boundary(t),(e=256*(e=t.source[t.sourceIndex+1])+t.source[t.sourceIndex])!=(65535&~(256*t.source[t.sourceIndex+3]+t.source[t.sourceIndex+2])))return this.DATA_ERROR;for(t.sourceIndex+=4,n=e;n;--n)t.dest[t.destIndex++]=t.source[t.sourceIndex++];return t.bitcount=0,this.OK},this.inflate_fixed_block=function(t){return this.inflate_block_data(t,this.sltree,this.sdtree)},this.inflate_dynamic_block=function(t){return this.decode_trees(t,t.ltree,t.dtree),this.inflate_block_data(t,t.ltree,t.dtree)},this.init=function(){this.build_fixed_trees(this.sltree,this.sdtree),this.build_bits_base(this.length_bits,this.length_base,4,3),this.build_bits_base(this.dist_bits,this.dist_base,2,1),this.length_bits[28]=0,this.length_base[28]=258},this.uncompress=function(t,e,n){var i,r=new this.DATA(this);r.source=t,r.sourceIndex=e,r.bitcount=0,r.dest=new Uint8Array(n),r.destIndex=0;do{var s;switch(i=this.getbit(r),this.read_bits(r,2,0)){case 0:s=this.inflate_uncompressed_block(r);break;case 1:s=this.inflate_fixed_block(r);break;case 2:s=this.inflate_dynamic_block(r);break;default:return{status:this.DATA_ERROR}}if(s!=this.OK)return{status:this.DATA_ERROR}}while(!i);return this.round_to_byte_boundary(r),{status:this.OK,data:r.dest,offset:r.sourceIndex,dataSize:r.destIndex}}}rs(Pa),Nr(Pa);const Ba="undefined"==typeof window;function Fa(){return"undefined"!=typeof InstallTrigger}const Ua=[],Ha={SEMICOLON_PLUS:[7,5],MINUS:[7,1],LEFT_SQUARE_BRACKET:[8,3],RIGHT_SQUARE_BRACKET:[8,5],COMMA:[6,6],PERIOD:[7,6],SLASH:[8,6],SHIFTLOCK:[0,5],TAB:[0,6],RETURN:[9,4],DELETE:[9,5],COPY:[9,6],SHIFT:[0,0],ESCAPE:[0,7],CTRL:[1,0],CAPSLOCK:[0,4],LEFT:[9,1],UP:[9,3],RIGHT:[9,7],DOWN:[9,2],K0:[7,2],K1:[0,3],K2:[1,3],K3:[1,1],K4:[2,1],K5:[3,1],K6:[4,3],K7:[4,2],K8:[5,1],K9:[6,2],Q:[0,1],W:[1,2],E:[2,2],R:[3,3],T:[3,2],Y:[4,4],U:[5,3],I:[5,2],O:[6,3],P:[7,3],A:[1,4],S:[1,5],D:[2,3],F:[3,4],G:[3,5],H:[4,5],J:[5,4],K:[6,4],L:[6,5],Z:[1,6],X:[2,4],C:[2,5],V:[3,6],B:[4,6],N:[5,5],M:[5,6],F0:[0,2],F1:[1,7],F2:[2,7],F3:[3,7],F4:[4,1],F5:[4,7],F6:[5,7],F7:[6,1],F8:[6,7],F9:[7,7],SPACE:[2,6],UNDERSCORE_POUND:[8,2],AT:[7,4],COLON_STAR:[8,4],PIPE_BACKSLASH:[8,7],HAT_TILDE:[8,1],NUMPADPLUS:[10,3],NUMPADMINUS:[11,3],NUMPADSLASH:[10,4],NUMPADASTERISK:[11,5],NUMPAD7:[11,1],NUMPAD8:[10,2],NUMPAD9:[11,2],NUMPADHASH:[10,5],NUMPAD4:[10,7],NUMPAD5:[11,7],NUMPAD6:[10,1],NUMPAD_DELETE:[11,4],NUMPAD1:[11,6],NUMPAD2:[12,7],NUMPAD3:[12,6],NUMPADCOMMA:[12,5],NUMPAD0:[10,6],NUMPAD_DECIMAL_POINT:[12,4],NUMPADENTER:[12,3]};function ja(t){var e,n=[],i=!1,r=!0;for(e=0;e<t.length;++e){var s=t.charCodeAt(e),o=t.charAt(e),a=null,c=!1,u=!0;if(s>=65&&s<=90)a=Ha[o];else if(s>=97&&s<=122)o=String.fromCharCode(s-32),a=Ha[o],u=!1;else if(s>=48&&s<=57)a=Ha["K"+o];else if(s>=33&&s<=41)o=String.fromCharCode(s+16),a=Ha["K"+o],c=!0;else switch(o){case"\n":a=Ha.RETURN;break;case"\t":a=Ha.TAB;break;case" ":a=Ha.SPACE;break;case"-":a=Ha.MINUS;break;case"=":a=Ha.MINUS,c=!0;break;case"^":a=Ha.HAT_TILDE;break;case"~":a=Ha.HAT_TILDE,c=!0;break;case"\\":a=Ha.PIPE_BACKSLASH;break;case"|":a=Ha.PIPE_BACKSLASH,c=!0;break;case"@":a=Ha.AT;break;case"[":a=Ha.LEFT_SQUARE_BRACKET;break;case"{":a=Ha.LEFT_SQUARE_BRACKET,c=!0;break;case"_":a=Ha.UNDERSCORE_POUND;break;case";":a=Ha.SEMICOLON_PLUS;break;case"+":a=Ha.SEMICOLON_PLUS,c=!0;break;case":":a=Ha.COLON_STAR;break;case"*":a=Ha.COLON_STAR,c=!0;break;case"]":a=Ha.RIGHT_SQUARE_BRACKET;break;case"}":a=Ha.RIGHT_SQUARE_BRACKET,c=!0;break;case",":a=Ha.COMMA;break;case"<":a=Ha.COMMA,c=!0;break;case".":a=Ha.PERIOD;break;case">":a=Ha.PERIOD,c=!0;break;case"/":a=Ha.SLASH;break;case"?":a=Ha.SLASH,c=!0}a&&((c&&!i||!c&&i)&&(n.push(Ha.SHIFT),i=!i),(u&&!r||!u&&r)&&(n.push(Ha.CAPSLOCK),r=!r),n.push(a))}return i&&n.push(Ha.SHIFT),r||n.push(Ha.CAPSLOCK),n}const za={UNDEFINED:0,BACKSPACE:8,TAB:9,CLEAR:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,BREAK:19,CAPSLOCK:20,ESCAPE:27,SPACE:32,PAGEUP:33,PAGEDOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINTSCREEN:44,INSERT:45,DELETE:46,K0:48,K1:49,K2:50,K3:51,K4:52,K5:53,K6:54,K7:55,K8:56,K9:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,WINDOWS:91,MENU:93,NUMPAD0:96,NUMPAD1:97,NUMPAD2:98,NUMPAD3:99,NUMPAD4:100,NUMPAD5:101,NUMPAD6:102,NUMPAD7:103,NUMPAD8:104,NUMPAD9:105,NUMPADASTERISK:106,NUMPADPLUS:107,NUMPAD_DECIMAL_COMMA:108,NUMPADMINUS:109,NUMPAD_DECIMAL_POINT:110,NUMPADSLASH:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SCROLL_LOCK:145,VOLUMEUP:174,VOLUMEDOWN:175,FASTFORWARD:176,FASTREWIND:177,PLAYPAUSE:179,COMMA:188,PERIOD:190,SLASH:191,LEFT_SQUARE_BRACKET:219,BACKSLASH:220,RIGHT_SQUARE_BRACKET:221,NUMPADENTER:255,SHIFT_LEFT:256,SHIFT_RIGHT:257,ALT_LEFT:258,ALT_RIGHT:259,CTRL_LEFT:260,CTRL_RIGHT:261};var Ka="UK"===function(){if(Ba)return"US";if(localStorage.keyboardLayout)return"US"===localStorage.keyboardLayout?"US":"UK";if(navigator.language){if("en-gb"===navigator.language.toLowerCase())return"UK";if("en-us"===navigator.language.toLowerCase())return"US"}return"US"}();function Ga(t){return(t>>>4&15).toString(16)+(15&t).toString(16)}function Wa(t){return Ga(t>>>8)+Ga(255&t)}function qa(t,e,n,i){for(var r=(i=i||{}).width||16,s=void 0===i.gap?8:i.gap,o=[],a="",c=0,u=e;u<n;++u)a+=" ",a+=Ga(t(u)),++c===s&&(a+=" "),c===r&&(o.push(a),a="",c=0);a&&o.push(a);var l="";for(u=0;u<o.length;++u)l+=Wa(e+u*r)+" :"+o[u]+"\n";return l}Fa()?(za.SEMICOLON=59,za.HASH=163,za.APOSTROPHE=222,za.BACK_QUOTE=192,za.MUTE=-1,za.MINUS=173,za.EQUALS=61):(za.SEMICOLON=186,za.HASH=Ka?222:223,za.APOSTROPHE=Ka?192:222,za.MUTE=173,za.MINUS=189,za.EQUALS=187,za.BACK_QUOTE=Ka?223:192),Ba||-1===window.navigator.userAgent.indexOf("Mac")||(za.BACK_QUOTE=192,za.APOSTROPHE=222,za.HASH=223);var Xa=function(){for(var t=[],e=0;e<256;++e)t[e]=e>=128?e-256:e;return t}();function Va(t){return 0|Xa[0|t]}function Ya(){}function $a(t,e,n){Ba||"https://bbc.godbolt.org"!==window.location.origin||ga("send","event",t,e,n),console.log("event noted:",t,e,n)}var Qa="";function Ja(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}function Za(t){if(t instanceof Uint8Array)return t;for(var e=t.length,n=new Uint8Array(e),i=0;i<e;++i)n[i]=255&t.charCodeAt(i);return n}function tc(t){return Ba?async function(t){if("undefined"!=typeof readbuffer)return new Uint8Array(readbuffer(t));if("undefined"!=typeof read)return read(t,"binary");{const e=await Promise.resolve().then(r.t.bind(r,565,19));return"/"===t[0]&&(t="."+t),e.readFileSync(t)}}(t):function(t){return new Promise((function(e,n){var i=new XMLHttpRequest;i.open("GET",Qa+t,!0),i.overrideMimeType("text/plain; charset=x-user-defined"),i.onload=function(){200!==i.status&&n(new Error("Unable to load "+t+", http code "+i.status)),"string"!=typeof i.response?e(i.response):e(Za(i.response))},i.onerror=function(){n(new Error("A network error occurred loading "+t))},i.send(null)}))}(t)}function ec(t,e){return t[e+1]<<8|t[e+0]}var nc=new ArrayBuffer(4),ic=new Uint8Array(nc),rc=new Float32Array(nc);function sc(t,e,n){var i=this;if(i.name=t,i.pos=0,i.data=Za(e),!n&&i.data&&i.data.length>4&&31===i.data[0]&&139===i.data[1]&&(console.log("Ungzipping "+t),i.data=function(t){var e=new Ma;e.init();for(var n=[];t.length;){if(n.length>1e3)throw new Error("Seems like something went wrong");if(31!==t[0]||139!==t[1])throw new Error("Corrupt data");var i=10;if(2&t[3]&&(i+=2),4&t[3]&&(i+=2+ec(t,i)),8&t[3]){for(;0!==t[i];)i++;i++}if(16&t[3]){for(;0!==t[i];)i++;i++}for(var r,s=16384;;){if(0!==(r=e.uncompress(t,i,s)).status)throw"Unable to ungzip";if(r.dataSize<s)break;s*=2}n.push(r.data.subarray(0,r.dataSize));var o=r.offset+8;t=t.subarray(o)}var a=n.reduce((function(t,e){return t+e.length}),0),c=new Uint8Array(a),u=0;return n.forEach((function(t){c.set(t,u),u+=t.length})),c}(i.data)),!i.data)throw new Error("No data in "+t);i.end=i.data.length,i.bytesLeft=function(){return i.end-i.pos},i.eof=function(){return 0===i.bytesLeft()},i.advance=function(t){if(i.bytesLeft()<t)throw new RangeError("EOF in "+i.name);return i.pos+=t,i.pos-t},i.readFloat32=function(t){return void 0===t&&(t=i.advance(4)),function(t,e){return ic[0]=t[e],ic[1]=t[e+1],ic[2]=t[e+2],ic[3]=t[e+3],rc[0]}(i.data,t)},i.readInt32=function(t){return void 0===t&&(t=i.advance(4)),function(t,e){return t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e+0]}(i.data,t)},i.readInt16=function(t){return void 0===t&&(t=i.advance(2)),ec(i.data,t)},i.readByte=function(t){return void 0===t&&(t=i.advance(1)),i.data[t]},i.readNulString=function(t,e){e||(e=1024);for(var n,r=void 0===t?i.pos:t,s="";0!==(n=i.readByte(r++))&&--e;)s+=String.fromCharCode(n);return 0===e?"":(void 0===t&&(i.pos=r),s)},i.substream=function(t,e){var n;if(void 0===e)e=t,n=i.advance(e);else if((n=t)+e>=i.end)throw new RangeError("EOF in "+i.name);return new sc(i.name+".sub",i.data.subarray(n,n+e))},i.seek=function(t){if(t>=i.end)throw new RangeError("Seek out of range in "+i.name);i.pos=t}}function oc(t){return new Int32Array(t.buffer)}var ac={uef:!0,ssd:!0,dsd:!0},cc={rom:!0};function uc(t,e){var n=new Na;console.log("Attempting to unzip");var i=n.open(t);if(!i.status)throw new Error("Error unzipping "+i.error);var r,s=null;for(var o in n.files){var a=o.match(/.*\.([a-z]+)/i);a&&e[a[1].toLowerCase()]?s?console.log("Ignoring",o,"as already found a file"):(r=o,s=n.read(o)):console.log("Skipping file",o)}if(!s)throw new Error("Couldn't find any compatible files in the archive");if(!s.status)throw new Error("Failed to uncompress file '"+r+"' - "+s.error);return console.log("Unzipped '"+r+"'"),{data:s.data,name:r}}function lc(t){return uc(t,ac)}function hc(t){var e=!1,n=204800;return t.toLowerCase().endsWith(".dsd")&&(n*=2,e=!0),{isDsd:e,byteSize:n}}function dc(t,e){for(var n=0;n<8;++n)t[n]=255&e.charCodeAt(n)}function pc(t){this.buffer=new Uint8Array(t),this.size=0,this.wPtr=0,this.rPtr=0}function fc(){this.prevCol=0,this.holdOff=!1,this.col=7,this.bg=0,this.sep=!1,this.dbl=this.oldDbl=this.secondHalfOfDouble=this.wasDbl=!1,this.gfx=!1,this.flash=this.flashOn=!1,this.flashTime=0,this.heldChar=!1,this.holdChar=0,this.dataQueue=[0,0,0,0],this.scanlineCounter=0,this.levelDEW=!1,this.levelDISPTMG=!1,this.levelRA0=!1,this.normalGlyphs=oc(new Uint32Array(1920)),this.graphicsGlyphs=oc(new Uint32Array(1920)),this.separatedGlyphs=oc(new Uint32Array(1920)),this.colour=oc(new Uint32Array(256)),this.nextGlyphs=this.normalGlyphs,this.curGlyphs=this.normalGlyphs,this.heldGlyphs=this.normalGlyphs,this.init=function(){var t,e=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0,0,1,0,1,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,1,0,0,1,0,0,1,0,0,0,0,1,1,1,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,1,0,1,0,1,0,1,0,1,0,0,0,0,1,1,1,0,0,0,0,1,0,1,0,1,0,1,0,1,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,1,1,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,1,1,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,1,0,0,0,1,0,1,0,0,0,0,1,0,0,0,0,1,0,1,0,1,0,1,0,0,1,0,0,0,1,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,1,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,1,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,1,0,1,0,0,1,1,1,0,0,0,0,1,0,0,0,0,1,1,1,0,0,1,0,1,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,1,1,1,1,1,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,1,0,0,1,0,0,0,1,0,1,0,0,0,1,0,1,0,0,0,1,0,0,1,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,1,0,0,0,1,0,0,0,0,0,1,0,0,0,1,1,0,0,0,1,0,0,0,0,1,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,1,0,0,0,0,0,0,1,0,1,0,0,0,1,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,1,0,0,0,1,0,1,0,0,1,0,0,1,0,0,1,1,1,1,1,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,1,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,1,0,0,0,0,0,1,0,1,0,0,0,1,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,1,0,0,0,0,1,0,0,0,0,0,1,1,1,1,0,0,1,0,0,0,1,0,1,0,0,0,1,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,1,0,0,0,1,0,1,0,0,0,1,0,0,1,1,1,0,0,1,0,0,0,1,0,1,0,0,0,1,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,1,0,0,0,1,0,1,0,0,0,1,0,0,1,1,1,1,0,0,0,0,0,1,0,0,0,0,1,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,1,0,0,0,0,0,0,1,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,1,0,0,0,0,0,0,1,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,1,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,1,0,0,0,1,0,1,0,1,1,1,0,1,0,1,0,1,0,1,0,1,1,1,0,1,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,1,0,0,1,0,0,0,1,0,1,0,0,0,1,0,1,1,1,1,1,0,1,0,0,0,1,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,1,0,0,0,1,0,1,0,0,0,1,0,1,1,1,1,0,0,1,0,0,0,1,0,1,0,0,0,1,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,1,0,0,0,1,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,1,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,1,0,0,0,1,0,1,0,0,0,1,0,1,0,0,0,1,0,1,0,0,0,1,0,1,0,0,0,1,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,1,0,0,0,0,0,1,0,0,0,0,0,1,1,1,1,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,1,0,0,0,0,0,1,0,0,0,0,0,1,1,1,1,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,1,0,0,0,1,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,1,1,0,1,0,0,0,1,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,1,0,1,0,0,0,1,0,1,1,1,1,1,0,1,0,0,0,1,0,1,0,0,0,1,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,1,0,0,0,1,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,1,0,0,1,0,0,1,0,1,0,0,0,1,1,0,0,0,0,1,0,1,0,0,0,1,0,0,1,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,1,1,0,1,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,0,0,1,0,1,0,0,0,1,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,1,0,1,1,0,0,1,0,1,0,1,0,1,0,1,0,0,1,1,0,1,0,0,0,1,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,1,0,0,0,1,0,1,0,0,0,1,0,1,0,0,0,1,0,1,0,0,0,1,0,1,0,0,0,1,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,1,0,0,0,1,0,1,0,0,0,1,0,1,1,1,1,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,1,0,0,0,1,0,1,0,0,0,1,0,1,0,0,0,1,0,1,0,1,0,1,0,1,0,0,1,0,0,0,1,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,1,0,0,0,1,0,1,0,0,0,1,0,1,1,1,1,0,0,1,0,1,0,0,0,1,0,0,1,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,1,0,0,0,1,0,1,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,1,0,1,0,0,0,1,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,1,0,1,0,0,0,1,0,1,0,0,0,1,0,1,0,0,0,1,0,1,0,0,0,1,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,1,0,1,0,0,0,1,0,0,1,0,1,0,0,0,1,0,1,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,1,0,1,0,0,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,1,0,0,1,0,1,0,0,0,0,1,0,0,0,0,1,0,1,0,0,1,0,0,0,1,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,1,0,0,1,0,1,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,1,1,1,1,0,0,1,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,1,1,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,1,0,0,1,1,1,1,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,1,1,0,0,1,0,1,0,1,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0,0,1,0,1,0,0,1,1,1,1,1,0,0,1,0,1,0,0,1,1,1,1,1,0,0,1,0,1,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,1,0,0,1,1,1,1,0,1,0,0,0,1,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,1,1,1,0,0,1,0,0,0,1,0,1,0,0,0,1,0,1,0,0,0,1,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,1,1,1,1,0,1,0,0,0,1,0,1,0,0,0,1,0,1,0,0,0,1,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,1,0,0,0,1,0,1,1,1,1,1,0,1,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,1,1,1,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,1,0,0,0,1,0,1,0,0,0,1,0,1,0,0,0,1,0,0,1,1,1,1,0,0,0,0,0,1,0,0,1,1,1,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,1,1,1,0,0,1,0,0,0,1,0,1,0,0,0,1,0,1,0,0,0,1,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,1,0,0,1,0,1,0,0,0,1,1,0,0,0,0,1,0,1,0,0,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,1,0,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,1,0,0,0,1,0,1,0,0,0,1,0,1,0,0,0,1,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,1,0,0,0,1,0,1,0,0,0,1,0,1,0,0,0,1,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,1,0,0,0,1,0,1,0,0,0,1,0,1,0,0,0,1,0,1,1,1,1,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,1,0,0,0,1,0,1,0,0,0,1,0,1,0,0,0,1,0,0,1,1,1,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,0,0,1,1,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,1,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,1,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,1,1,1,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,1,0,1,0,0,0,1,0,1,0,0,0,1,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,1,0,0,1,0,1,0,0,0,1,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,1,0,1,0,0,0,0,1,0,0,0,0,1,0,1,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,1,0,1,0,0,0,1,0,1,0,0,0,1,0,0,1,1,1,1,0,0,0,0,0,1,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,1,0,0,0,0,1,1,0,0,0,1,0,1,0,0,0,1,1,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,1,0,1,0,0,0,1,0,1,0,0,0,1,0,1,0,0,0,1,0,1,0,0,0,1,0,1,0,0,0,1,0,1,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,1,0,0,0,1,1,0,0,0,0,0,0,1,0,0,0,1,1,0,0,1,0,0,0,0,1,1,0,0,0,1,0,1,0,0,0,1,1,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,1,1,1,1,1,0,1,1,1,1,1,0,1,1,1,1,1,0,1,1,1,1,1,0,1,1,1,1,1,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0]),n=1/2.2;for(t=0;t<256;++t){var i=(3&t)/3,r=!!(4&t),s=!!(8&t),o=!!(16&t),a=!!(32&t),c=!!(64&t),u=!!(128&t),l=240*Math.pow(r*i+a*(1-i),n),h=240*Math.pow(s*i+c*(1-i),n),d=240*Math.pow(o*i+u*(1-i),n);this.colour[t]=l|h<<8|d<<16|255<<24}function p(t,n){if(n<0||n>=20)return 0;for(var i=60*t+6*(n>>>1),r=0,s=0;s<6;++s)r|=3*e[i++]<<2*s;return r}function f(t,e){for(var n,i,r=0,s=0;s<96;++s)for(var o=0;o<20;++o){var a;!e||32&s?(n=p(s,o),i=p(s,o+(1&o?1:-1)),a=n|n>>>1&i&~(i>>>1)|n<<1&i&~(i<<1)):a=p(s,o),t[r++]=7*(1&a)+20*(2&a)+52*(4&a)+224*(8&a)+640*(16&a)+1664*(32&a)+7168*(64&a)+20480*(128&a)+53248*(256&a)+229376*(512&a)+655360*(1024&a)+1703936*(2048&a)}}function m(t,n,i,r,s,o,a){for(var c=0;c<s;++c)for(var u=0;u<r;++u)e[60*t+6*(i+c)+(n+u)]=!o||0!==u&&c!==s-1?a:0}f(this.normalGlyphs,!1);for(var g=0;g<96;++g)32&g||(m(g,0,0,3,3,!1,!!(1&g)),m(g,3,0,3,3,!1,!!(2&g)),m(g,0,3,3,4,!1,!!(4&g)),m(g,3,3,3,4,!1,!!(8&g)),m(g,0,7,3,3,!1,!!(16&g)),m(g,3,7,3,3,!1,!!(64&g)));for(f(this.graphicsGlyphs,!0),g=0;g<96;++g)32&g||(m(g,0,0,3,3,!0,!!(1&g)),m(g,3,0,3,3,!0,!!(2&g)),m(g,0,3,3,4,!0,!!(4&g)),m(g,3,3,3,4,!0,!!(8&g)),m(g,0,7,3,3,!0,!!(16&g)),m(g,3,7,3,3,!0,!!(64&g)));f(this.separatedGlyphs,!0)},this.init()}pc.prototype.full=function(){return this.size===this.buffer.length},pc.prototype.empty=function(){return 0===this.size},pc.prototype.clear=function(){this.size=0,this.wPtr=0,this.rPtr=0},pc.prototype.put=function(t){this.full()||(this.buffer[this.wPtr%this.buffer.length]=t,this.wPtr++,this.size++)},pc.prototype.get=function(){if(!this.empty()){var t=this.buffer[this.rPtr%this.buffer.length];return this.rPtr++,this.size--,t}},fc.prototype.setNextChars=function(){this.gfx?this.sep?this.nextGlyphs=this.separatedGlyphs:this.nextGlyphs=this.graphicsGlyphs:this.nextGlyphs=this.normalGlyphs},fc.prototype.handleControlCode=function(t){switch(this.holdOff=!1,t){case 1:case 2:case 3:case 4:case 5:case 6:case 7:this.gfx=!1,this.col=t,this.setNextChars();break;case 8:this.flash=!0;break;case 9:this.flash=!1;break;case 12:case 13:this.dbl=!!(1&t),this.dbl&&(this.wasDbl=!0);break;case 17:case 18:case 19:case 20:case 21:case 22:case 23:this.gfx=!0,this.col=7&t,this.setNextChars();break;case 24:this.col=this.prevCol=this.bg;break;case 25:this.sep=!1,this.setNextChars();break;case 26:this.sep=!0,this.setNextChars();break;case 28:this.bg=0;break;case 29:this.bg=this.col;break;case 30:this.holdChar=!0;break;case 31:this.holdOff=!0}return this.holdChar&&this.dbl===this.oldDbl?((t=this.heldChar)>=64&&t<96&&(t=32),this.curGlyphs=this.heldGlyphs):(this.heldChar=32,t=32),t},fc.prototype.fetchData=function(t){this.dataQueue.shift(),this.dataQueue.push(127&t)},fc.prototype.setDEW=function(t){var e=this.levelDEW;this.levelDEW=t,e&&!t&&(this.scanlineCounter=0,this.secondHalfOfDouble=!1,48==++this.flashTime&&(this.flashTime=0),this.flashOn=this.flashTime<16)},fc.prototype.setDISPTMG=function(t){var e=this.levelDISPTMG;this.levelDISPTMG=t,e&&!t&&(this.col=7,this.bg=0,this.holdChar=!1,this.heldChar=32,this.nextGlyphs=this.heldGlyphs=this.normalGlyphs,this.flash=!1,this.sep=!1,this.gfx=!1,this.dbl=!1,this.scanlineCounter++,10===this.scanlineCounter&&(this.scanlineCounter=0,this.secondHalfOfDouble?this.secondHalfOfDouble=!1:this.secondHalfOfDouble=this.wasDbl),this.wasDbl=!1)},fc.prototype.setRA0=function(t){this.levelRA0=t},fc.prototype.render=function(t,e){var n,i=this.dataQueue[0],r=this.scanlineCounter<<1;this.levelRA0&&r++,this.oldDbl=this.dbl,this.prevCol=this.col,this.curGlyphs=this.nextGlyphs;var s=this.flash;i<32?i=this.handleControlCode(i):this.gfx&&(this.heldChar=i,this.heldGlyphs=this.curGlyphs),this.oldDbl&&(r>>>=1,this.secondHalfOfDouble&&(r+=10));var o=this.curGlyphs[20*(i-32)+r];if(s&&this.flashOn||this.secondHalfOfDouble&&!this.dbl){var a=this.colour[(7&this.bg)<<5];for(n=0;n<16;++n)t[e++]=a}else for(var c=(7&this.bg)<<5|(7&this.prevCol)<<2,u=0;u<16;++u)t[e+u]=this.colour[c+(3&o)],o>>>=2;this.holdOff&&(this.holdChar=!1,this.heldChar=32)};const mc=32;function gc(){this.reset=function(){},this.ula=this.crtc={read:function(){return 255},write:Ya},this.polltime=Ya,this.setScreenAdd=Ya,this.regs=new Uint8Array(32)}function vc(t){return'<span class="addr">'+Wa(t)+"</span>"}class bc{constructor(t,e){this._widget=t,this._peekMem=e,this._addr=0,this._prevSnapshot=new Uint8Array(65536),this._rows=[];const n=this._widget.find(".template");for(let t=0;t<16;t++)this._rows.push(n.clone().removeClass("template").appendTo(this._widget));n.remove(),t.bind("wheel",(t=>{const e=t.originalEvent.deltaY;if(0===e)return;const n=e/20|0;this.update(this._addr+8*n),t.preventDefault()}))}update(t){void 0!==t&&(this._addr=t);let e=this._addr-8*Math.floor(this._rows.length/2);e<0&&(e=0);for(const t of this._rows){t.find(".dis_addr").html(vc(e)),t.toggleClass("highlight",e===this._addr);const i=this.dump(e,e+8),r=t.find(".mem_bytes span"),s=t.find(".mem_asc span");for(let t=0;t<8;++t)n(r[t]).text(i.hex[t]).toggleClass("changed",i.changed[t]),n(s[t]).text(i.asc[t]).toggleClass("changed",i.changed[t]);e=e+8&65535}}dump(t,e){const n=[],i=[],r=[];for(let s=t;s<e;++s){const t=this._peekMem(s);n.push(Ga(t)),r.push(s<this._prevSnapshot.length&&this._prevSnapshot[s]!==t),t>=32&&t<128?i.push(String.fromCharCode(t)):i.push(".")}return{hex:n,asc:i,changed:r}}snapshot(){for(let t=0;t<65536;++t)this._prevSnapshot[t]=this._peekMem(t)}step(t){this.update(this._addr+t)}}var yc=Wa,wc=Ga,_c=Va;function xc(t,e){var n=[];return t?(e||n.push("var newBotBit = cpu.p.c ? 0x01 : 0x00;"),n.push("cpu.p.c = !!(REG & 0x80);"),e?n.push("REG = (REG << 1) & 0xff;"):n.push("REG = ((REG << 1) & 0xff) | newBotBit;")):(e||n.push("var newTopBit = cpu.p.c ? 0x80 : 0x00;"),n.push("cpu.p.c = !!(REG & 0x01);"),e?n.push("REG >>>= 1;"):n.push("REG = (REG >>> 1) | newTopBit;")),n.push("cpu.setzn(REG);"),n}function Ac(t){return"p"===t?["var tempFlags = cpu.pull();","cpu.p.c = !!(tempFlags & 0x01);","cpu.p.z = !!(tempFlags & 0x02);","cpu.p.i = !!(tempFlags & 0x04);","cpu.p.d = !!(tempFlags & 0x08);","cpu.p.v = !!(tempFlags & 0x40);","cpu.p.n = !!(tempFlags & 0x80);"]:["cpu."+t+" = cpu.setzn(cpu.pull());"]}function Ec(t){return"p"===t?"cpu.push(cpu.p.asByte());":"cpu.push(cpu."+t+");"}function Cc(t){var e=this;function n(t,n,i,r,s){void 0===i&&(i=n,n=e.cycle),r=r||!1,"string"==typeof i&&(i=[i]),e.ops[n]?(e.ops[n].op=t(e.ops[n].op,i),r&&(e.ops[n].exact=!0),e.ops[n].addr||(e.ops[n].addr=s)):e.ops[n]={op:i,exact:r,addr:s}}e.is65c12=t,e.ops={},e.cycle=0,e.append=function(t,e,i,r){n((function(t,e){return t.concat(e)}),t,e,i,r)},e.prepend=function(t,e,i,r){n((function(t,e){return e.concat(t)}),t,e,i,r)},e.tick=function(t){e.cycle+=t||1},e.readOp=function(t,n,i){var r;e.cycle++,r=n?n+" = cpu.readmem("+t+");":"cpu.readmem("+t+");",i&&(r+=" // spurious"),e.append(e.cycle,r,!0,t)},e.writeOp=function(t,n,i){e.cycle++;var r="cpu.writemem("+t+", "+n+");";i&&(r+=" // spurious"),e.append(e.cycle,r,!0,t)},e.zpReadOp=function(t,n){e.cycle++,e.append(e.cycle,n+" = cpu.readmemZpStack("+t+");",!1)},e.zpWriteOp=function(t,n){e.cycle++,e.append(e.cycle,"cpu.writememZpStack("+t+", "+n+");",!0)},e.render=function(t){return e.cycle<2&&(e.cycle=2),e.prepend(e.cycle-1,"cpu.checkInt();",!0),e.renderInternal(t)},e.spuriousOp=function(t,n){e.is65c12?e.readOp(t,n,!0):e.writeOp(t,n,!0)},e.renderInternal=function(t){var n,i=0,r=[];for(n=t=t||0;n<e.cycle;++n)e.ops[n]?(i&&e.ops[n].exact&&(e.ops[n].addr?r.push("cpu.polltimeAddr("+i+", "+e.ops[n].addr+");"):r.push("cpu.polltime("+i+");"),i=0),r=r.concat(e.ops[n].op),i++):i++;return i&&(e.ops[e.cycle]&&e.ops[e.cycle].addr?r.push("cpu.polltimeAddr("+i+", "+e.ops[e.cycle].addr+");"):r.push("cpu.polltime("+i+");")),e.ops[e.cycle]&&(r=r.concat(e.ops[e.cycle].op)),r.filter((function(t){return t}))},e.split=function(t){return new Tc(this,t,e.is65c12)}}function Tc(t,e,n){var i=this;function r(t){var e=[];return t.forEach((function(t){e.push("  "+t)})),e}i.preamble=t,i.ifTrue=new Cc(n),i.ifTrue.tick(t.cycle),i.ifFalse=new Cc(n),i.ifFalse.tick(t.cycle),["append","prepend","readOp","writeOp","spuriousOp"].forEach((function(t){i[t]=function(){i.ifTrue[t].apply(i.ifTrue,arguments),i.ifFalse[t].apply(i.ifFalse,arguments)}})),i.render=function(){return i.preamble.renderInternal().concat(["if ("+e+") {"]).concat(r(i.ifTrue.render(t.cycle))).concat(["} else {"]).concat(r(i.ifFalse.render(t.cycle))).concat("}")}}var Sc={0:"BRK",1:"ORA (,x)",3:"SLO (,x)",4:"NOP zp",5:"ORA zp",6:"ASL zp",7:"SLO zp",8:"PHP",9:"ORA imm",10:"ASL A",11:"ANC imm",12:"NOP abs",13:"ORA abs",14:"ASL abs",15:"SLO abs",16:"BPL branch",17:"ORA (),y",19:"SLO (),y",20:"NOP zp,x",21:"ORA zp,x",22:"ASL zp,x",23:"SLO zp,x",24:"CLC",25:"ORA abs,y",26:"NOP",27:"SLO abs,y",28:"NOP abs,x",29:"ORA abs,x",30:"ASL abs,x",31:"SLO abs,x",32:"JSR abs",33:"AND (,x)",35:"RLA (,x)",36:"BIT zp",37:"AND zp",38:"ROL zp",39:"RLA zp",40:"PLP",41:"AND imm",42:"ROL A",43:"ANC imm",44:"BIT abs",45:"AND abs",46:"ROL abs",47:"RLA abs",48:"BMI branch",49:"AND (),y",51:"RLA (),y",52:"NOP zp,x",53:"AND zp,x",54:"ROL zp,x",55:"RLA zp,x",56:"SEC",57:"AND abs,y",58:"NOP",59:"RLA abs,y",60:"NOP abs,x",61:"AND abs,x",62:"ROL abs,x",63:"RLA abs,x",64:"RTI",65:"EOR (,x)",67:"SRE (,x)",68:"NOP zp",69:"EOR zp",70:"LSR zp",71:"SRE zp",72:"PHA",73:"EOR imm",74:"LSR A",75:"ASR imm",76:"JMP abs",77:"EOR abs",78:"LSR abs",79:"SRE abs",80:"BVC branch",81:"EOR (),y",83:"SRE (),y",84:"NOP zp,x",85:"EOR zp,x",86:"LSR zp,x",87:"SRE zp,x",88:"CLI",89:"EOR abs,y",90:"NOP",91:"SRE abs,y",92:"NOP abs,x",93:"EOR abs,x",94:"LSR abs,x",95:"SRE abs,x",96:"RTS",97:"ADC (,x)",99:"RRA (,x)",100:"NOP zp",101:"ADC zp",102:"ROR zp",103:"RRA zp",104:"PLA",105:"ADC imm",106:"ROR A",107:"ARR imm",108:"JMP (abs)",109:"ADC abs",110:"ROR abs",111:"RRA abs",112:"BVS branch",113:"ADC (),y",115:"RRA (),y",116:"NOP zp,x",117:"ADC zp,x",118:"ROR zp,x",119:"RRA zp,x",120:"SEI",121:"ADC abs,y",122:"NOP",123:"RRA abs,y",124:"NOP abs,x",125:"ADC abs,x",126:"ROR abs,x",127:"RRA abs,x",128:"NOP imm",129:"STA (,x)",130:"NOP imm",131:"SAX (,x)",132:"STY zp",133:"STA zp",134:"STX zp",135:"SAX zp",136:"DEY",137:"NOP imm",138:"TXA",139:"ANE imm",140:"STY abs",141:"STA abs",142:"STX abs",143:"SAX abs",144:"BCC branch",145:"STA (),y",147:"SHA (),y",148:"STY zp,x",149:"STA zp,x",150:"STX zp,y",151:"SAX zp,y",152:"TYA",153:"STA abs,y",154:"TXS",155:"SHS abs,y",156:"SHY abs,x",157:"STA abs,x",158:"SHX abs,y",159:"SHA abs,y",160:"LDY imm",161:"LDA (,x)",162:"LDX imm",163:"LAX (,x)",164:"LDY zp",165:"LDA zp",166:"LDX zp",167:"LAX zp",168:"TAY",169:"LDA imm",170:"TAX",171:"LXA imm",172:"LDY abs",173:"LDA abs",174:"LDX abs",175:"LAX abs",176:"BCS branch",177:"LDA (),y",179:"LAX (),y",180:"LDY zp,x",181:"LDA zp,x",182:"LDX zp,y",183:"LAX zp,y",184:"CLV",185:"LDA abs,y",186:"TSX",187:"LAS abs,y",188:"LDY abs,x",189:"LDA abs,x",190:"LDX abs,y",191:"LAX abs,y",192:"CPY imm",193:"CMP (,x)",194:"NOP imm",195:"DCP (,x)",196:"CPY zp",197:"CMP zp",198:"DEC zp",199:"DCP zp",200:"INY",201:"CMP imm",202:"DEX",203:"SBX imm",204:"CPY abs",205:"CMP abs",206:"DEC abs",207:"DCP abs",208:"BNE branch",209:"CMP (),y",211:"DCP (),y",212:"NOP zp,x",213:"CMP zp,x",214:"DEC zp,x",215:"DCP zp,x",216:"CLD",217:"CMP abs,y",218:"NOP",219:"DCP abs,y",220:"NOP abs,x",221:"CMP abs,x",222:"DEC abs,x",223:"DCP abs,x",224:"CPX imm",225:"SBC (,x)",226:"NOP imm",227:"ISB (,x)",228:"CPX zp",229:"SBC zp",230:"INC zp",231:"ISB zp",232:"INX",233:"SBC imm",234:"NOP",235:"SBC imm",236:"CPX abs",237:"SBC abs",238:"INC abs",239:"ISB abs",240:"BEQ branch",241:"SBC (),y",243:"ISB (),y",244:"NOP zpx",245:"SBC zp,x",246:"INC zp,x",247:"ISB zp,x",248:"SED",249:"SBC abs,y",250:"NOP",251:"ISB abs,y",252:"NOP abs,x",253:"SBC abs,x",254:"INC abs,x",255:"ISB abs,x"},kc={0:"BRK",1:"ORA (,x)",4:"TSB zp",5:"ORA zp",6:"ASL zp",8:"PHP",9:"ORA imm",10:"ASL A",12:"TSB abs",13:"ORA abs",14:"ASL abs",16:"BPL branch",17:"ORA (),y",18:"ORA ()",20:"TRB zp",21:"ORA zp,x",22:"ASL zp,x",24:"CLC",25:"ORA abs,y",26:"INC A",28:"TRB abs",29:"ORA abs,x",30:"ASL abs,x",32:"JSR abs",33:"AND (,x)",36:"BIT zp",37:"AND zp",38:"ROL zp",40:"PLP",41:"AND imm",42:"ROL A",44:"BIT abs",45:"AND abs",46:"ROL abs",48:"BMI branch",49:"AND (),y",50:"AND ()",52:"BIT zp,x",53:"AND zp,x",54:"ROL zp,x",56:"SEC",57:"AND abs,y",58:"DEC A",60:"BIT abs,x",61:"AND abs,x",62:"ROL abs,x",64:"RTI",65:"EOR (,x)",69:"EOR zp",70:"LSR zp",72:"PHA",73:"EOR imm",74:"LSR A",76:"JMP abs",77:"EOR abs",78:"LSR abs",80:"BVC branch",81:"EOR (),y",82:"EOR ()",85:"EOR zp,x",86:"LSR zp,x",88:"CLI",89:"EOR abs,y",90:"PHY",93:"EOR abs,x",94:"LSR abs,x",96:"RTS",97:"ADC (,x)",100:"STZ zp",101:"ADC zp",102:"ROR zp",104:"PLA",105:"ADC imm",106:"ROR A",108:"JMP (abs)",109:"ADC abs",110:"ROR abs",112:"BVS branch",113:"ADC (),y",114:"ADC ()",116:"STZ zp,x",117:"ADC zp,x",118:"ROR zp,x",120:"SEI",121:"ADC abs,y",122:"PLY",124:"JMP (abs,x)",125:"ADC abs,x",126:"ROR abs,x",128:"BRA branch",129:"STA (,x)",132:"STY zp",133:"STA zp",134:"STX zp",136:"DEY",137:"BIT imm",138:"TXA",140:"STY abs",141:"STA abs",142:"STX abs",144:"BCC branch",145:"STA (),y",146:"STA ()",148:"STY zp,x",149:"STA zp,x",150:"STX zp,y",152:"TYA",153:"STA abs,y",154:"TXS",156:"STZ abs",157:"STA abs,x",158:"STZ abs,x",160:"LDY imm",161:"LDA (,x)",162:"LDX imm",164:"LDY zp",165:"LDA zp",166:"LDX zp",168:"TAY",169:"LDA imm",170:"TAX",172:"LDY abs",173:"LDA abs",174:"LDX abs",176:"BCS branch",177:"LDA (),y",178:"LDA ()",180:"LDY zp,x",181:"LDA zp,x",182:"LDX zp,y",184:"CLV",185:"LDA abs,y",186:"TSX",188:"LDY abs,x",189:"LDA abs,x",190:"LDX abs,y",192:"CPY imm",193:"CMP (,x)",196:"CPY zp",197:"CMP zp",198:"DEC zp",200:"INY",201:"CMP imm",202:"DEX",204:"CPY abs",205:"CMP abs",206:"DEC abs",208:"BNE branch",209:"CMP (),y",210:"CMP ()",213:"CMP zp,x",214:"DEC zp,x",216:"CLD",217:"CMP abs,y",218:"PHX",221:"CMP abs,x",222:"DEC abs,x",224:"CPX imm",225:"SBC (,x)",228:"CPX zp",229:"SBC zp",230:"INC zp",232:"INX",233:"SBC imm",234:"NOP",236:"CPX abs",237:"SBC abs",238:"INC abs",240:"BEQ branch",241:"SBC (),y",242:"SBC ()",245:"SBC zp,x",246:"INC zp,x",248:"SED",249:"SBC abs,y",250:"PLX",253:"SBC abs,x",254:"INC abs,x"};function Rc(t,e,n){function i(t,e){var i=t.split(" "),r=i[0],s=i[1],o=function(t,e){switch(t){case"NOP":return{op:"",read:void 0!==e};case"BRK":return{op:"cpu.brk(false);"};case"CLC":return{op:"cpu.p.c = false;"};case"SEC":return{op:"cpu.p.c = true;"};case"CLD":return{op:"cpu.p.d = false;"};case"SED":return{op:"cpu.p.d = true;"};case"CLI":return{op:"cpu.p.i = false;"};case"SEI":return{op:"cpu.p.i = true;"};case"CLV":return{op:"cpu.p.v = false;"};case"LDA":return{op:["cpu.a = cpu.setzn(REG);"],read:!0};case"LDX":return{op:["cpu.x = cpu.setzn(REG);"],read:!0};case"LDY":return{op:["cpu.y = cpu.setzn(REG);"],read:!0};case"STA":return{op:"REG = cpu.a;",write:!0};case"STX":return{op:"REG = cpu.x;",write:!0};case"STY":return{op:"REG = cpu.y;",write:!0};case"INC":return{op:["REG = cpu.setzn(REG + 1);"],read:!0,write:!0};case"DEC":return{op:["REG = cpu.setzn(REG - 1);"],read:!0,write:!0};case"INX":return{op:["cpu.x = cpu.setzn(cpu.x + 1);"]};case"INY":return{op:["cpu.y = cpu.setzn(cpu.y + 1);"]};case"DEX":return{op:["cpu.x = cpu.setzn(cpu.x - 1);"]};case"DEY":return{op:["cpu.y = cpu.setzn(cpu.y - 1);"]};case"ADC":return{op:"cpu.adc(REG);",read:!0};case"SBC":return{op:"cpu.sbc(REG);",read:!0};case"BIT":return"imm"===e?{op:"cpu.p.z = !(cpu.a & REG);",read:!0}:{op:["cpu.p.z = !(cpu.a & REG);","cpu.p.v = !!(REG & 0x40);","cpu.p.n = !!(REG & 0x80);"],read:!0};case"ROL":return{op:xc(!0,!1),read:!0,write:!0,rotate:!0};case"ROR":return{op:xc(!1,!1),read:!0,write:!0,rotate:!0};case"ASL":return{op:xc(!0,!0),read:!0,write:!0,rotate:!0};case"LSR":return{op:xc(!1,!0),read:!0,write:!0,rotate:!0};case"EOR":return{op:["cpu.a = cpu.setzn(cpu.a ^ REG);"],read:!0};case"AND":return{op:["cpu.a = cpu.setzn(cpu.a & REG);"],read:!0};case"ORA":return{op:["cpu.a = cpu.setzn(cpu.a | REG);"],read:!0};case"CMP":return{op:["cpu.setzn(cpu.a - REG);","cpu.p.c = cpu.a >= REG;"],read:!0};case"CPX":return{op:["cpu.setzn(cpu.x - REG);","cpu.p.c = cpu.x >= REG;"],read:!0};case"CPY":return{op:["cpu.setzn(cpu.y - REG);","cpu.p.c = cpu.y >= REG;"],read:!0};case"TXA":return{op:["cpu.a = cpu.setzn(cpu.x);"]};case"TAX":return{op:["cpu.x = cpu.setzn(cpu.a);"]};case"TXS":return{op:"cpu.s = cpu.x;"};case"TSX":return{op:["cpu.x = cpu.setzn(cpu.s);"]};case"TYA":return{op:["cpu.a = cpu.setzn(cpu.y);"]};case"TAY":return{op:["cpu.y = cpu.setzn(cpu.a);"]};case"BEQ":return{op:"cpu.branch(cpu.p.z);"};case"BNE":return{op:"cpu.branch(!cpu.p.z);"};case"BCS":return{op:"cpu.branch(cpu.p.c);"};case"BCC":return{op:"cpu.branch(!cpu.p.c);"};case"BMI":return{op:"cpu.branch(cpu.p.n);"};case"BPL":return{op:"cpu.branch(!cpu.p.n);"};case"BVS":return{op:"cpu.branch(cpu.p.v);"};case"BVC":return{op:"cpu.branch(!cpu.p.v);"};case"PLA":return{op:Ac("a"),extra:3};case"PLP":return{op:Ac("p"),extra:3};case"PLX":return{op:Ac("x"),extra:3};case"PLY":return{op:Ac("y"),extra:3};case"PHA":return{op:Ec("a"),extra:2};case"PHP":return{op:Ec("p"),extra:2};case"PHX":return{op:Ec("x"),extra:2};case"PHY":return{op:Ec("y"),extra:2};case"RTS":return{op:["var temp = cpu.pull();","temp |= cpu.pull() << 8;","cpu.pc = (temp + 1) & 0xffff;"],extra:5};case"RTI":return{preop:["var temp = cpu.pull();","cpu.p.c = !!(temp & 0x01);","cpu.p.z = !!(temp & 0x02);","cpu.p.i = !!(temp & 0x04);","cpu.p.d = !!(temp & 0x08);","cpu.p.v = !!(temp & 0x40);","cpu.p.n = !!(temp & 0x80);","temp = cpu.pull();","cpu.pc = temp | (cpu.pull() << 8);"],extra:5};case"JSR":return{op:["var pushAddr = cpu.pc - 1;","cpu.push(pushAddr >>> 8);","cpu.push(pushAddr & 0xff);","cpu.pc = addr;"],extra:3};case"JMP":return{op:"cpu.pc = addr;"};case"TSB":return{op:["cpu.p.z = !(REG & cpu.a);","REG |= cpu.a;"],read:!0,write:!0};case"TRB":return{op:["cpu.p.z = !(REG & cpu.a);","REG &= ~cpu.a;"],read:!0,write:!0};case"BRA":return{op:"cpu.branch(true);"};case"STZ":return{op:"REG = 0;",write:!0};case"SAX":return{op:"REG = cpu.a & cpu.x;",write:!0};case"ASR":return{op:["REG &= cpu.a;"].concat(xc(!1,!0)).concat(["cpu.a = REG;"])};case"SLO":return{op:xc(!0,!0).concat(["cpu.a |= REG;","cpu.setzn(cpu.a);"]),read:!0,write:!0};case"SHX":return{op:"REG = (cpu.x & ((addr >>> 8)+1)) & 0xff;",write:!0};case"SHY":return{op:"REG = (cpu.y & ((addr >>> 8)+1)) & 0xff;",write:!0};case"LAX":return{op:["var magic = 0xff;","cpu.a = cpu.x = cpu.setzn((cpu.a|magic) & REG);"],read:!0};case"LXA":return{op:["var magic = 0xee;","cpu.a = cpu.x = cpu.setzn((cpu.a|magic) & REG);"],read:!0};case"SRE":return{op:xc(!1,!0).concat(["cpu.a = cpu.setzn(cpu.a ^ REG);"]),read:!0,write:!0};case"RLA":return{op:xc(!0,!1).concat(["cpu.a = cpu.setzn(cpu.a & REG);"]),read:!0,write:!0};case"ANC":return{op:["cpu.a = cpu.setzn(cpu.a & REG); cpu.p.c = cpu.p.n;"],read:!0};case"ANE":return{op:["cpu.a = cpu.setzn((cpu.a | 0xee) & REG & cpu.x);"],read:!0};case"ARR":return{op:"cpu.arr(REG);",read:!0};case"DCP":return{op:["REG = cpu.setzn(REG - 1);","cpu.setzn(cpu.a - REG);","cpu.p.c = cpu.a >= REG;"],read:!0,write:!0};case"LAS":return{op:["cpu.a = cpu.x = cpu.s = cpu.setzn(cpu.s & REG);"],read:!0};case"RRA":return{op:xc(!1,!1).concat(["cpu.adc(REG);"]),read:!0,write:!0};case"SBX":return{op:["var temp = cpu.a & cpu.x;","cpu.p.c = temp >= REG;","cpu.x = cpu.setzn(temp - REG);"],read:!0};case"SHA":return{op:["REG = cpu.a & cpu.x & ((addr >>> 8) + 1) & 0xff;"],write:!0};case"SHS":return{op:["cpu.s = cpu.a & cpu.x;","REG = cpu.a & cpu.x & ((addr >>> 8) + 1) & 0xff;"],write:!0};case"ISB":return{op:["REG = (REG + 1) & 0xff;","cpu.sbc(REG);"],read:!0,write:!0}}return null}(r,s);if(!o)return null;var a=new Cc(n);switch(e&&a.append("var REG = 0|0;"),s){case void 0:if(o.read||o.write)throw"Unsupported "+t;return a.append(o.preop),a.tick(Math.max(2,1+(o.extra||0))),a.append(o.op),a.render();case"branch":return[o.op];case"zp":case"zpx":case"zp,x":case"zp,y":return"zp"===s?(a.tick(2),a.append("var addr = cpu.getb() | 0;")):(a.tick(3),a.append("var addr = (cpu.getb() + cpu."+s[3]+") & 0xff;")),o.read&&(a.zpReadOp("addr","REG"),o.write&&a.tick(1)),a.append(o.op),o.write&&a.zpWriteOp("addr","REG"),a.render();case"abs":return a.tick(3+(o.extra||0)),a.append("var addr = cpu.getw() | 0;"),o.read&&(a.readOp("addr","REG"),o.write&&a.spuriousOp("addr","REG")),a.append(o.op),o.write&&a.writeOp("addr","REG"),a.render();case"abs,x":case"abs,y":return a.append("var addr = cpu.getw() | 0;"),a.append("var addrWithCarry = (addr + cpu."+s[4]+") & 0xffff;"),a.append("var addrNonCarry = (addr & 0xff00) | (addrWithCarry & 0xff);"),a.tick(3),o.read&&!o.write?((a=a.split("addrWithCarry !== addrNonCarry")).ifTrue.readOp("addrNonCarry"),a.readOp("addrWithCarry","REG")):o.read?n&&o.rotate?((a=a.split("addrWithCarry !== addrNonCarry")).ifTrue.readOp("addrNonCarry"),a.readOp("addrWithCarry","REG"),a.writeOp("addrWithCarry","REG")):(a.readOp("addrNonCarry"),a.readOp("addrWithCarry","REG"),a.spuriousOp("addrWithCarry","REG")):o.write&&a.readOp("addrNonCarry"),a.append(o.op),o.write&&a.writeOp("addrWithCarry","REG"),a.render();case"imm":if(o.write)throw"This isn't possible";return o.read,a.tick(2),a.append("REG = cpu.getb() | 0;"),a.append(o.op),a.render();case"A":return a.tick(2),a.append("REG = cpu.a;"),a.append(o.op),a.append("cpu.a = REG;"),a.render();case"(,x)":return a.tick(3),a.append("var zpAddr = (cpu.getb() + cpu.x) & 0xff;"),a.append("var lo, hi;"),a.zpReadOp("zpAddr","lo"),a.zpReadOp("(zpAddr + 1) & 0xff","hi"),a.append("var addr = lo | (hi << 8);"),o.read&&(a.readOp("addr","REG"),o.write&&a.spuriousOp("addr","REG")),a.append(o.op),o.write&&a.writeOp("addr","REG"),a.render();case"(),y":return a.tick(2),a.append("var zpAddr = cpu.getb() | 0;"),a.append("var lo, hi;"),a.zpReadOp("zpAddr","lo"),a.zpReadOp("(zpAddr + 1) & 0xff","hi"),a.append("var addr = lo | (hi << 8);"),a.append("var addrWithCarry = (addr + cpu.y) & 0xffff;"),a.append("var addrNonCarry = (addr & 0xff00) | (addrWithCarry & 0xff);"),o.read&&!o.write?((a=a.split("addrWithCarry !== addrNonCarry")).ifTrue.readOp("addrNonCarry"),a.readOp("addrWithCarry","REG")):o.read?(a.readOp("addrNonCarry"),a.readOp("addrWithCarry","REG"),a.spuriousOp("addrWithCarry","REG")):o.write&&a.readOp("addrNonCarry"),a.append(o.op),o.write&&a.writeOp("addrWithCarry","REG"),a.render();case"(abs)":return a.tick(n?4:3),a.append("var addr = cpu.getw() | 0;"),n?a.append("var nextAddr = (addr + 1) & 0xffff;"):a.append("var nextAddr = ((addr + 1) & 0xff) | (addr & 0xff00);"),a.append("var lo, hi;"),a.readOp("addr","lo"),a.readOp("nextAddr","hi"),a.append("addr = lo | (hi << 8);"),a.append(o.op),a.render();case"(abs,x)":return a.tick(4),a.append("var addr = (cpu.getw() + cpu.x) | 0;"),a.append("var lo, hi;"),a.readOp("addr","lo"),a.readOp("(addr + 1) & 0xffff","hi"),a.append("addr = lo | (hi << 8);"),a.append(o.op),a.render();case"()":return a.tick(2),a.append("var zpAddr = cpu.getb() | 0;"),a.append("var lo, hi;"),a.zpReadOp("zpAddr","lo"),a.zpReadOp("(zpAddr + 1) & 0xff","hi"),a.append("var addr = lo | (hi << 8);"),o.read&&a.readOp("addr","REG"),a.append(o.op),o.write&&a.writeOp("addr","REG"),a.render();default:throw"Unknown arg type "+s}}function r(t,n,r){var s=e[n],o=null;return s&&(o=i(s,!!r)),o||(o=["this.invalidOpcode(cpu, 0x"+Ga(n)+");"]),t+(o=['"use strict";',"// "+Ga(n)+" - "+s+"\n"].concat(o)).join("\n"+t)}function s(){}return s.prototype.invalidOpcode=function(t,e){if(n)switch(e){case 2:case 34:case 66:case 98:case 130:case 194:case 226:t.getb(),t.polltime(2);break;case 68:t.getb(),t.polltime(3);break;case 84:case 212:case 244:t.getb(),t.polltime(4);break;case 92:t.getw(),t.polltime(8);break;case 220:case 252:t.getw(),t.polltime(4);break;default:t.polltime(1)}else t.pc--,t.polltime(1)},s.prototype.cpu=t,s.prototype.run=function(){for(var t=[],e=0;e<256;++e)t[e]=new Function("cpu",r("  ",e,!0));return function(e){return t[e].call(this,this.cpu)}}(),{Disassemble:function(t){function n(t){return"<span class='instr_mem_ref'>"+yc(t)+"</span>"}function i(t){return"<span class='instr_instr_ref'>"+yc(t)+"</span>"}this.disassemble=function(r,s){var o=n,a=i;s&&(o=yc,a=yc);var c=e[t.peekmem(r)];if(!c)return["???",r+1];var u=c.split(" ");if(!u[1])return[c,r+1];var l,h,d=u[1]||"",p="",f="",m=d.match(/(.*),([xy])$/);switch(m&&(d=m[1],p=","+m[2].toUpperCase(),f=" + "+m[2].toUpperCase()),d){case"imm":return[u[0]+" #$"+wc(t.peekmem(r+1))+p,r+2];case"abs":var g="JMP"===u[0]||"JSR"===u[0]?a:o;return l=t.peekmem(r+1)|t.peekmem(r+2)<<8,[u[0]+" $"+g(l)+p,r+3,l];case"branch":return l=r+_c(t.peekmem(r+1))+2,[u[0]+" $"+a(l)+p,r+2,l];case"zp":return[u[0]+" $"+wc(t.peekmem(r+1))+p,r+2];case"(,x)":return[u[0]+" ($"+wc(t.peekmem(r+1))+", X)"+p,r+2];case"()":return l=t.peekmem(r+1),l=t.peekmem(l)|t.peekmem(l+1)<<8,[u[0]+" ($"+wc(t.peekmem(r+1))+")"+p+" ; $"+Wa(l)+f,r+2];case"(abs)":return l=t.peekmem(r+1)|t.peekmem(r+2)<<8,h=t.peekmem(l)|t.peekmem(l+1)<<8,[u[0]+" ($"+a(l)+")"+p+" ; $"+Wa(h)+f,r+3,h];case"(abs,x)":return l=t.peekmem(r+1)|t.peekmem(r+2)<<8,h=t.peekmem(l)|t.peekmem(l+1)<<8,[u[0]+" ($"+a(l)+",x)"+p,r+3,h]}return[c,r+1]}},runInstruction:new s,opcodes:e,getInstruction:i}}function Dc(t,e){var n={ora:0,orb:0,ira:0,irb:0,ddra:0,ddrb:0,sr:0,t1l:0,t2l:0,t1c:0,t2c:0,acr:0,pcr:0,ifr:0,ier:0,t1hit:!1,t2hit:!1,portapins:0,portbpins:0,ca1:!1,ca2:!1,cb1:!1,cb2:!1,ca2changecallback:null,cb2changecallback:null,justhit:0,t1_pb7:0,reset:function(){n.ora=n.orb=0,n.ddra=n.ddrb=0,n.ifr=n.ier=0,n.t1c=n.t1l=n.t2c=n.t2l=131070,n.t1hit=n.t2hit=!0,n.acr=n.pcr=0,n.t1_pb7=1},polltime:function(t){t|=0,n.justhit=0;var e=n.t1c-t;for(e<-2&&n.t1c>-3&&(n.t1hit||(n.ifr|=64,n.updateIFR(),-3===e&&(n.justhit|=1),n.t1_pb7=!n.t1_pb7),64&this.acr||(n.t1hit=!0));e<-3;)e+=n.t1l+4;if(n.t1c=e,!(32&n.acr)){var i=n.t2c-t;i<-2&&(n.t2hit||(n.ifr|=32,n.updateIFR(),-3===i&&(n.justhit|=2),n.t2hit=!0),i+=131072),n.t2c=i}},updateIFR:function(){n.ifr&n.ier&127?(n.ifr|=128,t.interrupt|=e):(n.ifr&=-129,t.interrupt&=~e)},write:function(t,e){var i;switch(e|=0,15&t){case 1:n.ifr&=-3,2!=(10&n.pcr)&&(n.ifr&=-2),n.updateIFR(),8===(i=14&n.pcr)?n.setca2(!1):10===i&&(n.setca2(!1),n.setca2(!0));case 15:n.ora=e,n.recalculatePortAPins();break;case 0:n.ifr&=-17,32!=(160&n.pcr)&&(n.ifr&=-9),n.updateIFR(),n.orb=e,n.recalculatePortBPins(),8===(i=(224&n.pcr)>>>4)?n.setcb2(!1):10===i&&(n.setcb2(!1),n.setcb2(!0));break;case 3:n.ddra=e,n.recalculatePortAPins();break;case 2:n.ddrb=e,n.recalculatePortBPins();break;case 11:n.acr=e,1&n.justhit&&!(64&e)&&(n.t1hit=!0);break;case 12:n.pcr=e,12==(14&e)?n.setca2(!1):8&e&&n.setca2(!0),192==(224&e)?n.setcb2(!1):128&e&&n.setcb2(!0);break;case 10:n.sr=e;break;case 6:case 4:n.t1l&=130560,n.t1l|=e<<1;break;case 7:n.t1l&=510,n.t1l|=e<<9,1&n.justhit||(n.ifr&=-65,n.updateIFR());break;case 5:n.t1l&=510,n.t1l|=e<<9,n.t1c=n.t1l+1,n.t1hit=!1,1&n.justhit||(n.ifr&=-65,n.updateIFR()),n.t1_pb7=0;break;case 8:n.t2l&=130560,n.t2l|=e<<1;break;case 9:n.t2l&=510,n.t2l|=e<<9,n.t2c=n.t2l+1,32&n.acr&&(n.t2c-=2),2&n.justhit||(n.ifr&=-33,n.updateIFR()),n.t2hit=!1;break;case 14:128&e?n.ier|=127&e:n.ier&=~(127&e),n.updateIFR();break;case 13:n.ifr&=~(127&e),1&n.justhit&&(n.ifr|=64),2&n.justhit&&(n.ifr|=32),n.updateIFR()}},read:function(t){var e;switch(15&t){case 1:n.ifr&=-3,2!=(10&n.pcr)&&(n.ifr&=-2),n.updateIFR();case 15:return 1&n.acr?n.ira:(n.recalculatePortAPins(),n.portapins);case 0:n.ifr&=-17,32!=(160&n.pcr)&&(n.ifr&=-9),n.updateIFR(),n.recalculatePortBPins(),e=n.orb&n.ddrb,2&n.acr?e|=n.irb&~n.ddrb:e|=n.portbpins&~n.ddrb,128&n.acr&&(e&=127,e|=n.t1_pb7<<7);var i=this.getJoysticks();return e&=207,i.button1||(e|=16),i.button2||(e|=32),e;case 3:return n.ddra;case 2:return n.ddrb;case 6:return(510&n.t1l)>>>1&255;case 7:return n.t1l>>>9&255;case 4:return 1&n.justhit||(n.ifr&=-65,n.updateIFR()),n.t1c+1>>>1&255;case 5:return n.t1c+1>>>9&255;case 8:return 2&n.justhit||(n.ifr&=-33,n.updateIFR()),n.t2c+1>>>1&255;case 9:return n.t2c+1>>>9&255;case 10:return n.sr;case 11:return n.acr;case 12:return n.pcr;case 14:return 128|n.ier;case 13:return n.ifr;default:throw"Unknown VIA read"}},recalculatePortAPins:function(){n.portapins=n.ora&n.ddra,n.portapins|=255&~n.ddra,n.drivePortA(),n.portAUpdated()},recalculatePortBPins:function(){n.portbpins=n.orb&n.ddrb,n.portbpins|=255&~n.ddrb,n.drivePortB(),n.portBUpdated()},setca1:function(t){t!==n.ca1&&(!!(1&n.pcr)===t&&(1&n.acr&&(n.ira=n.portapins),n.ifr|=2,n.updateIFR(),8==(12&n.pcr)&&n.setca2(!0)),n.ca1=t)},setca2:function(t){if(t!==n.ca2){n.ca2=t;var e=!!(8&n.pcr);if(n.ca2changecallback&&n.ca2changecallback(t,e),!e)!!(4&n.pcr)===t&&(n.ifr|=1,n.updateIFR())}},setcb1:function(t){t!==n.cb1&&(!!(16&n.pcr)===t&&(2&n.acr&&(n.irb=n.portbpins),n.ifr|=16,n.updateIFR(),128==(192&n.pcr)&&n.setcb2(!0)),n.cb1=t)},setcb2:function(t){if(t!==n.cb2){n.cb2=t;var e=!!(128&n.pcr);if(n.cb2changecallback&&n.cb2changecallback(t,e),!e)!!(64&n.pcr)===t&&(n.ifr|=8,n.updateIFR())}}};return n}function Oc(t,e,n,i,r,s,o){var a=Dc(t,1);a.IC32=0,a.capsLockLight=!1,a.shiftLockLight=!1,a.keys=[];for(var c=0;c<16;++c)a.keys[c]=new Uint8Array(16);function u(){for(var t=0;t<a.keys.length;++t)for(var e=0;e<a.keys[t].length;++e)a.keys[t][e]=!1;a.updateKeys()}return a.setVBlankInt=a.setca1,a.setKeyLayout=function(t){a.keycodeToRowCol=function(t){var e=[];function n(t,n,i){e[i][t]&&e[i][t]!==n&&console.log("Warning: duplicate binding for key",(i?"<SHIFT>":"")+t,n,e[i][t]),e[i][t]=n}function i(t,e,i){(t||0===t)&&e||console.log("error binding key",t,e),"string"==typeof t&&(t=t.charCodeAt(0)),void 0===i?(n(t,e,!0),n(t,e,!1)):n(t,e,i)}for(e[!0]={},e[!1]={},i(za.Q,Ha.Q),i(za.W,Ha.W),i(za.E,Ha.E),i(za.R,Ha.R),i(za.T,Ha.T),i(za.Y,Ha.Y),i(za.U,Ha.U),i(za.I,Ha.I),i(za.O,Ha.O),i(za.P,Ha.P),i(za.A,Ha.A),i(za.S,Ha.S),i(za.D,Ha.D),i(za.F,Ha.F),i(za.G,Ha.G),i(za.H,Ha.H),i(za.J,Ha.J),i(za.K,Ha.K),i(za.L,Ha.L),i(za.Z,Ha.Z),i(za.X,Ha.X),i(za.C,Ha.C),i(za.V,Ha.V),i(za.B,Ha.B),i(za.N,Ha.N),i(za.M,Ha.M),i(za.F10,Ha.F0),i(za.F1,Ha.F1),i(za.F2,Ha.F2),i(za.F3,Ha.F3),i(za.F4,Ha.F4),i(za.F5,Ha.F5),i(za.F6,Ha.F6),i(za.F7,Ha.F7),i(za.F8,Ha.F8),i(za.F9,Ha.F9),i(za.COMMA,Ha.COMMA),i(za.PERIOD,Ha.PERIOD),i(za.SLASH,Ha.SLASH),i(za.SPACE,Ha.SPACE),i(za.TAB,Ha.TAB),i(za.ENTER,Ha.RETURN),i(za.SHIFT,Ha.SHIFT),i(za.SHIFT_RIGHT,Ha.SHIFT),i(za.LEFT,Ha.LEFT),i(za.UP,Ha.UP),i(za.RIGHT,Ha.RIGHT),i(za.DOWN,Ha.DOWN),"natural"===t?(i(za.SHIFT_LEFT,Ha.SHIFT),i(za.BACK_QUOTE,Ka?Ha.UNDERSCORE_POUND:Ha.HAT_TILDE),i(za.APOSTROPHE,Ka?Ha.AT:Ha.K2,!0),i(za.K2,Ka?Ha.K2:Ha.AT,!0),i(za.K3,Ha.UNDERSCORE_POUND,!0),i(za.K7,Ha.K6,!0),i(za.K8,Ha.COLON_STAR,!0),i(za.K9,Ha.K8,!0),i(za.K0,Ha.K9,!0),i(za.K2,Ha.K2,!1),i(za.K3,Ha.K3,!1),i(za.K7,Ha.K7,!1),i(za.K8,Ha.K8,!1),i(za.K9,Ha.K9,!1),i(za.K0,Ha.K0,!1),i(za.K1,Ha.K1),i(za.K4,Ha.K4),i(za.K5,Ha.K5),i(za.K6,Ha.K6),i(za.MINUS,Ha.MINUS),i(za.LEFT_SQUARE_BRACKET,Ha.LEFT_SQUARE_BRACKET),i(za.RIGHT_SQUARE_BRACKET,Ha.RIGHT_SQUARE_BRACKET),i(za.SEMICOLON,Ha.SEMICOLON_PLUS),i(za.APOSTROPHE,Ha.COLON_STAR,!1),i(za.HASH,Ha.HAT_TILDE),i(za.EQUALS,Ha.SEMICOLON_PLUS),i(za.WINDOWS,Ha.SHIFTLOCK),i(za.END,Ha.COPY),i(za.F11,Ha.COPY),i(za.ESCAPE,Ha.ESCAPE),i(za.CTRL,Ha.CTRL),i(za.CTRL_LEFT,Ha.CTRL),i(za.CTRL_RIGHT,Ha.CTRL),i(za.CAPSLOCK,Ha.CAPSLOCK),i(za.DELETE,Ha.DELETE),i(za.BACKSPACE,Ha.DELETE),i(za.BACKSLASH,Ha.PIPE_BACKSLASH)):"gaming"===t?(i(za.ESCAPE,Ha.F0),i(za.BACK_QUOTE,Ha.ESCAPE),i(za.K1,Ha.K1),i(za.K2,Ha.K2),i(za.K3,Ha.K3),i(za.K4,Ha.K4),i(za.K5,Ha.K5),i(za.K6,Ha.K6),i(za.K7,Ha.K7),i(za.K8,Ha.K8),i(za.K9,Ha.K9),i(za.K0,Ha.K0),i(za.MINUS,Ha.MINUS),i(za.EQUALS,Ha.HAT_TILDE),i(za.BACKSPACE,Ha.PIPE_BACKSLASH),i(za.INSERT,Ha.LEFT),i(za.HOME,Ha.RIGHT),i(za.LEFT_SQUARE_BRACKET,Ha.AT),i(za.RIGHT_SQUARE_BRACKET,Ha.LEFT_SQUARE_BRACKET),i(za.DELETE,Ha.UP),i(za.END,Ha.DOWN),i(za.CAPSLOCK,Ha.CTRL),i(za.SEMICOLON,Ha.SEMICOLON_PLUS),i(za.APOSTROPHE,Ha.COLON_STAR),i(za.HASH,Ha.RIGHT_SQUARE_BRACKET),i(za.SHIFT_LEFT,Ka?Ha.SHIFTLOCK:Ha.SHIFT),i(za.BACKSLASH,Ka?Ha.SHIFT:Ha.UNDERSCORE_POUND),i(za.CTRL_LEFT,Ha.CAPSLOCK),i(za.ALT_LEFT,Ha.CTRL),i(za.MENU,Ha.DELETE),i(za.CTRL_RIGHT,Ha.COPY),i(za.ALT_RIGHT,Ha.SHIFTLOCK),i(za.WINDOWS,Ha.SHIFTLOCK)):(i(za.K1,Ha.K1),i(za.K2,Ha.K2),i(za.K3,Ha.K3),i(za.K4,Ha.K4),i(za.K5,Ha.K5),i(za.K6,Ha.K6),i(za.K7,Ha.K7),i(za.K8,Ha.K8),i(za.K9,Ha.K9),i(za.K0,Ha.K0),i(za.SHIFT_LEFT,Ha.SHIFT),i(za.EQUALS,Ha.HAT_TILDE),i(za.SEMICOLON,Ha.SEMICOLON_PLUS),i(za.MINUS,Ha.MINUS),i(za.LEFT_SQUARE_BRACKET,Ha.LEFT_SQUARE_BRACKET),i(za.RIGHT_SQUARE_BRACKET,Ha.RIGHT_SQUARE_BRACKET),i(za.COMMA,Ha.COMMA),i(za.PERIOD,Ha.PERIOD),i(za.SLASH,Ha.SLASH),i(za.WINDOWS,Ha.SHIFTLOCK),i(za.TAB,Ha.TAB),i(za.ENTER,Ha.RETURN),i(za.DELETE,Ha.DELETE),i(za.BACKSPACE,Ha.DELETE),i(za.END,Ha.COPY),i(za.F11,Ha.COPY),i(za.SHIFT,Ha.SHIFT),i(za.ESCAPE,Ha.ESCAPE),i(za.CTRL,Ha.CTRL),i(za.CTRL_LEFT,Ha.CTRL),i(za.CTRL_RIGHT,Ha.CTRL),i(za.CAPSLOCK,Ha.CAPSLOCK),i(za.LEFT,Ha.LEFT),i(za.UP,Ha.UP),i(za.RIGHT,Ha.RIGHT),i(za.DOWN,Ha.DOWN),i(za.APOSTROPHE,Ha.COLON_STAR),i(za.HASH,Ha.RIGHT_SQUARE_BRACKET),i(za.BACK_QUOTE,Ha.AT),i(za.BACKSLASH,Ha.PIPE_BACKSLASH),i(za.PAGEUP,Ha.UNDERSCORE_POUND)),i(za.NUMPAD0,Ha.NUMPAD0),i(za.NUMPAD1,Ha.NUMPAD1),i(za.NUMPAD2,Ha.NUMPAD2),i(za.NUMPAD3,Ha.NUMPAD3),i(za.NUMPAD4,Ha.NUMPAD4),i(za.NUMPAD5,Ha.NUMPAD5),i(za.NUMPAD6,Ha.NUMPAD6),i(za.NUMPAD7,Ha.NUMPAD7),i(za.NUMPAD8,Ha.NUMPAD8),i(za.NUMPAD9,Ha.NUMPAD9),i(za.NUMPAD_DECIMAL_POINT,Ha.NUMPAD_DECIMAL_POINT),i(za.NUMPADPLUS,Ha.NUMPADPLUS),i(za.NUMPADMINUS,Ha.NUMPADMINUS),i(za.NUMPADSLASH,Ha.NUMPADSLASH),i(za.NUMPADASTERISK,Ha.NUMPADASTERISK),i(za.NUMPADENTER,Ha.NUMPADENTER);Ua.length>0;){var r=Ua.pop();i(za[r.native],Ha[r.bbc])}return e}(t)},a.setKeyLayout(s),a.keyboardEnabled=!0,a.clearKeys=u,a.disableKeyboard=function(){a.keyboardEnabled=!1,u()},a.enableKeyboard=function(){a.keyboardEnabled=!0,u()},a.set=function(t,e,n){if(a.keyboardEnabled){var i=a.keycodeToRowCol[!!n][t];i&&(a.keys[i[0]][i[1]]=e,a.updateKeys())}},a.keyDown=function(t,e){a.set(t,1,e)},a.keyUp=function(t){a.set(t,0,!0),a.set(t,0,!1)},a.keyDownRaw=function(t){a.keys[t[0]][t[1]]=1,a.updateKeys()},a.keyUpRaw=function(t){a.keys[t[0]][t[1]]=0,a.updateKeys()},a.keyToggleRaw=function(t){a.keys[t[0]][t[1]]=1-a.keys[t[0]][t[1]],a.updateKeys()},a.hasAnyKeyDown=function(){var t,e;for(t=0;t<13;++t)for(e=0;e<8;++e)if(a.keys[t][e])return!0;return!1},a.updateKeys=function(){var t,e;if(8&a.IC32){for(t=0;t<13;++t)for(e=1;e<8;++e)if(a.keys[t][e])return void a.setca2(!0)}else{var n=a.portapins,i=n>>>4&7,r=15&n;if(a.keys[r][i]?128&a.ddra||(a.portapins|=128):a.portapins&=127,r<13)for(e=1;e<8;++e)if(a.keys[r][e])return void a.setca2(!0)}a.setca2(!1)},a.portAUpdated=function(){a.updateKeys(),n.updateSlowDataBus(a.portapins,!(1&a.IC32))},a.portBUpdated=function(){var t=a.portbpins;8&t?a.IC32|=1<<(7&t):a.IC32&=~(1<<(7&t)),a.capsLockLight=!(64&a.IC32),a.shiftLockLight=!(128&a.IC32),e.setScreenAdd((16&a.IC32?2:0)|(32&a.IC32?1:0)),r&&i.writeControl(t,a.portapins,a.IC32),a.recalculatePortAPins()},a.drivePortA=function(){var t=255;r&&(t&=i.read(a.IC32)),a.portapins&=t,a.updateKeys()},a.drivePortB=function(){},a.getGamepads=function(){return o?o():null},a.getJoysticks=function(){var t=!1,e=!1,n=a.getGamepads();if(n&&n[0]){var i=n[0],r=n[1];t=i.buttons[10].pressed,e=r?r.buttons[10].pressed:i.buttons[11].pressed}return{button1:t,button2:e}},a.reset(),a}function Lc(t,e,n,i){var r=this;function s(){r.sr&r.cr&128?t.interrupt|=4:t.interrupt&=-5}function o(){r.tape&&r.runTapeTask.reschedule(r.tape.poll(r))}r.sr=0,r.cr=0,r.dr=0,r.rs423Handler=i,r.rs423Selected=!1,r.motorOn=!1,r.tapeCarrierCount=0,r.tapeDcdLineLevel=!1,r.hadDcdHigh=!1,r.reset=function(){r.sr&=12,r.sr|=2,r.hadDcdHigh=!1,s()},r.reset(),r.tone=function(t){t?e.tone(t):e.mute()},r.setMotor=function(t){t&&!r.motorOn?o():!t&&r.motorOn&&(e.mute(),r.runTapeTask.cancel(),r.setTapeCarrier(!1)),r.motorOn=t},r.read=function(t){if(1&t)return r.sr&=-162,r.hadDcdHigh=!1,s(),r.dr;var e=127&r.sr|r.sr&r.cr&128;return 8&e&&(e&=-3),r.hadDcdHigh&&(e|=4),e},r.write=function(t,e){1&t?(r.sr&=-3,r.txCompleteTask.reschedule(2e3),s(),r.rs423Selected&&r.rs423Handler&&r.rs423Handler.onTransmit(e)):3==(3&e)?r.reset():(r.cr=e,r.setSerialReceive(r.serialReceiveRate))},r.selectRs423=function(t){r.rs423Selected=!!t,r.rs423Selected?r.sr|=8:r.sr&=-9,r.dcdLineUpdated(),r.runRs423Task.ensureScheduled(r.rs423Selected,r.serialReceiveCyclesPerByte)},r.dcdLineUpdated=function(){var t;!(t=!r.rs423Selected&&r.tapeDcdLineLevel)||4&r.sr?!t&&4&r.sr&&(r.sr&=-5):(r.sr|=132,r.hadDcdHigh=!0),s()},r.setTapeCarrier=function(t){t?(r.tapeCarrierCount++,209===r.tapeCarrierCount?r.tapeDcdLineLevel=!0:r.tapeDcdLineLevel=!1):(r.tapeCarrierCount=0,r.tapeDcdLineLevel=!1),r.dcdLineUpdated()},r.receive=function(t){t|=0,1&r.sr?(console.log("Serial overrun"),r.sr|=160):(r.dr=t&(16&r.cr?255:127),r.sr|=129),s()},r.setTape=function(t){r.tape=t},r.rewindTape=function(){r.tape&&(console.log("rewinding tape"),r.tape.rewind())},r.secondsToCycles=function(t){return 0|Math.floor(2e6*t)},r.serialReceiveRate=0,r.serialReceiveCyclesPerByte=0,r.numBitsPerByte=function(){var t,e,n=16&r.cr?8:7;switch(r.cr>>>2&7){case 0:case 1:t=2,e=1;break;case 2:case 3:case 6:case 7:t=1,e=1;break;case 4:t=2,e=0;break;case 5:t=1,e=0}return n+t+e},r.rts=function(){return 0==(64&r.cr)||96==(96&r.cr)},r.setSerialReceive=function(t){r.serialReceiveRate=t,r.serialReceiveCyclesPerByte=r.secondsToCycles(r.numBitsPerByte()/t)},r.setSerialReceive(19200),r.txCompleteTask=n.newTask((function(){r.sr|=2})),r.runTapeTask=n.newTask(o),r.runRs423Task=n.newTask((function(){if(i){var t=r.rs423Handler.tryReceive(r.rts());t>=0&&r.receive(t),r.runRs423Task.reschedule(r.serialReceiveCyclesPerByte)}}))}function Pc(t){var e=this;function n(){e.reg=0,e.transmitRate=0,e.receiveRate=0}var i=[19200,9600,4800,2400,1200,300,150,75];function r(n,r){r&=255,e.reg=r,e.transmitRate=7&r,e.receiveRate=r>>>3&7,t.setSerialReceive(i[e.receiveRate]),t.setMotor(!!(128&r)),t.selectRs423(!!(64&r))}e.reset=n,e.write=r,e.read=function(){return r(0,254),0},n()}function Ic(t,e){this.hostCpu=t,this.parasiteCpu=e,this.ph1=new Uint8Array(24),this.ph2=0,this.ph3=new Uint8Array(2),this.ph4=0,this.hp1=0,this.hp2=0,this.hp3=new Uint8Array(2),this.hp4=0,this.hstat=new Uint8Array(4),this.pstat=new Uint8Array(4),this.r1stat=0,this.ph1pos=0,this.ph3pos=0,this.hp3pos=0,this.debug=!1}function Nc(t,e){this.sysvia=t,this.task=e.newTask(this.onComplete.bind(this)),this.status=64,this.low=0,this.high=0}Ic.prototype.updateInterrupts=function(){this.hostCpu.interrupt&=-9,1&this.r1stat&&128&this.hstat[3]&&(this.hostCpu.interrupt|=8),this.parasiteCpu.interrupt=!!(2&this.r1stat&&128&this.pstat[0]||4&this.r1stat&&128&this.pstat[3]);var t=16&this.r1stat?1:0;this.parasiteCpu.nmi=!!(8&this.r1stat&&(this.hp3pos>t||0===this.ph3pos))},Ic.prototype.reset=function(){this.ph1pos=this.hp3pos=0,this.ph3pos=1,this.r1stat=0,this.hstat[0]=this.hstat[1]=this.hstat[3]=64,this.hstat[2]=192,this.pstat[0]=this.pstat[1]=this.pstat[2]=this.pstat[3]=64},Ic.prototype.hostRead=function(t){var e=254;switch(7&t){case 0:e=192&this.hstat[0]|this.r1stat;break;case 1:e=this.ph1[0];for(var n=0;n<23;++n)this.ph1[n]=this.ph1[n+1];this.pstat[0]|=64,--this.ph1pos||(this.hstat[0]&=-129);break;case 2:e=this.hstat[1];break;case 3:e=this.ph2,128&this.hstat[1]&&(this.hstat[1]&=-129,this.pstat[1]|=64);break;case 4:e=this.hstat[2];break;case 5:e=this.ph3[0],this.ph3pos>0&&(this.ph3[0]=this.ph3[1],this.pstat[2]|=192,--this.ph3pos||(this.hstat[2]&=-129));break;case 6:e=this.hstat[3];break;case 7:e=this.ph4,128&this.hstat[3]&&(this.hstat[3]&=-129,this.pstat[3]|=64)}return this.updateInterrupts(),this.debug&&console.log("host read "+Wa(t)+" = "+Ga(e)),e},Ic.prototype.hostWrite=function(t,e){switch(this.debug&&console.log("host write "+Wa(t)+" = "+Ga(e)),7&t){case 0:128&e?this.r1stat|=63&e:this.r1stat&=~(63&e),this.hstat[0]=192&this.hstat[0]|63&e;break;case 1:this.hp1=e,this.pstat[0]|=128,this.hstat[0]&=-65;break;case 3:this.hp2=e,this.pstat[1]|=128,this.hstat[1]&=-65;break;case 5:16&this.r1stat?(this.hp3pos<2&&(this.hp3[this.hp3pos++]=e),2===this.hp3pos&&(this.pstat[2]|=128,this.hstat[2]&=-65)):(this.hp3[0]=e,this.hp3pos=1,this.pstat[2]|=128,this.hstat[2]&=-65);break;case 7:this.hp4=e,this.pstat[3]|=128,this.hstat[3]&=-65}this.updateInterrupts()},Ic.prototype.parasiteRead=function(t){var e=0;switch(7&t){case 0:e=this.pstat[0]|this.r1stat;break;case 1:e=this.hp1,128&this.pstat[0]&&(this.pstat[0]&=-129,this.hstat[0]|=64);break;case 2:e=this.pstat[1];break;case 3:e=this.hp2,128&this.pstat[1]&&(this.pstat[1]&=-129,this.hstat[1]|=64);break;case 4:e=this.pstat[2];break;case 5:e=this.hp3[0],this.hp3pos>0&&(this.hp3[0]=this.hp3[1],--this.hp3pos||(this.pstat[2]&=-129,this.hstat[2]|=64));break;case 6:e=this.pstat[3];break;case 7:e=this.hp4,128&this.pstat[3]&&(this.pstat[3]&=-129,this.hstat[3]|=64)}return this.updateInterrupts(),this.debug&&console.log("parasite read "+Wa(t)+" = "+Ga(e)),e},Ic.prototype.parasiteWrite=function(t,e){switch(this.debug&&console.log("parasite write "+Wa(t)+" = "+Ga(e)),7&t){case 1:this.ph1pos<24&&(this.ph1[this.ph1pos++]=e,this.hstat[0]|=128,24===this.ph1pos&&(this.pstat[0]&=-65));break;case 3:this.ph2=e,this.hstat[1]|=128,this.pstat[1]&=-65;break;case 5:16&this.r1stat?(this.ph3pos<2&&(this.ph3[this.ph3pos++]=e),2===this.ph3pos&&(this.hstat[2]|=128,this.pstat[2]&=-65)):(this.ph3[0]=e,this.ph3pos=1,this.hstat[2]|=128,this.pstat[2]&=-193);break;case 7:this.ph4=e,this.hstat[3]|=128,this.pstat[3]&=-65}this.updateInterrupts()},Nc.prototype.read=function(t){switch(3&t){case 0:return this.status;case 1:return this.high;case 2:return this.low}return 64},Nc.prototype.write=function(t,e){0==(3&t)&&(this.task.cancel(),this.task.schedule(8&e?2e4:8e3),this.status=15&e|128,this.sysvia.setcb1(!0))},Nc.prototype.onComplete=function(){var t=32768,e=this.sysvia.getGamepads();if(e&&e[0]){var n=e[0],i=e[1],r=0;switch(Math.floor(3&this.status)){default:case 0:r=n.axes[0];break;case 1:r=n.axes[1];break;case 2:r=i?i.axes[0]:n.axes[2];break;case 3:r=i?i.axes[1]:n.axes[3]}t=Math.floor((1-r)/2*65535)}this.status=15&this.status|64|t>>>10&3,this.low=255&t,this.high=t>>>8&255,this.sysvia.setcb1(!1)};function Mc(){this.scheduled=null,this.epoch=0}function Bc(t,e){this.scheduler=t,this.prev=this.next=null,this.expireEpoch=0,this.onExpire=e,this._scheduled=!1}function Fc(t){var e=this,n=25e4;function i(t,e,n){return(t=(t-n)/(1-2*n))*e}this.scheduler=t,this.mouse=[],this.outBuffer=new pc(16),this.delay=0,this.mode=0,this.onMouse=function(t,e,n){this.mouse={x:t,y:e,button:n}},this.poll=function(){e.doRead(),e.pollTask.reschedule(n)},this.pollTask=this.scheduler.newTask(this.poll),this.onTransmit=function(t){switch(String.fromCharCode(t)){case"M":e.mode=0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":e.mode=10*e.mode+t-"0".charCodeAt(0);break;case".":break;case"?":1===e.mode&&e.doRead()}e.pollTask.ensureScheduled(129===e.mode||130===e.mode,n)},this.tryReceive=function(t){return e.outBuffer.size&&t?e.outBuffer.get():-1},this.store=function(t){e.outBuffer.put(t)},this.doRead=function(){var t=i(e.mouse.x,120,.13),n=i(1-e.mouse.y,100,.03),r=[79,79,79,79],s=0|Math.min(255,Math.max(0,t)),o=0|Math.min(255,Math.max(0,n));e.mouse.button&&(r[0]=64|(240&s)>>>4,r[1]=64|15&s,r[2]=64|(240&o)>>>4,r[3]=64|15&o);for(var a=0;a<4;++a)e.store(r[a]);e.store(".".charCodeAt(0))}}Mc.prototype.schedule=function(t,e){if(t.scheduler!==this)throw new Error("Wrong scheduler for task, or non-task");if(t.scheduled())throw new Error("Task is already scheduled");var n=e+this.epoch;t.expireEpoch=n,t._scheduled=!0;for(var i=this.scheduled,r=null;i&&i.expireEpoch<=n;)r=i,i=i.next;t.next=i,t.prev=r,t.next&&(t.next.prev=t),t.prev?t.prev.next=t:this.scheduled=t},Mc.prototype.cancel=function(t){t.scheduled()&&(t.prev?t.prev.next=t.next:this.scheduled=t.next,t.next&&(t.next.prev=t.prev),t.next=t.prev=null,t._scheduled=!1)},Mc.prototype.polltime=function(t){for(var e=this.epoch+t;this.scheduled&&this.scheduled.expireEpoch<=e;){var n=this.scheduled;this.epoch=n.expireEpoch,n.cancel(),n.onExpire()}this.epoch=e},Mc.prototype.headroom=function(){return null===this.scheduled?4294967295:this.scheduled.expireEpoch-this.epoch},Mc.prototype.newTask=function(t){return new Bc(this,t)},Bc.prototype.scheduled=function(){return this._scheduled},Bc.prototype.schedule=function(t){this.scheduler.schedule(this,t)},Bc.prototype.reschedule=function(t){this.scheduler.cancel(this),this.scheduler.schedule(this,t)},Bc.prototype.cancel=function(){this.scheduler.cancel(this)},Bc.prototype.ensureScheduled=function(t,e){t?this.scheduled()||this.schedule(e):this.cancel()};function Uc(t){var e=this;this.cpu=t,this.teletextStatus=15,this.teletextInts=!1,this.teletextEnable=!1,this.channel=0,this.currentFrame=0,this.rowPtr=0,this.colPtr=0,this.frameBuffer=new Array(16).fill(0).map((()=>new Array(64).fill(0))),this.pollCount=0,this.reset=function(t){t&&(console.log("Teletext adaptor: initialisation"),this.loadChannelStream(this.channel))},this.loadChannelStream=function(t){console.log("Teletext adaptor: switching to channel "+t),tc("teletext/txt"+t+".dat").then((function(t){e.streamData=t,e.totalFrames=t.length/860,e.currentFrame=0}))},this.read=function(t){var e=0;switch(t){case 0:e=this.teletextStatus;break;case 1:break;case 2:e=this.frameBuffer[this.rowPtr][this.colPtr++];break;case 3:this.teletextStatus&=-209,this.cpu.interrupt&=-33}return e},this.write=function(t,e){switch(t){case 0:this.teletextInts=8==(8&e),this.teletextInts&&128&this.teletextStatus?this.cpu.interrupt|=32:this.cpu.interrupt&=-33,this.teletextEnable=4==(4&e),(3&e)!=this.channel&&this.teletextEnable&&(this.channel=3&e,this.loadChannelStream(this.channel));break;case 1:this.rowPtr=e,this.colPtr=0;break;case 2:this.frameBuffer[this.rowPtr][this.colPtr++]=255&e;break;case 3:this.teletextStatus&=-209,this.cpu.interrupt&=-33}},this.polltime=function(t){this.pollCount+=t,this.pollCount>5e4&&(this.pollCount=0,this.cpu.resetLine?this.update():this.pollCount=-5e5)},this.update=function(){this.currentFrame>=this.totalFrames&&(this.currentFrame=0);var t=860*this.currentFrame+129;if(this.teletextStatus&=15,this.teletextStatus|=208,this.teletextEnable)for(var e=0;e<16;++e)if(0!=this.streamData[t+43*e]){this.frameBuffer[e][0]=103;for(var n=1;n<=42;n++)this.frameBuffer[e][n]=this.streamData[t+(43*e+(n-1))]}else this.frameBuffer[e][0]=0;this.currentFrame++,this.rowPtr=0,this.colPtr=0,this.teletextInts&&(this.cpu.interrupt|=32)}}const Hc=16,jc=1792,zc=128;function Kc(){this.waveRam=new Uint8Array(2048),this.phaseRam=new Uint32Array(Hc),this.cycleCount=0,this.curCh=0,this.activeRegSet=0,this.sampleLeft=0,this.sampleRight=0,this.chordBase=new Array(0,8.25,24.75,57.75,123.75,255.75,519.75,1047.75),this.stepInc=new Array(.5,1,2,4,8,16,32,64),this.stereoLeft=new Array(100,100,100,100,100,100,100,100,0,0,0,17,33,50,67,83),this.stereoRight=new Array(0,0,0,0,0,0,0,0,100,100,100,83,67,50,33,17),this.D2ATable=new Uint16Array(128),this.sampleBuffer=new Float64Array(256),this.position=0,this.initialise=function(t){this.audioWorkletNode=t},this.reset=function(t){if(t){console.log("Music 5000: initialisation");for(var e=0,n=0;n<8;n++)for(var i=this.chordBase[n],r=0;r<16;r++)this.D2ATable[e]=parseInt(4*i),i+=this.stepInc[n],e++}for(var s=0;s<2048;s++)this.waveRam[s]=0;for(var o=0;o<Hc;o++)this.phaseRam[o]=0},this.read=function(t,e){var n=((14&t)<<7)+e;return this.waveRam[n]},this.write=function(t,e,n){var i=((14&t)<<7)+(255&e);this.waveRam[i]=n},this.cReg_freqLow=function(t,e){return this.waveRam[jc+e*zc+0+t]},this.cReg_freqMedium=function(t,e){return this.waveRam[jc+e*zc+16+t]},this.cReg_freqHigh=function(t,e){return this.waveRam[jc+e*zc+32+t]},this.cReg_waveformReg=function(t,e){return this.waveRam[jc+e*zc+80+t]},this.cReg_amplitudeReg=function(t,e){return this.waveRam[jc+e*zc+96+t]},this.cReg_controlReg=function(t,e){return this.waveRam[jc+e*zc+112+t]},this.waveTableVal=function(t,e){return this.waveRam[128*t+e]},this.polltime=function(t){var e,n,i,r,s,o,a,c,u=0;for(this.cycleCount+=3*t;this.cycleCount>=8;){1&this.cReg_freqLow(this.curCh,this.activeRegSet)?(this.phaseRam[this.curCh]=0,e=0):(n=(this.cReg_freqHigh(this.curCh,this.activeRegSet)<<16)+(this.cReg_freqMedium(this.curCh,this.activeRegSet)<<8)+(254&this.cReg_freqLow(this.curCh,this.activeRegSet)),this.phaseRam[this.curCh]+=n,e=this.phaseRam[this.curCh]&1<<24,this.phaseRam[this.curCh]&=16777215),i=this.phaseRam[this.curCh]>>17&127,r=this.cReg_waveformReg(this.curCh,this.activeRegSet)>>4,a=this.waveTableVal(r,i),s=this.cReg_amplitudeReg(this.curCh,this.activeRegSet),o=this.cReg_controlReg(this.curCh,this.activeRegSet),c=128&a,a&=127,this.activeRegSet=32&o&&(c||e)?1:0,s>128&&(s=128),a=a*s/128;var l=this.D2ATable[parseInt(a)];16&o&&(c^=128),c&&(l=-l),u=15&o,this.sampleLeft+=l*this.stereoLeft[u]/100,this.sampleRight+=l*this.stereoRight[u]/100,this.curCh++,this.curCh==Hc&&(this.curCh=0,this.activeRegSet=0,this.sampleLeft<-32768?this.sampleLeft=-32768:this.sampleLeft>32767&&(this.sampleLeft=32767),this.sampleRight<-32768?this.sampleRight=-32768:this.sampleRight>32767&&(this.sampleRight=32767),this.sampleBuffer[this.position++]=this.sampleLeft,this.sampleBuffer[this.position++]=this.sampleRight,256==this.position&&(this.audioWorkletNode&&this.audioWorkletNode.port.postMessage(this.sampleBuffer),this.position=0),this.sampleLeft=0,this.sampleRight=0),this.cycleCount-=8}}}var Gc=Va;function Wc(){this.reset=function(){this.c=this.z=this.i=this.d=this.v=this.n=!1},this.debugString=function(){return(this.n?"N":"n")+(this.v?"V":"v")+"xx"+(this.d?"D":"d")+(this.i?"I":"i")+(this.z?"Z":"z")+(this.c?"C":"c")},this.asByte=function(){var t=48;return this.c&&(t|=1),this.z&&(t|=2),this.i&&(t|=4),this.d&&(t|=8),this.v&&(t|=64),this.n&&(t|=128),t},this.reset()}function qc(t,e){function n(e){var n=t.a+e+(t.p.c?1:0);t.p.v=!!((t.a^n)&(e^n)&128),t.p.c=!!(256&n),t.a=255&n,t.setzn(t.a)}t.model=e,t.a=t.x=t.y=t.s=0,t.pc=0,t.opcodes=e.nmos?function(t){return Rc(t,Sc,!1)}(t):function(t){return Rc(t,kc,!0)}(t),t.disassembler=new t.opcodes.Disassemble(t),t.forceTracing=!1,t.incpc=function(){t.pc=t.pc+1&65535},t.getb=function(){var e=t.readmem(t.pc);return t.incpc(),0|e},t.getw=function(){var e=0|t.readmem(t.pc);return t.incpc(),e|=(0|t.readmem(t.pc))<<8,t.incpc(),0|e},t.checkInt=function(){t.takeInt=!(!t.interrupt||t.p.i),t.takeInt|=t.nmi},t.setzn=function(e){return e&=255,t.p.z=!e,t.p.n=!!(128&e),0|e},t.push=function(e){t.writememZpStack(256+t.s,e),t.s=t.s-1&255},t.pull=function(){return t.s=t.s+1&255,t.readmemZpStack(256+t.s)},t.NMI=function(e){t.nmi=!!e},t.brk=function(n){var i=t.pc;n||(i=i+1&65535),t.readmem(i),t.push(i>>>8),t.push(255&i);var r=t.p.asByte();n&&(r&=-17),t.push(r),t.polltime(4);var s=65534;(e.nmos||n)&&this.nmi&&(s=65530,t.nmi=!1),t.takeInt=!1,t.pc=t.readmem(s)|t.readmem(s+1)<<8,t.p.i=!0,e.nmos?t.polltime(3):(t.p.d=!1,n?t.polltime(3):(t.polltime(2),t.checkInt(),t.polltime(1)))},t.branch=function(n){var i=Gc(t.getb());if(!n)return t.polltime(1),t.checkInt(),void t.polltime(1);var r=t.pc+i&65535,s=!!(65280&t.pc^65280&r);if(t.pc=r,e.nmos)if(s){t.polltime(1),t.checkInt();var o=t.takeInt;t.polltime(2),t.checkInt(),t.takeInt|=o,t.polltime(1)}else t.polltime(1),t.checkInt(),t.polltime(2);else t.polltime(2+s),t.checkInt(),t.polltime(1)},e.nmos?(t.adc=function(e){t.p.d?function(e){var n=0,i=t.a+e+(t.p.c?1:0)&255;t.p.z=!i;var r=(15&t.a)+(15&e)+(t.p.c?1:0);r>9&&(r-=10,r&=15,n=1),n+=(t.a>>>4)+(e>>>4),t.p.n=!!(8&n),t.p.v=!(128&(t.a^e)||!(128&(t.a^n<<4))),t.p.c=!1,n>9&&(t.p.c=!0,n-=10,n&=15),t.a=255&(15&r|n<<4)}(e):n(e)},t.sbc=function(e){t.p.d?function(e){var n=t.p.c?0:1,i=(15&t.a)-(15&e)-n,r=(t.a>>>4)-(e>>>4);16&i&&(i=i-6&15,r--),16&r&&(r=r-6&15);var s=t.a-e-n;t.p.n=!!(128&s),t.p.z=!(255&s),t.p.v=!!((t.a^s)&(e^t.a)&128),t.p.c=!(256&s),t.a=i|r<<4}(e):n(255^e)}):(t.adc=function(e){t.p.d?function(e){t.polltime(1);var n=t.p.c?1:0,i=(15&t.a)+(15&e)+n,r=(t.a>>>4)+(e>>>4);i>9&&(i=i-10&15,r++),t.p.v=!(128&(t.a^e)||!(128&(t.a^r<<4))),t.p.c=!1,r>9&&(r=r-10&15,t.p.c=!0),t.a=t.setzn(i|r<<4)}(e):n(e)},t.sbc=function(e){t.p.d?function(e){t.polltime(1);var i=t.p.c?0:1,r=(15&t.a)-(15&e)-i,s=t.a-e-i;s<0&&(s-=96),r<0&&(s-=6),n(255^e),t.a=t.setzn(s)}(e):n(255^e)}),t.arr=function(e){if(t.p.d){var n=t.a&e,i=n>>>4,r=15&n;t.p.n=t.p.c,t.a=n>>>1|(t.p.c?128:0),t.p.z=!t.a,t.p.v=64&(n^t.a),r+(1&r)>5&&(t.a=240&t.a|t.a+6&15),t.p.c=i+(1&i)>5,t.p.c&&(t.a=t.a+96&255)}else t.a=t.a&e,t.p.v=!!(1&(t.a>>>7^t.a>>>6)),t.a>>>=1,t.p.c&&(t.a|=128),t.setzn(t.a),t.p.c=!!(64&t.a)},t.runner=t.opcodes.runInstruction}function Xc(t,e){qc(this,t),this.cycles=0,this.romPaged=!0,this.memory=new Uint8Array(65536),this.rom=new Uint8Array(4096),this.p=new Wc,this.tube=new Ic(e,this),this.reset=function(t){this.romPaged=!0,this.pc=this.readmem(65532)|this.readmem(65533)<<8,this.p.i=!0,this.tube.reset(t)},this.readmem=function(t){return 65272==(65528&t)?(0==(7&t)&&(this.romPaged=!1),this.tube.parasiteRead(t)):this.romPaged&&61440==(61440&t)?this.rom[4095&t]:this.memory[65535&t]},this.readmemZpStack=function(t){return this.memory[65535&t]},this.writemem=function(t,e){if(65272==(65528&t))return this.tube.parasiteWrite(t,e);this.memory[65535&t]=e},this.writememZpStack=function(t,e){this.memory[65535&t]=e},this.polltime=function(t){this.cycles-=t},this.polltimeAddr=this.polltime,this.read=function(t){return this.tube.hostRead(t)},this.write=function(t,e){this.tube.hostWrite(t,e)},this.execute=function(t){if(this.cycles+=2*t,!(this.cycles<3))for(;this.cycles>0;){var e=this.readmem(this.pc);this.incpc(),this.runner.run(e),this.takeInt&&this.brk(!0)}},this.loadOs=function(){console.log("Loading tube rom from roms/"+t.os);var e=this.rom;return tc("roms/"+t.os).then((function(t){var n=t.length;if(2048!==n)throw new Error("Broken ROM file (length="+n+")");for(var i=0;i<n;++i)e[i+2048]=t[i]}))}}function Vc(){this.read=function(){return 254},this.write=function(){},this.execute=function(){},this.reset=function(){}}function Yc(){return{write:function(){},read:function(){return 255}}}function $c(t,e,n,i,r,s,o){function a(t,e){this.cpu=t,this.functionName=e,this.handlers=[],this.add=function(t){var e=this;return this.handlers.push(t),this.cpu[this.functionName]||(this.cpu[this.functionName]=function(){for(var t=0;t<e.handlers.length;++t){var n=e.handlers[t];if(n.apply(n,arguments))return e.cpu.stop(),!0}return!1}),t.remove=function(){e.remove(t)},t},this.remove=function(t){var e=this.handlers.indexOf(t);if(e<0)throw"Unable to find debug hook handler";this.handlers=this.handlers.slice(0,e).concat(this.handlers.slice(e+1)),0===this.handlers.length&&(this.cpu[this.functionName]=null)},this.clear=function(){this.handlers=[],this.cpu[this.functionName]=null}}o=function(t){return void 0===t&&(t={}),t.keyLayout||(t.keyLayout="physical"),t.cpuMultiplier||(t.cpuMultiplier=1),t.userPort||(t.userPort=new Yc),void 0===t.printerPort&&(t.printerPort=null),t.extraRoms=t.extraRoms||[],t}(o),qc(this,t),this.video=n,this.soundChip=i,this.ddNoise=r,this.memStatOffsetByIFetchBank=new Uint32Array(16),this.memStatOffset=0,this.memStat=new Uint8Array(512),this.memLook=new Int32Array(512),this.ramRomOs=new Uint8Array(4587520),this.romOffset=131072,this.osOffset=this.romOffset+262144,this.romsel=0,this.acccon=0,this.interrupt=0,this.FEslowdown=[!0,!1,!0,!0,!1,!1,!0,!1],this.oldPcArray=new Uint16Array(256),this.oldAArray=new Uint8Array(256),this.oldXArray=new Uint8Array(256),this.oldYArray=new Uint8Array(256),this.oldPcIndex=0,this.resetLine=!0,this.cpuMultiplier=o.cpuMultiplier,this.videoCyclesBatch=0|o.videoCyclesBatch,this.peripheralCyclesPerSecond=2e6,this.getPrevPc=function(t){return this.oldPcArray[this.oldPcIndex-t&255]},this.tube=t.tube?new Xc(t.tube,this):new Vc,this.JimPageSel=0,this.initialiseM5000=function(t){this.music5000.initialise(t)},this.romSelect=function(e){var n;this.romsel=e;var i=((15&e)<<14)+this.romOffset-32768;for(n=128;n<192;++n)this.memLook[n]=this.memLook[256+n]=i;var r=t.swram[15&e]?1:2;for(n=128;n<192;++n)this.memStat[n]=this.memStat[256+n]=r;if(t.isMaster&&128&e)for(n=128;n<144;++n)this.memLook[n]=this.memLook[256+n]=0,this.memStat[n]=this.memStat[256+n]=1},this.writeAcccon=function(t){this.acccon=t,this.videoDisplayPage=1&t?32768:0;var e,n=!!(2&t),i=!!(4&t),r=!!(8&t);for(e=48;e<128;++e)this.memLook[e]=i?32768:0,this.memLook[e+256]=r?this.memLook[e]:n?32768:0;var s=r?1:2,o=r?-12288:this.osOffset-49152;for(e=192;e<224;++e)this.memLook[e]=this.memLook[e+256]=o,this.memStat[e]=this.memStat[e+256]=s},this._debugRead=this._debugWrite=this._debugInstruction=null,this.readmemZpStack=function(t){t&=65535;var e=this.ramRomOs[t];return this._debugRead&&this._debugRead(t,0,e),0|e},this.writememZpStack=function(t,e){t&=65535,e|=0,this._debugWrite&&this._debugWrite(t,e),this.ramRomOs[t]=e},this.readString=function(t){for(var e="";;){var n=this.readmem(t);if(t++,0===n||13===n)break;e+=String.fromCharCode(n)}return e},this.findString=function(t,e){for(e|=0;e<65535;++e){for(var n=0;n<t.length&&this.readmem(e+n)===t.charCodeAt(n);++n);if(n===t.length)return e}return null},this.readArea=function(t,e){for(var n="",i=0;i<e;++i)n+=Ga(this.readmem(t+i));return n},this.is1MHzAccess=function(t){return(t&=65535)>=64512&&t<65280&&(t<65024||this.FEslowdown[t>>>5&7])},this.readDevice=function(e){if(t.isMaster&&64&this.acccon)return this.ramRomOs[this.osOffset+(16383&e)];if(e&=65535,t.hasMusic5000){if(64767==e)return this.JimPageSel;if(48==(240&this.JimPageSel)&&64768==(65280&e))return this.music5000.read(this.JimPageSel,e)}switch(-4&e){case 64528:if(t.hasTeletextAdaptor)return this.teletextAdaptor.read(e-64528);break;case 64544:case 64548:case 64552:case 64556:case 64560:case 64564:case 64568:case 64572:case 64576:case 64580:case 64584:case 64588:case 64592:case 64596:case 64600:case 64604:break;case 65024:case 65028:return this.crtc.read(e);case 65032:case 65036:return this.acia.read(e);case 65040:case 65044:return this.serial.read(e);case 65048:if(t.isMaster)return this.adconverter.read(e);break;case 65060:case 65064:if(t.isMaster)return this.fdc.read(e);break;case 65072:if(t.isMaster)return 143&this.romsel;break;case 65076:if(t.isMaster)return this.acccon;break;case 65088:case 65092:case 65096:case 65100:case 65104:case 65108:case 65112:case 65116:return this.sysvia.read(e);case 65120:case 65124:case 65128:case 65132:case 65136:case 65140:case 65144:case 65148:return this.uservia.read(e);case 65152:case 65156:case 65160:case 65164:case 65168:case 65172:case 65176:case 65180:if(!t.isMaster)return this.fdc.read(e);break;case 65216:case 65220:case 65224:case 65228:case 65232:case 65236:case 65240:case 65244:if(!t.isMaster)return this.adconverter.read(e);break;case 65248:case 65252:case 65256:case 65260:case 65264:case 65268:case 65272:case 65276:return this.tube.read(e)}return e>=64512&&e<65024?255:e>>>8},this.videoRead=function(t){return 0|this.ramRomOs[t|this.videoDisplayPage]},this.readmem=function(t){t&=65535;var e=0;if(this.memStat[this.memStatOffset+(t>>>8)]){var n=this.memLook[this.memStatOffset+(t>>>8)];return e=this.ramRomOs[n+t],this._debugRead&&this._debugRead(t,e,n),0|e}return e=this.readDevice(t),this._debugRead&&this._debugRead(t,e,0),0|e},this.peekmem=function(t){if(this.memStat[this.memStatOffset+(t>>>8)]){var e=this.memLook[this.memStatOffset+(t>>>8)];return this.ramRomOs[e+t]}return 255},this.writemem=function(t,e){if(t&=65535,e|=0,this._debugWrite&&this._debugWrite(t,e),1!==this.memStat[this.memStatOffset+(t>>>8)])t<64512||t>=65280||this.writeDevice(t,e);else{var n=this.memLook[this.memStatOffset+(t>>>8)];this.ramRomOs[n+t]=e}},this.writeDevice=function(e,n){if(n|=0,t.hasMusic5000){if(64767==e)return void(this.JimPageSel=n);if(48==(240&this.JimPageSel)&&64768==(65280&e))return void this.music5000.write(this.JimPageSel,e,n)}switch(-4&e){case 64528:if(t.hasTeletextAdaptor)return this.teletextAdaptor.write(e-64528,n);break;case 64544:case 64548:case 64552:case 64556:case 64560:case 64564:case 64568:case 64572:case 64576:case 64580:case 64584:case 64588:case 64592:case 64596:case 64600:case 64604:break;case 65024:case 65028:return this.crtc.write(e,n);case 65032:case 65036:return this.acia.write(e,n);case 65040:case 65044:return this.serial.write(e,n);case 65048:if(this.isMaster)return this.adconverter.write(e,n);break;case 65056:return this.ula.write(e,n);case 65060:case 65064:return t.isMaster?this.fdc.write(e,n):this.ula.write(e,n);case 65068:if(!t.isMaster)return this.ula.write(e,n);break;case 65072:return this.romSelect(n);case 65076:return t.isMaster?this.writeAcccon(n):this.romSelect(n);case 65080:case 65084:if(!t.isMaster)return this.romSelect(n);break;case 65088:case 65092:case 65096:case 65100:case 65104:case 65108:case 65112:case 65116:return this.sysvia.write(e,n);case 65120:case 65124:case 65128:case 65132:case 65136:case 65140:case 65144:case 65148:return this.uservia.write(e,n);case 65152:case 65156:case 65160:case 65164:case 65168:case 65172:case 65176:case 65180:if(!t.isMaster)return this.fdc.write(e,n);break;case 65216:case 65220:case 65224:case 65228:case 65232:case 65236:case 65240:case 65244:if(!t.isMaster)return this.adconverter.write(e,n);break;case 65248:case 65252:case 65256:case 65260:case 65264:case 65268:case 65272:case 65276:return this.tube.write(e,n)}},this.loadRom=function(t,e){0!==t.indexOf("http")&&(t="roms/"+t),console.log("Loading ROM from "+t);var n=this.ramRomOs;return tc(t).then((function(i){/\.zip/i.test(t)&&(i=function(t){return uc(t,cc)}(i).data);var r=i.length;if(16384!==r&&8192!==r)throw new Error("Broken rom file");for(var s=0;s<r;++s)n[e+s]=i[s]}))},this.loadOs=function(t){var e,n=Array.prototype.slice.call(arguments,1).concat(o.extraRoms);t="roms/"+t,console.log("Loading OS from "+t);var i=this.ramRomOs,r=this;return tc(t).then((function(t){var s=t.length;if(s<16384||16383&s)throw new Error("Broken ROM file (length="+s+")");for(e=0;e<16384;++e)i[r.osOffset+e]=t[e];var o=(s-16384)/16384,a=16-o;for(e=0;e<o;++e)for(var c=16384+16384*e,u=r.romOffset+16384*(a+e),l=0;l<16384;++l)i[u+l]=t[c+l];var h=[];for(e=0;e<n.length;++e)a--,h.push(r.loadRom(n[e],r.romOffset+16384*a));return Promise.all(h)}))},this.setReset=function(t){this.resetLine=!t},this.reset=function(e){var n;if(e){for(n=0;n<16;++n)this.memStatOffsetByIFetchBank[n]=0;if(t.isMaster&&(this.memStatOffsetByIFetchBank[12]=256,this.memStatOffsetByIFetchBank[13]=256),t.isTest)for(n=0;n<256;++n)this.memStat[n]=this.memStat[256+n]=1,this.memLook[n]=this.memLook[256+n]=0;else{for(n=0;n<128;++n)this.memStat[n]=this.memStat[256+n]=1;for(n=128;n<256;++n)this.memStat[n]=this.memStat[256+n]=2;for(n=0;n<128;++n)this.memLook[n]=this.memLook[256+n]=0;for(n=128;n<192;++n)this.memLook[n]=this.memLook[256+n]=this.romOffset-32768;for(n=192;n<256;++n)this.memLook[n]=this.memLook[256+n]=this.osOffset-49152;for(n=252;n<255;++n)this.memStat[n]=this.memStat[256+n]=0}for(n=0;n<this.romOffset;++n)this.ramRomOs[n]=n<256?0:255;this.videoDisplayPage=0,this.scheduler=new Mc,this.soundChip.setScheduler(this.scheduler),this.sysvia=Oc(this,this.video,this.soundChip,s,t.isMaster,o.keyLayout,o.getGamepads),this.uservia=function(t,e,n){var i=Dc(t,2);return i.getJoysticks=function(){return{button1:!1,button2:!1}},i.portAUpdated=function(){},i.portBUpdated=function(){n.write(i.portbpins)},i.drivePortA=function(){},i.drivePortB=function(){i.portbpins&=n.read()},i.reset(),i}(this,t.isMaster,o.userPort),o.printerPort&&(this.uservia.ca2changecallback=o.printerPort.outputStrobe),this.touchScreen=new Fc(this.scheduler),this.acia=new Lc(this,this.soundChip.toneGenerator,this.scheduler,this.touchScreen),this.serial=new Pc(this.acia),this.ddNoise.spinDown(),this.fdc=new t.Fdc(this,this.ddNoise,this.scheduler),this.crtc=this.video.crtc,this.ula=this.video.ula,this.adconverter=new Nc(this.sysvia,this.scheduler),t.hasTeletextAdaptor&&(this.teletextAdaptor=new Uc(this)),t.hasMusic5000&&(this.music5000=new Kc),this.sysvia.reset(e),this.uservia.reset(e)}this.tube.reset(e),e&&(this.targetCycles=0,this.currentCycles=0,this.cycleSeconds=0),this.pc=this.readmem(65532)|this.readmem(65533)<<8,this.p=new Wc,this.p.i=!0,this.nmi=!1,this.halted=!1,this.JimPageSel=0,this.video.reset(this,this.sysvia,e),e&&this.soundChip.reset(e),t.hasTeletextAdaptor&&this.teletextAdaptor.reset(e),t.hasMusic5000&&this.music5000.reset(e)},this.updateKeyLayout=function(){this.sysvia.setKeyLayout(o.keyLayout)},this.polltimeAddr=function(t,e){t|=0,this.is1MHzAccess(e)&&(t+=1+(1&(t^this.currentCycles))),this.polltime(t)},this.peripheralCycles=0,this.videoCycles=0,this.polltimeSlow=function(e){e|=0,this.currentCycles+=e,this.peripheralCycles+=e,this.videoCycles+=e,(e=this.videoCycles/this.cpuMultiplier|0)>this.videoCyclesBatch&&(this.video.polltime(e),this.videoCycles-=e*this.cpuMultiplier|0),(e=this.peripheralCycles/this.cpuMultiplier|0)&&(this.peripheralCycles-=e*this.cpuMultiplier|0,this.sysvia.polltime(e),this.uservia.polltime(e),this.scheduler.polltime(e),this.tube.execute(e),t.hasTeletextAdaptor&&this.teletextAdaptor.polltime(e),t.hasMusic5000&&this.music5000.polltime(e))},this.polltimeFast=function(e){e|=0,this.currentCycles+=e,this.video.polltime(e),this.sysvia.polltime(e),this.uservia.polltime(e),this.scheduler.polltime(e),this.tube.execute(e),t.hasTeletextAdaptor&&this.teletextAdaptor.polltime(e),t.hasMusic5000&&this.music5000.polltime(e)},1===this.cpuMultiplier&&0===this.videoCyclesBatch?this.polltime=this.polltimeFast:this.polltime=this.polltimeSlow,this.execute=function(t){return this.halted=!1,this.targetCycles+=t,(4294967294&Math.min(this.targetCycles,this.currentCycles))>=2e6&&(this.targetCycles-=2e6,this.currentCycles-=2e6,this.cycleSeconds++),this.forceTracing||this._debugInstruction||this._debugRead||this._debugWrite?this.executeInternal():this.executeInternalFast()},this.executeInternal=function(){for(var t=!0;!this.halted&&this.currentCycles<this.targetCycles;){this.oldPcIndex=this.oldPcIndex+1&255,this.oldPcArray[this.oldPcIndex]=this.pc,this.memStatOffset=this.memStatOffsetByIFetchBank[this.pc>>>12];var e=this.readmem(this.pc);if(this._debugInstruction&&!t&&this._debugInstruction(this.pc,e))return!1;t=!1,this.incpc(),this.runner.run(e),this.oldAArray[this.oldPcIndex]=this.a,this.oldXArray[this.oldPcIndex]=this.x,this.oldYArray[this.oldPcIndex]=this.y,this.takeInt&&this.brk(!0),this.resetLine||this.reset(!1)}return!this.halted},this.executeInternalFast=function(){for(;!this.halted&&this.currentCycles<this.targetCycles;){this.memStatOffset=this.memStatOffsetByIFetchBank[this.pc>>>12];var t=this.readmem(this.pc);this.incpc(),this.runner.run(t),this.takeInt&&this.brk(!0),this.resetLine||this.reset(!1)}return!this.halted},this.stop=function(){this.halted=!0},this.debugInstruction=new a(this,"_debugInstruction"),this.debugRead=new a(this,"_debugRead"),this.debugWrite=new a(this,"_debugWrite"),this.dumpTrace=function(t,e){t||(t=256),t>256&&(t=256);var n=this.disassembler;e=e||function(t,e,i,r){var s=n.disassemble(t,!0)[0];console.log(Wa(t),(s+"                       ").substr(0,15),Ga(e),Ga(i),Ga(r))};for(var i=t-2;i>=0;--i){var r=this.oldPcIndex-i&255;e(this.oldPcArray[r],this.oldAArray[r],this.oldXArray[r],this.oldYArray[r])}e(this.pc,this.a,this.x,this.y)},this.initialise=function(){var n=Promise.resolve();t.os.length&&(n=this.loadOs.apply(this,t.os));var i=this;return t.tube&&(n=n.then((function(){return i.tube.loadOs()}))),n.then((function(){i.reset(!0),e.setCpu(i)}))}}function Qc(t){var e=null;t&&(e=t.load()),e||(e=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,201,255,255,18,0,23,202,30,5,0,53,166,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],a());var n=!1,i=!1,r=!1,s=!1,o=0;function a(){t&&t.save(e)}this.read=function(){return n&&!r&&s&&i?255&e[o]:255},this.writeControl=function(t,c,u){if(n=!!(64&t)){var l=s,h=r;i=!!(2&u),s=!!(4&u),r=!!(128&t),h&&!r&&(o=63&c),l&&!s&&!r&&!i&&o>11&&(e[o]=c,a())}}}function Jc(t,e,i,r){var s=this,o=document.location.protocol+"//www.stairwaytohell.com/bbc/archive/";o+=r?"tapeimages/":"diskimages/";var a=[];s.populate=function(){if(t(),0===a.length){var r=new XMLHttpRequest;r.open("GET",o+"reclist.php?sort=name&filter=.zip",!0),r.onerror=function(){i&&i()},r.onload=function(){n(n.parseHTML(this.responseText,null,!1)).find("tr td:nth-child(3) a").each((function(t,e){var i=n(e).attr("href");i.indexOf(".zip")>0&&a.push(i)})),e&&e(a)},r.send()}else e&&e(a)},s.catalog=function(){return a},s.fetch=function(t){var e=o+t;return console.log("Loading ZIP from "+e),tc(e).then((function(t){return lc(t).data}))}}var Zc=Ha;function tu(){this.gamepad0=null,this.gamepadMapping=[],this.gamepadMapping[14]=Zc.Z,this.gamepadMapping[15]=Zc.X,this.gamepadMapping[13]=Zc.SLASH,this.gamepadMapping[12]=Zc.COLON_STAR,this.gamepadMapping[0]=Zc.RETURN,this.gamepadMapping[9]=Zc.SPACE,this.gamepadAxisMapping=[[],[],[],[]]}tu.prototype.remap=function(t,e){"0123456789".indexOf(e)>0&&(e="K"+e);var n=Zc[e];if(n)switch(t){case"LEFT":this.gamepadMapping[3]=n,this.gamepadAxisMapping[0][-1]=n,this.gamepadAxisMapping[2][-1]=n;break;case"RIGHT":this.gamepadMapping[1]=n,this.gamepadAxisMapping[0][1]=n,this.gamepadAxisMapping[2][1]=n;break;case"UP":this.gamepadMapping[0]=n,this.gamepadAxisMapping[1][-1]=n,this.gamepadAxisMapping[3][-1]=n;break;case"DOWN":this.gamepadMapping[2]=n,this.gamepadAxisMapping[1][1]=n,this.gamepadAxisMapping[3][1]=n;break;case"FIRE":for(var i=0;i<16;i++)this.gamepadMapping[i]=n;break;case"UP2":this.gamepadAxisMapping[3][-1]=n;break;case"UP1":this.gamepadAxisMapping[1][-1]=n;break;case"UP3":case"A":this.gamepadMapping[0]=n;break;case"DOWN2":this.gamepadAxisMapping[3][1]=n;break;case"DOWN1":this.gamepadAxisMapping[1][1]=n;break;case"DOWN3":case"X":this.gamepadMapping[2]=n;break;case"LEFT2":this.gamepadAxisMapping[2][-1]=n;break;case"LEFT1":this.gamepadAxisMapping[0][-1]=n;break;case"LEFT3":case"Y":this.gamepadMapping[3]=n;break;case"RIGHT2":this.gamepadAxisMapping[2][1]=n;break;case"RIGHT1":this.gamepadAxisMapping[0][1]=n;break;case"RIGHT3":case"B":this.gamepadMapping[1]=n;break;case"FIRE2":this.gamepadMapping[11]=n;break;case"FIRE1":this.gamepadMapping[10]=n;break;case"START":this.gamepadMapping[9]=n;break;case"BACK":this.gamepadMapping[8]=n;break;case"RB":this.gamepadMapping[5]=n;break;case"RT":this.gamepadMapping[7]=n;break;case"LB":this.gamepadMapping[4]=n;break;case"LT":this.gamepadMapping[6]=n;break;default:console.log("unknown gamepad key: "+t)}else console.log("unknown BBC key: "+e)},tu.prototype.update=function(t){if(navigator.getGamepads&&!this.gamepad0){var e=navigator.getGamepads();this.gamepad0=e[0],this.gamepad0&&(console.log("initing gamepad"),this.gamepadButtons=[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],this.gamepadAxes=[0,0,0,0])}if(this.gamepad0){Fa()||(this.gamepad0=navigator.getGamepads()[0]);for(var n=0;n<4;n++){var i,r=this.gamepad0.axes[n];if((i=r<-.15?-1:r>.15?1:0)!==this.gamepadAxes[n]){var s=this.gamepadAxisMapping[n][this.gamepadAxes[n]];s&&t.keyUpRaw(s);var o=this.gamepadAxisMapping[n][i];o&&t.keyDownRaw(o)}this.gamepadAxes[n]=i}for(n=0;n<16;n++)if(this.gamepad0.buttons[n]){var a=this.gamepad0.buttons[n];a.pressed!==this.gamepadButtons[n]&&this.gamepadMapping[n]&&(a.pressed?t.keyDownRaw(this.gamepadMapping[n]):t.keyUpRaw(this.gamepadMapping[n])),this.gamepadButtons[n]=a.pressed}}};const eu=256;function nu(t){const e={notFound:0,seek:function(){return 0},notFoundTask:t.scheduler.newTask((()=>{t.notFound()}))};return e.read=e.write=e.address=e.format=()=>{this.notFoundTask.reschedule(128e3)},e}function iu(t,e,n,i){const r="string"!=typeof n?n:Za(n),s=new Uint8Array(r);return new ru(t,e,r,(()=>{(function(){let t=!1;for(let e=0;e<r.length;++e)r[e]!==s[e]&&(s[e]=r[e],t=!0);return t})()&&i&&i(this.data)}))}function ru(t,e,n,i){if(null==n)throw new Error("Bad disc data");let r=hc(e),s=r.isDsd,o=r.byteSize;n.length>o&&!s&&(r=hc(".dsd"),s=!0,o=r.byteSize),n=function(t,e){var n=new Uint8Array(e);return n.set(t.subarray(0,e)),n}(n,o),this.fdc=t,this.name=e,this.isDsd=s,this.flusher=i,this.data=n,this.byteWithinSector=0,this.writeProt=!i,this.seekOffset=0,this.sectorOffset=0,this.formatSector=0,this.rsector=0,this.track=0,this.side=-1,this.notFoundTask=t.scheduler.newTask((()=>this.fdc.notFound())),this.readTask=t.scheduler.newTask((()=>{this.fdc.discData(this.data[this.seekOffset+this.sectorOffset+this.byteWithinSector]),256==++this.byteWithinSector?this.fdc.discFinishRead():this.readTask.reschedule(eu)})),this.writeTask=t.scheduler.newTask((()=>{this.writeProt?this.fdc.writeProtect():(this.data[this.seekOffset+this.sectorOffset+this.byteWithinSector]=this.fdc.readDiscData(255===this.byteWithinSector),256==++this.byteWithinSector?(this.fdc.discFinishRead(),this.flush()):this.writeTask.reschedule(eu))})),this.readAddrTask=t.scheduler.newTask((()=>{switch(this.byteWithinSector){case 0:this.fdc.discData(this.track);break;case 1:this.fdc.discData(this.side);break;case 2:this.fdc.discData(this.rsector);break;case 3:this.fdc.discData(1);break;case 4:case 5:this.fdc.discData(0);break;case 6:return this.fdc.discFinishRead(),this.rsector++,void(10===this.rsector&&(this.rsector=0))}this.byteWithinSector++,this.readAddrTask.reschedule(eu)})),this.formatTask=t.scheduler.newTask((()=>{if(this.writeProt)this.fdc.writeProtect();else{if(this.data[this.seekOffset+this.sectorOffset+this.byteWithinSector]=0,256==++this.byteWithinSector&&(this.byteWithinSector=0,this.sectorOffset+=256,10==++this.formatSector))return this.fdc.discFinishRead(),void this.flush();this.formatTask.reschedule(eu)}})),ru.prototype.flush=()=>{this.flusher&&this.flusher()},ru.prototype.seek=t=>{this.seekOffset=10*t*256,this.isDsd&&(this.seekOffset<<=1);const e=this.track;return this.track=t,this.track-e},ru.prototype.check=(t,e,n)=>!(this.track!==t||n||e&&!this.isDsd)||(this.notFoundTask.reschedule(128e3),!1),ru.prototype.read=(t,e,n,i)=>{this.check(e,n,i)&&(this.side=n,this.readTask.reschedule(eu),this.sectorOffset=256*t+(n?2560:0),this.byteWithinSector=0)},ru.prototype.write=(t,e,n,i)=>{this.check(e,n,i)&&(this.side=n,this.writeTask.reschedule(eu),this.sectorOffset=256*t+(n?2560:0),this.byteWithinSector=0)},ru.prototype.address=(t,e,n)=>{this.check(t,e,n)&&(this.side=e,this.readAddrTask.reschedule(eu),this.byteWithinSector=0,this.rsector=0)},ru.prototype.format=(t,e,n)=>{this.check(t,e,n)&&(this.side=e,this.formatTask.reschedule(eu),this.formatSector=0,this.sectorOffset=e?2560:0,this.byteWithinSector=0)}}class su{constructor(t,e,n){this.cpu=t,this.noise=e,this.status=0,this.result=0,this.curData=0,this.curDrive=0,this.drvout=0,this.curTrack=[0,0],this.realTrack=[0,0],this.sectorsLeft=0,this.curSector=0,this.phase=0,this.curCommand=255,this.callbackTask=n.newTask((()=>{this.callback()})),this.paramNum=0,this.paramReq=0,this.params=new Uint8Array(8),this.motorOn=[!1,!1],this.motorSpinDownTask=[n.newTask((()=>{this.motorOn[0]=!1,this.drvout&=-65,e.spinDown()})),n.newTask((()=>{this.motorOn[1]=!1,this.drvout&=-129,e.spinDown()}))],this.written=!1,this.verify=!1,this.scheduler=n,this.drives=[nu(this),nu(this)]}NMI(){this.cpu.NMI(8&this.status)}loadDisc(t,e){this.drives[t]=e}read(t){switch(7&t){case 0:return this.status;case 1:return this.status&=-25,this.NMI(),this.result;case 4:case 5:case 6:case 7:return this.status&=-13,this.NMI(),this.curData}return 0}error(t){this.result=t,this.status=24,this.NMI(),this.callbackTask.cancel(),this.setspindown()}notFound(){this.error(24)}writeProtect(){this.error(18)}headerCrcError(){this.error(12)}dataCrcError(){this.error(14)}discData(t){this.verify||(this.curData=t,this.status=140,this.result=0,this.NMI())}readDiscData(t){return this.written?(t||(this.status=140,this.result=0,this.NMI()),this.written=!1,this.curData):0}discFinishRead(){this.callbackTask.reschedule(eu)}numParams(t){const e={53:4,41:1,44:0,61:1,58:2,19:3,11:3,27:3,31:3,35:5}[t];return e||0}command(t){128&this.status||(this.curCommand=63&t,23===this.curCommand&&(this.curCommand=19),this.curDrive=128&t?1:0,this.curCommand<44&&(this.drvout&=-193,this.drvout|=192&t),this.paramNum=0,this.paramReq=this.numParams(this.curCommand),this.status=128,this.paramReq||(44===this.curCommand?(this.status=16,this.result=128,this.result|=this.realTrack[this.curDrive]?0:2,this.result|=this.drives[this.curDrive].writeProt?8:0,64&this.drvout&&(this.result|=4),128&this.drvout&&(this.result|=64)):(this.result=24,this.status=24,this.NMI())))}writeSpecial(t,e){switch(this.status=0,t){case 23:break;case 18:this.curTrack[0]=e;break;case 26:this.curTrack[1]=e;break;case 35:this.drvout=e;break;default:this.result=this.status=24,this.NMI()}}readSpecial(t){switch(this.status=16,this.result=0,t){case 6:break;case 18:this.result=this.curTrack[0];break;case 26:this.result=this.curTrack[1];break;case 35:this.result=this.drvout;break;default:this.result=this.status=24,this.NMI()}}spinup(){let t=eu;this.motorOn[this.curDrive]||(t=.5*this.cpu.peripheralCyclesPerSecond|0,this.motorOn[this.curDrive]=!0,this.noise.spinUp()),this.callbackTask.reschedule(t),this.motorSpinDownTask[this.curDrive].cancel(),this.phase=0}setspindown(){this.motorOn[this.curDrive]&&this.motorSpinDownTask[this.curDrive].reschedule(2*this.cpu.peripheralCyclesPerSecond)}seek(t){let e=this.realTrack[this.curDrive];e+=t-this.curTrack[this.curDrive],e<0&&(e=0),e>79&&(e=79),this.realTrack[this.curDrive]=e;const n=this.drives[this.curDrive].seek(e),i=.9*this.noise.seek(n)*this.cpu.peripheralCyclesPerSecond|0;this.callbackTask.reschedule(Math.max(eu,i)),this.phase=1}prepareSectorIO(t,e,n){void 0!==n&&(this.sectorsLeft=31&n),void 0!==e&&(this.curSector=e),this.spinup()}parameter(t){if(this.paramNum<5&&(this.params[this.paramNum++]=t),this.paramNum===this.paramReq)switch(this.curCommand){case 53:this.status=0;break;case 41:this.spinup();break;case 31:case 19:case 11:this.prepareSectorIO(this.params[0],this.params[1],this.params[2]);break;case 27:this.prepareSectorIO(this.params[0],void 0,this.params[2]);break;case 35:this.prepareSectorIO(this.params[0]);break;case 58:this.writeSpecial(this.params[0],this.params[1]);break;case 61:this.readSpecial(this.params[0]);break;default:this.result=24,this.status=24,this.NMI()}}reset(){}data(t){this.curData=t,this.written=!0,this.status&=-13,this.NMI()}write(t,e){switch(7&t){case 0:this.command(e);break;case 1:this.parameter(e);break;case 2:this.reset(e);break;case 4:case 5:case 6:case 7:this.data(e)}}density(){return!!(32&this.drvout)}update(t){this.status=t,this.result=0,this.NMI()}done(){this.update(24),this.setspindown(),this.verify=!1}callback(){if(0!==this.phase)switch(this.curCommand){case 41:this.curTrack[this.curDrive]=this.params[0],this.done();break;case 11:if(1===this.phase)return this.curTrack[this.curDrive]=this.params[0],this.phase=2,this.drives[this.curDrive].write(this.curSector,this.params[0],this.density(),0),void this.update(140);if(0==--this.sectorsLeft)return void this.done();this.curSector++,this.drives[this.curDrive].write(this.curSector,this.params[0],this.density(),0),this.update(140);break;case 19:case 31:if(1===this.phase)return this.curTrack[this.curDrive]=this.params[0],this.phase=2,void this.drives[this.curDrive].read(this.curSector,this.params[0],this.density(),0);if(0==--this.sectorsLeft)return void this.done();this.curSector++,this.drives[this.curDrive].read(this.curSector,this.params[0],this.density(),0);break;case 27:if(1===this.phase)return this.curTrack[this.curDrive]=this.params[0],this.phase=2,void this.drives[this.curDrive].address(this.params[0],this.density(),0);if(0==--this.sectorsLeft)return void this.done();this.drives[this.curDrive].address(this.params[0],this.density(),0);break;case 35:switch(this.phase){case 1:this.curTrack[this.curDrive]=this.params[0],this.drives[this.curDrive].write(this.curSector,this.params[0],this.density(),0),this.update(140),this.phase=2;break;case 2:this.drives[this.curDrive].format(this.params[0],this.density(),0),this.phase=3;break;case 3:this.done()}break;case 255:break;default:console.log("ERK bad command",Ga(this.curCommand))}else this.seek(this.params[0])}}class ou{constructor(t,e,n){this.cpu=t,this.noise=e,this.command=0,this.sector=0,this.track=0,this.status=0,this.data=0,this.side=0,this.curDrive=0,this.curTrack=0,this.written=!1,this.density=!1,this.stepIn=!1,this.motorOn=[!1,!1],this.motorSpinDownTask=[n.newTask((()=>{this.motorOn[0]=!1,this.checkSpinDownNoise()})),n.newTask((()=>{this.motorOn[1]=!1,this.checkSpinDownNoise()}))],this.scheduler=n,this.drives=[nu(this),nu(this)],this.callbackTask=n.newTask((()=>{this.callback()}))}checkSpinDownNoise(){this.motorOn[0]||this.motorOn[1]||this.noise.spinDown()}spinUp(){this.status|=128,this.motorOn[this.curDrive]=!0,this.motorSpinDownTask[this.curDrive].cancel(),this.noise.spinUp()}spinDown(){this.status&=-129,this.motorOn[this.curDrive]=!1,this.checkSpinDownNoise()}setSpinDown(){this.motorSpinDownTask[this.curDrive].reschedule(576e4)}track0(){return 0===this.curTrack?0:4}callback(){switch(this.command>>>4){case 0:this.track=this.curTrack=0,this.status=128,this.setSpinDown(),this.cpu.NMI(!0);break;case 1:this.curTrack=this.track=this.data,this.status=128|this.track0(),this.cpu.NMI(!0);break;case 3:case 5:case 7:this.track=this.curTrack;case 2:case 4:case 6:this.status=128|this.track0(),this.cpu.NMI(!0);break;case 8:case 10:case 15:this.status=128,this.setSpinDown(),this.cpu.NMI(!0);break;case 12:this.status=128,this.setSpinDown(),this.cpu.NMI(!0),this.sector=this.track}}read(t){switch(t){case 65156:case 65064:return this.status;case 65157:case 65065:return this.track;case 65158:case 65066:return this.sector;case 65159:case 65067:return this.status&=-3,this.data}return 254}write(t,e){switch(t){case 65152:this.curDrive=2&e?1:0,this.side=4&e?1:0,this.density=!(8&e);break;case 65060:this.curDrive=2&e?1:0,this.side=16&e?1:0,this.density=!(32&e);break;case 65156:case 65064:{const t=e>>>4&15,n=13===t;if(1&this.status&&!n)return;this.command=e,n||this.spinUp(),this.handleCommand(t);break}case 65157:case 65065:this.track=e;break;case 65158:case 65066:this.sector=e;break;case 65159:case 65067:this.status&=-3,this.data=e,this.written=!0}}curDisc(){return this.drives[this.curDrive]}seek(t){const e=this.curDisc().seek(t),n=this.noise.seek(e)*this.cpu.peripheralCyclesPerSecond|0;this.callbackTask.reschedule(Math.max(eu,n))}handleCommand(t){switch(t){case 0:this.status=161|this.track0(),this.seek(0);break;case 1:this.status=161|this.track0(),this.seek(this.data);break;case 2:case 3:this.status=161|this.track0(),this.curTrack+=this.stepIn?1:-1,this.curTrack<0&&(this.curTrack=0),this.seek(this.curTrack);break;case 4:case 5:this.status=161|this.track0(),this.curTrack++,this.seek(this.curTrack),this.stepIn=!0;break;case 6:case 7:this.status=161|this.track0(),this.curTrack--,this.curTrack<0&&(this.curTrack=0),this.seek(this.curTrack),this.stepIn=!1;break;case 8:this.status=129,this.curDisc().read(this.sector,this.track,this.side,this.density);break;case 10:this.status=131,this.curDisc().write(this.sector,this.track,this.side,this.density),this.written=!1,this.cpu.NMI(!0);break;case 12:this.status=129,this.curDisc().address(this.track,this.side,this.density);break;case 13:this.status=128|this.track0(),this.cpu.NMI(8&this.command),this.spinDown();break;case 15:this.status=129,this.curDisc().format(this.track,this.side,this.density);break;default:this.callbackTask.cancel(),this.status=144,this.cpu.NMI(!0),this.spinDown()}}discData(t){this.status|=2,this.data=t,this.cpu.NMI(!0)}readDiscData(t){return this.written?(this.written=!1,t||(this.cpu.NMI(!0),this.status|=2),this.data):255}error(t){this.callbackTask.cancel(),this.cpu.NMI(!0),this.status=t,this.spinDown()}discFinishRead(){this.callbackTask.reschedule(eu)}notFound(){this.error(144)}writeProtect(){this.error(192)}headerCrcError(){this.error(152)}dataCrcError(){this.error(136)}loadDisc(t,e){this.drives[t]=e}}function au(t){var e,n,i,r,s,o,a,c,u,l,h=this;function d(){var e=t.readInt16(),n=t.readInt32();return{id:e,stream:t.substream(n)}}h.rewind=function(){e=[!1,!1,!0,!1,!0,!1,!0,!1,!0,!0],n=-1,i=0,r=0,s=8,o="N",a=0,c=1,u=0,l=0,t.seek(10);var h=t.readByte(),d=t.readByte();if(0!==d)throw"Unsupported UEF version "+d+"."+h},h.rewind();var p=d(),f=1200;function m(t){return 2e6*t|0}function g(t){return m(t/f)}h.poll=function(h){if(p){if(-1===n){if(t.eof())return void(p=null);p=d()}var v;switch(p.id){case 0:console.log("Origin: "+p.stream.readNulString());break;case 256:return h.setTapeCarrier(!1),-1===n?(n=0,r=p.stream.readByte(),h.tone(f)):n<9?(0===n?h.tone(f):h.tone(r&1<<n-1?2*f:f),n++):(h.receive(r),h.tone(2*f),p.stream.eof()?n=-1:(n=0,r=p.stream.readByte())),g(1);case 260:if(h.setTapeCarrier(!1),-1===n&&(s=p.stream.readByte(),o=p.stream.readByte(),c=p.stream.readByte(),a="N"!==o?1:0,console.log("Defined data with "+s+String.fromCharCode(o)+c),n=0),0===n)p.stream.eof()?n=-1:(r=p.stream.readByte()&(1<<s)-1,h.tone(f),n++);else if(n<1+s)h.tone(r&1<<n-1?2*f:f),n++;else if(n<1+s+a){var b=function(t){for(var e=!1;t;)e=!e,t>>>=1;return e}(r);"N"===o&&(b=!b),h.tone(b?2*f:f),n++}else{if(!(n<1+s+a+c))return h.receive(r),n=0,0;h.tone(2*f),n++}return g(1);case 273:return-1===n&&(n=0,u=p.stream.readInt16(),l=p.stream.readInt16(),console.log("Carrier with",u,l)),0===n?(h.setTapeCarrier(!0),h.tone(2*f),--u<=0&&(n=1)):n<11?(h.setTapeCarrier(!1),h.tone(e[n-1]?f:2*f),10===n&&h.receive(170),n++):(h.setTapeCarrier(!0),h.tone(2*f),--l<=0&&(n=-1)),g(1);case 276:console.log("Ignoring security cycles");break;case 277:console.log("Ignoring polarity change");break;case 272:return-1===n&&(n=0,i=p.stream.readInt16()),h.setTapeCarrier(!0),h.tone(2*f),--i<=0&&(n=-1),g(1);case 275:f=p.stream.readFloat32(),console.log("Frequency change ",f);break;case 274:return h.setTapeCarrier(!1),v=1/(2*p.stream.readInt16()*f),console.log("Tape gap of "+v+"s"),h.tone(0),m(v);case 278:return h.setTapeCarrier(!1),v=p.stream.readFloat32(),console.log("Tape gap of "+v+"s"),h.tone(0),m(v);default:console.log("Skipping unknown chunk "+Wa(p.id)),p=d()}return g(1)}}}function cu(t){var e=this;e.count=0,e.stream=t;var n=[1,16,64,-1];e.rewind=function(){t.seek(10)},e.poll=function(e){if(t.eof())return 1e5;var i=t.readByte();if(255===i){if(0===(i=t.readByte()))return e.setTapeCarrier(!1),0;if(4===i)return e.setTapeCarrier(!0),1e7;if(255!==i)throw"Got a weird byte in the tape"}return e.receive(i),function(t){var e=9;128&t.cr||e++;var i=2e6/(19200/n[3&t.cr]);return Math.floor(e*i)}(e)}}function uu(t,e){var n=new sc(t,e);return 255===n.readByte(0)&&4===n.readByte(1)?(console.log("Detected a 'tapefile' tape"),new cu(n)):"UEF File!"===n.readNulString(0)?(console.log("Detected a UEF tape"),new au(n)):(console.log("Unknown tape format"),null)}class lu{constructor(t,e,n,i,r,s,o,a,c,u){this.name=t,this.synonyms=e,this.os=n,this.nmos=i,this.isMaster=r,this.Fdc=o,this.swram=s,this.isTest=!1,this.tube=a,this.hasTeletextAdaptor=c,this.hasMusic5000=u}}const hu=[!0,!0,!0,!0,!0,!0,!0,!0,!1,!1,!1,!1,!1,!1,!1,!1],du=[!1,!1,!1,!1,!0,!0,!0,!0,!1,!1,!1,!1,!1,!1,!1,!1],pu=new lu("Tube65C02",[],["tube/6502Tube.rom"],!1,!1),fu=[new lu("BBC B",["B"],["os.rom","BASIC.ROM","b/DFS-0.9.rom"],!0,!1,hu,su,null,!1,!1),new lu("BBC B with Teletext",["BTeletext"],["os.rom","BASIC.ROM","b/DFS-0.9.rom","ATS-3.0.ROM"],!0,!1,hu,su,null,!0),new lu("BBC B with Music 5000",["BMusic5000"],["os.rom","BASIC.ROM","b/DFS-0.9.rom","AMPLE.ROM"],!0,!1,hu,su,null,!0,!0),new lu("BBC B (DFS 0.9)",["B-DFS0.9"],["os.rom","BASIC.ROM","b/DFS-0.9.rom"],!0,!1,hu,su),new lu("BBC B (DFS 1.2)",["B-DFS1.2"],["os.rom","BASIC.ROM","b/DFS-1.2.rom"],!0,!1,hu,su),new lu("BBC B (with 65c02 Tube)",["B-Tube"],["os.rom","BASIC.ROM","b/DFS-1.2.rom"],!0,!1,hu,su,pu),new lu("BBC B (1770)",["B1770"],["os.rom","BASIC.ROM","b1770/dfs1770.rom","b1770/zADFS.ROM"],!0,!1,hu,ou),new lu("BBC Master 128",["Master"],["master/mos3.20"],!1,!0,du,ou),new lu("BBC Master Turbo",["MasterTurbo"],["master/mos3.20"],!1,!0,du,ou,pu)];const mu=new lu("TEST",["TEST"],[],!0,!1,hu,su);mu.isTest=!0;new lu("TEST",["TEST"],[],!1,!1,du,su).isTest=!0;const gu=new lu("Basic only",["Basic only"],["master/mos3.20"],!1,!0,du,ou);function vu(t){var e=25e4/t,n=5e-7*t,i=[0,0,0,0];this.registers=i;var r=[0,0,0,0],s=[!1,!1,!1,!1],o=[0,0,0,0];this.volume=o;var a,c=[null,null,null,null,null],u=[],l=1;for(a=0;a<16;++a)u[a]=l/c.length,l*=Math.pow(10,-.1);u[15]=0;var h=8192,d=[];for(a=0;a<h;++a)d[a]=Math.sin(2*Math.PI*a/h)/c.length;var p=0,f=!1,m=0;function g(t,n,a,c){var u,l=i[t],h=o[t];for(0===l&&(l=1024),u=0;u<c;++u)r[t]-=e,r[t]<0&&(r[t]+=l,r[t]<0&&(r[t]=0),s[t]=!s[t]),n[u+a]+=s[t]*h}this.toneGenerator={mute:function(){T(),f=!1},tone:function(e){T(),f=!0,p=e/t*h}};var v=0;function b(){v=v>>>1|(1&v^(2&v)>>>1)<<14}function y(){0===(v>>=1)&&(v=16384)}var w=b;function _(){w=4&i[3]?b:y,v=16384}this.debugPokeAll=(t,e,n,i,r,s,a,c)=>{T(),this.registers[0]=16777215&t,this.registers[1]=16777215&n,this.registers[2]=16777215&r,this.registers[3]=16777215&a,o[0]=u[e],o[1]=u[i],o[2]=u[s],o[3]=u[c],_()};var x=!0;function A(t,e,n){var i;for(e|=0,n|=0,i=0;i<n;++i)t[i+e]=0;if(x)for(i=0;i<c.length;++i)c[i](i,t,e,n)}var E={epoch:0},C=0;function T(){var t=E.epoch-C;t>0&&L(t),C=E.epoch}var S=null;this.setScheduler=function(t){C=(E=t).epoch,S=E.newTask(function(){this.active&&function(t){var e,n;T(),128&t?(P=112&t,e=240&t):e=P;if(n=e>>5&3,16&e){var r=15&t;o[n]=u[r]}else 3===n?(i[n]=15&t,_()):i[n]=128&e?-16&i[n]|15&t:15&i[n]|(63&t)<<4}(this.slowDataBus)}.bind(this))};var k,R=0,D=0,O=4096;function L(t){var e=t*n+R,i=0|e;R=e-i,D+i>=O&&(i=O-D),0!==i&&(A(k,D,i),D+=i)}k="undefined"!=typeof Float64Array?new Float64Array(O):new Float32Array(O);var P=0;for(a=0;a<3;++a)c[a]=g;c[3]=function(t,n,a,c){for(var u=function(t){switch(3&i[t|=0]){case 0:return 16;case 1:return 32;case 2:return 64;case 3:return i[t-1]}}(t),l=o[t],h=0;h<c;++h)r[t]-=e,r[t]<0&&(r[t]+=u,r[t]<0&&(r[t]=0),s[t]=!s[t],s[t]&&w()),n[h+a]+=(1&v)*l},c[4]=function(t,e,n,i){if(f){for(var r=0;r<i;++r)e[r+n]+=d[8191&m],m+=p;for(;m>h;)m-=h}},this.render=function(t,e,n){T();for(var i=D>n?n:D,r=0;r<i;++r)t[e+r]=k[r];for(e+=i,n-=i,r=i;r<D;++r)k[r-i]=k[r];D-=i,0!==n&&A(t,e,n)},this.active=!1,this.slowDataBus=0,this.updateSlowDataBus=function(t,e){this.slowDataBus=t,this.active=e,e&&S.ensureScheduled(!0,14)},this.reset=function(t){if(t){for(var e=0;e<4;++e)r[e]=0,i[e]=0,o[e]=0;_(),L(1e5),this.setScheduler(E)}},this.enable=function(t){x=t},this.mute=function(){x=!1},this.unmute=function(){x=!0}}function bu(){this.reset=this.enable=this.mute=this.unmute=this.render=this.updateSlowDataBus=this.setScheduler=Ya,this.toneGenerator=this}function yu(t){this.context=t,this.sounds={},this.state=0,this.motor=null,this.gain=t.createGain(),this.gain.gain.value=.25,this.gain.connect(t.destination),this.playing=[]}function wu(){}yu.prototype.initialise=function(){var t,e,n=this;return(t=n.context,e={motorOn:"sounds/disc525/motoron.wav",motorOff:"sounds/disc525/motoroff.wav",motor:"sounds/disc525/motor.wav",step:"sounds/disc525/step.wav",seek:"sounds/disc525/seek.wav",seek2:"sounds/disc525/seek2.wav",seek3:"sounds/disc525/seek3.wav"},Promise.all(Kn.map(e,(function(e){return tc(e).then((function(e){return new Promise((function(n){t.decodeAudioData(e.buffer,(function(t){n(t)}))}))}))}))).then((function(t){for(var n=Kn.keys(e),i={},r=0;r<n.length;++r)i[n[r]]=t[r];return i}))).then((function(t){n.sounds=t}))},yu.prototype.oneShot=function(t){var e=t.duration,n=this.context;if("running"!==n.state)return e;var i=n.createBufferSource();return i.buffer=t,i.connect(this.gain),i.start(),e},yu.prototype.play=function(t,e){if("running"!==this.context.state)return Promise.reject();var n=this;return new Promise((function(i){var r=n.context.createBufferSource();r.loop=!!e,r.buffer=t,r.connect(n.gain),r.onended=function(){n.playing=Kn.without(n.playing,r),r.loop||i()},r.start(),n.playing.push(r),r.loop&&i(r)}))},yu.prototype.spinUp=function(){if(2!==this.state&&1!==this.state){this.state=1;var t=this;this.play(this.sounds.motorOn).then((function(){0!==t.state&&t.play(t.sounds.motor,!0).then((function(e){t.motor=e,t.state=2}))}),(function(){}))}},yu.prototype.spinDown=function(){0!==this.state&&(this.state=0,this.motor&&(this.motor.stop(),this.motor=null,this.oneShot(this.sounds.motorOff)))},yu.prototype.seek=function(t){return t<0&&(t=-t),0===t?0:1===t?this.oneShot(this.sounds.step):t<10?this.oneShot(this.sounds.seek):t<30?this.oneShot(this.sounds.seek2):this.oneShot(this.sounds.seek3)},yu.prototype.mute=function(){this.gain.gain.value=0},yu.prototype.unmute=function(){this.gain.gain.value=.25},wu.prototype.spinUp=wu.prototype.spinDown=wu.prototype.mute=wu.prototype.unmute=Ya,wu.prototype.seek=function(){return 0},wu.prototype.initialise=function(){return Promise.resolve()};var _u=new gc,xu=new bu,Au={setCpu:function(){}};function Eu(t,e){var n=(e=e||{}).video||_u;return new $c(t=t||mu,Au,n,xu,new wu,new Qc)}function Cu(){var t=Eu(gu),e=/^([0-9]+)?(.*)/,n=function(n,i){var r=n.match(e),s=r[1]?parseInt(r[1]):i,o=function(e){t.pc=36274,t.s=240;var n=4096;t.writemem(59,0),t.writemem(60,0),t.writemem(55,255&n),t.writemem(56,n>>>8&255),t.writemem(65072,12);for(var i=0;i<e.length;++i)t.writemem(n+i,e.charCodeAt(i));t.writemem(n+e.length,13);for(var r=2e7,s="";t.s<=240&&(t.execute(1),0!=--r);)if(36513===t.pc){let e=t.readmemZpStack(56)<<8|t.readmemZpStack(55);for(;n<e;)s+=String.fromCharCode(t.readmem(n)),n++;s+=String.fromCharCode(t.a),n+=t.y,t.writememZpStack(55,255&n),t.writememZpStack(56,n>>>8&255),++n,t.pc+=3}for(i=n;13!==t.readmem(i);++i)s+=String.fromCharCode(t.readmem(i));if(0===r)throw new Error("Unable to tokenize '"+e+"' - got as far as '"+s+"' pc="+Wa(t.pc));return s}(r[2]);if(o.length>251)throw new Error("Line "+s+" tokenised length "+o.length+" > 251 bytes");return"\r"+String.fromCharCode(s>>>8&255)+String.fromCharCode(255&s)+String.fromCharCode(o.length+4)+o},i=function(t){var e="";return t.split("\n").forEach((function(t,i){t&&(e+=n(t,10+10*i))})),e+"\rÃ¿"};return t.initialise().then((function(){return Promise.resolve({tokenise:i})}))}var Tu=function(t){window.console&&window.console.error?window.console.error(t):function(t){window.console&&window.console.log&&window.console.log(t)}(t)},Su={enable:{1:{0:!0}},disable:{1:{0:!0}},getParameter:{1:{0:!0}},drawArrays:{3:{0:!0}},drawElements:{4:{0:!0,2:!0}},createShader:{1:{0:!0}},getShaderParameter:{2:{1:!0}},getProgramParameter:{2:{1:!0}},getShaderPrecisionFormat:{2:{0:!0,1:!0}},getVertexAttrib:{2:{1:!0}},vertexAttribPointer:{6:{2:!0}},bindTexture:{2:{0:!0}},activeTexture:{1:{0:!0}},getTexParameter:{2:{0:!0,1:!0}},texParameterf:{3:{0:!0,1:!0}},texParameteri:{3:{0:!0,1:!0,2:!0}},texImage2D:{9:{0:!0,2:!0,6:!0,7:!0},6:{0:!0,2:!0,3:!0,4:!0}},texSubImage2D:{9:{0:!0,6:!0,7:!0},7:{0:!0,4:!0,5:!0}},copyTexImage2D:{8:{0:!0,2:!0}},copyTexSubImage2D:{8:{0:!0}},generateMipmap:{1:{0:!0}},compressedTexImage2D:{7:{0:!0,2:!0}},compressedTexSubImage2D:{8:{0:!0,6:!0}},bindBuffer:{2:{0:!0}},bufferData:{3:{0:!0,2:!0}},bufferSubData:{3:{0:!0}},getBufferParameter:{2:{0:!0,1:!0}},pixelStorei:{2:{0:!0,1:!0}},readPixels:{7:{4:!0,5:!0}},bindRenderbuffer:{2:{0:!0}},bindFramebuffer:{2:{0:!0}},checkFramebufferStatus:{1:{0:!0}},framebufferRenderbuffer:{4:{0:!0,1:!0,2:!0}},framebufferTexture2D:{5:{0:!0,1:!0,2:!0}},getFramebufferAttachmentParameter:{3:{0:!0,1:!0,2:!0}},getRenderbufferParameter:{2:{0:!0,1:!0}},renderbufferStorage:{4:{0:!0,1:!0}},clear:{1:{0:{enumBitwiseOr:["COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","STENCIL_BUFFER_BIT"]}}},depthFunc:{1:{0:!0}},blendFunc:{2:{0:!0,1:!0}},blendFuncSeparate:{4:{0:!0,1:!0,2:!0,3:!0}},blendEquation:{1:{0:!0}},blendEquationSeparate:{2:{0:!0,1:!0}},stencilFunc:{3:{0:!0}},stencilFuncSeparate:{4:{0:!0,1:!0}},stencilMaskSeparate:{2:{0:!0}},stencilOp:{3:{0:!0,1:!0,2:!0}},stencilOpSeparate:{4:{0:!0,1:!0,2:!0,3:!0}},cullFace:{1:{0:!0}},frontFace:{1:{0:!0}},drawArraysInstancedANGLE:{4:{0:!0}},drawElementsInstancedANGLE:{5:{0:!0,2:!0}},blendEquationEXT:{1:{0:!0}}},ku=null,Ru=null;function Du(t){if(null==ku)for(var e in ku={},Ru={},t)"number"==typeof t[e]&&(ku[t[e]]=e,Ru[e]=t[e])}function Ou(){if(null==ku)throw"WebGLDebugUtils.init(ctx) not called"}function Lu(t){Ou();var e=ku[t];return void 0!==e?"gl."+e:"/*UNKNOWN WebGL ENUM*/ 0x"+t.toString(16)}function Pu(t,e,n,i){var r;if(void 0!==(r=Su[t])&&(void 0!==(r=r[e])&&r[n])){if("object"==typeof r[n]&&void 0!==r[n].enumBitwiseOr){for(var s=r[n].enumBitwiseOr,o=0,a=[],c=0;c<s.length;++c){var u=Ru[s[c]];0!=(i&u)&&(o|=u,a.push(Lu(u)))}return o===i?a.join(" | "):Lu(i)}return Lu(i)}return null===i?"null":void 0===i?"undefined":i.toString()}function Iu(t,e,n){t.__defineGetter__(n,(function(){return e[n]})),t.__defineSetter__(n,(function(t){e[n]=t}))}function Nu(t){var e=t.getParameter(t.MAX_VERTEX_ATTRIBS),n=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,n);for(var i=0;i<e;++i)t.disableVertexAttribArray(i),t.vertexAttribPointer(i,4,t.FLOAT,!1,0,0),t.vertexAttrib1f(i,0);t.deleteBuffer(n);var r=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);for(i=0;i<r;++i)t.activeTexture(t.TEXTURE0+i),t.bindTexture(t.TEXTURE_CUBE_MAP,null),t.bindTexture(t.TEXTURE_2D,null);for(t.activeTexture(t.TEXTURE0),t.useProgram(null),t.bindBuffer(t.ARRAY_BUFFER,null),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.bindRenderbuffer(t.RENDERBUFFER,null),t.disable(t.BLEND),t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.DITHER),t.disable(t.SCISSOR_TEST),t.blendColor(0,0,0,0),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ZERO),t.clearColor(0,0,0,0),t.clearDepth(1),t.clearStencil(-1),t.colorMask(!0,!0,!0,!0),t.cullFace(t.BACK),t.depthFunc(t.LESS),t.depthMask(!0),t.depthRange(0,1),t.frontFace(t.CCW),t.hint(t.GENERATE_MIPMAP_HINT,t.DONT_CARE),t.lineWidth(1),t.pixelStorei(t.PACK_ALIGNMENT,4),t.pixelStorei(t.UNPACK_ALIGNMENT,4),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!1),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),t.UNPACK_COLORSPACE_CONVERSION_WEBGL&&t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,t.BROWSER_DEFAULT_WEBGL),t.polygonOffset(0,0),t.sampleCoverage(1,!1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.stencilFunc(t.ALWAYS,0,4294967295),t.stencilMask(4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.viewport(0,0,t.canvas.width,t.canvas.height),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT|t.STENCIL_BUFFER_BIT);t.getError(););}const Mu={init:Du,mightBeEnum:function(t){return Ou(),void 0!==ku[t]},glEnumToString:Lu,glFunctionArgToString:Pu,glFunctionArgsToString:function(t,e){for(var n="",i=e.length,r=0;r<i;++r)n+=(0==r?"":", ")+Pu(t,i,r,e[r]);return n},makeDebugContext:function t(e,n,i,r){r=r||e,Du(e),n=n||function(t,e,n){for(var i="",r=n.length,s=0;s<r;++s)i+=(0==s?"":", ")+Pu(e,r,s,n[s]);Tu("WebGL error "+Lu(t)+" in "+e+"("+i+")")};var s={};function o(t,e){return function(){i&&i(e,arguments);var o=t[e].apply(t,arguments),a=r.getError();return 0!=a&&(s[a]=!0,n(a,e,arguments)),o}}var a={};for(var c in e)if("function"==typeof e[c])if("getExtension"!=c)a[c]=o(e,c);else{var u=o(e,c);a[c]=function(){var s=u.apply(e,arguments);return t(s,n,i,r)}}else Iu(a,e,c);return a.getError=function(){for(var t in s)if(s.hasOwnProperty(t)&&s[t])return s[t]=!1,t;return e.NO_ERROR},a},makeLostContextSimulatingCanvas:function(t){var e,n,i=[],r=[],s={},o=1,a=!1,c=[],u=0,l=0,h=!1,d=0,p={};function f(t){return"function"==typeof t?t:function(e){t.handleEvent(e)}}t.getContext=(n=t.getContext,function(){var i=n.apply(t,arguments);if(i instanceof WebGLRenderingContext){if(i!=e){if(e)throw"got different context";s=w(e=i)}return s}return i});var m=function(t){i.push(f(t))},g=function(t){r.push(f(t))};function v(){++l,a||u==l&&t.loseContext()}function b(t,e){var n=t[e];return function(){if(v(),!a){var e=n.apply(t,arguments);return e}}}function y(t){return{statusMessage:t,preventDefault:function(){h=!0}}}return function(t){var e=t.addEventListener;t.addEventListener=function(n,i,r){switch(n){case"webglcontextlost":m(i);break;case"webglcontextrestored":g(i);break;default:e.apply(t,arguments)}}}(t),t.loseContext=function(){if(!a){for(a=!0,u=0,++o;e.getError(););!function(){for(var t=Object.keys(p),e=0;e<t.length;++e)delete p[t]}(),p[e.CONTEXT_LOST_WEBGL]=!0;var n=y("context lost"),r=i.slice();setTimeout((function(){for(var e=0;e<r.length;++e)r[e](n);d>=0&&setTimeout((function(){t.restoreContext()}),d)}),0)}},t.restoreContext=function(){a&&r.length&&setTimeout((function(){if(!h)throw"can not restore. webglcontestlost listener did not call event.preventDefault";!function(){for(var t=0;t<c.length;++t){var n=c[t];n instanceof WebGLBuffer?e.deleteBuffer(n):n instanceof WebGLFramebuffer?e.deleteFramebuffer(n):n instanceof WebGLProgram?e.deleteProgram(n):n instanceof WebGLRenderbuffer?e.deleteRenderbuffer(n):n instanceof WebGLShader?e.deleteShader(n):n instanceof WebGLTexture&&e.deleteTexture(n)}}(),Nu(e),a=!1,l=0,h=!1;for(var t=r.slice(),n=y("context restored"),i=0;i<t.length;++i)t[i](n)}),0)},t.loseContextInNCalls=function(t){if(a)throw"You can not ask a lost contet to be lost";u=l+t},t.getNumCalls=function(){return l},t.setRestoreTimeout=function(t){d=t},t;function w(t){for(var n in t)"function"==typeof t[n]?s[n]=b(t,n):Iu(s,t,n);s.getError=function(){if(v(),!a)for(;t=e.getError();)p[t]=!0;for(var t in p)if(p[t])return delete p[t],t;return s.NO_ERROR};for(var i=["createBuffer","createFramebuffer","createProgram","createRenderbuffer","createShader","createTexture"],r=0;r<i.length;++r){s[h=i[r]]=function(e){return function(){if(v(),a)return null;var n=e.apply(t,arguments);return n.__webglDebugContextLostId__=o,c.push(n),n}}(t[h])}var u=["getActiveAttrib","getActiveUniform","getBufferParameter","getContextAttributes","getAttachedShaders","getFramebufferAttachmentParameter","getParameter","getProgramParameter","getProgramInfoLog","getRenderbufferParameter","getShaderParameter","getShaderInfoLog","getShaderSource","getTexParameter","getUniform","getUniformLocation","getVertexAttrib"];for(r=0;r<u.length;++r){s[h=u[r]]=function(e){return function(){return v(),a?null:e.apply(t,arguments)}}(s[h])}var l=["isBuffer","isEnabled","isFramebuffer","isProgram","isRenderbuffer","isShader","isTexture"];for(r=0;r<l.length;++r){var h;s[h=l[r]]=function(e){return function(){return v(),!a&&e.apply(t,arguments)}}(s[h])}return s.checkFramebufferStatus=function(e){return function(){return v(),a?s.FRAMEBUFFER_UNSUPPORTED:e.apply(t,arguments)}}(s.checkFramebufferStatus),s.getAttribLocation=function(e){return function(){return v(),a?-1:e.apply(t,arguments)}}(s.getAttribLocation),s.getVertexAttribOffset=function(e){return function(){return v(),a?0:e.apply(t,arguments)}}(s.getVertexAttribOffset),s.isContextLost=function(){return a},s}},resetToInitialState:Nu};function Bu(t){if(this.ctx=t.getContext("2d"),null===this.ctx)throw new Error("Unable to get a 2D context");this.ctx.fillStyle="black",this.ctx.fillRect(0,0,1024,625),this.backBuffer=window.document.createElement("canvas"),this.backBuffer.width=1024,this.backBuffer.height=625,this.backCtx=this.backBuffer.getContext("2d"),this.imageData=this.backCtx.createImageData(this.backBuffer.width,this.backBuffer.height),this.canvasWidth=t.width,this.canvasHeight=t.height,this.fb32=new Uint32Array(this.imageData.data.buffer)}function Fu(t){var e={alpha:!1,antialias:!1,depth:!1,preserveDrawingBuffer:!1,stencil:!1,failIfMajorPerformanceCaveat:!0},n=t.getContext("webgl",e)||t.getContext("experimental-webgl",e);if(this.gl=n,!n)throw new Error("Unable to create a GL context");var i=Mu.makeDebugContext(n,(function(t,e){throw new Error("Problem creating GL context: "+Mu.glEnumToString(t)+" in "+e)}));function r(t,e){var n=i.createShader(t);return i.shaderSource(n,e.join("\n")),i.compileShader(n),n}i.depthMask(!1);var s=r(i.VERTEX_SHADER,["attribute vec2 pos;","attribute vec2 uvIn;","varying vec2 uv;","void main() {","  uv = uvIn;","  gl_Position = vec4(2.0 * pos - 1.0, 0.0, 1.0);","}"]),o=r(i.FRAGMENT_SHADER,["precision mediump float;","uniform sampler2D tex;","varying vec2 uv;","void main() {","  gl_FragColor = texture2D(tex, uv).rgba;","}"]),a=i.createProgram();i.attachShader(a,o),i.attachShader(a,s),i.linkProgram(a),i.useProgram(a);var c=1024,u=1024;this.fb8=new Uint8Array(4194304),this.fb32=new Uint32Array(this.fb8.buffer),this.texture=i.createTexture(),i.bindTexture(i.TEXTURE_2D,this.texture),i.pixelStorei(i.UNPACK_ALIGNMENT,4),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,c,u,0,i.RGBA,i.UNSIGNED_BYTE,this.fb8),i.bindTexture(i.TEXTURE_2D,null),i.uniform1i(i.getUniformLocation(a,"tex"),0);var l=i.getAttribLocation(a,"pos");i.enableVertexAttribArray(l);var h=i.createBuffer();i.bindBuffer(i.ARRAY_BUFFER,h),i.bufferData(i.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,0,1,1]),i.STATIC_DRAW),i.vertexAttribPointer(l,2,i.FLOAT,!1,0,0);var d=i.getAttribLocation(a,"uvIn");i.enableVertexAttribArray(d);var p=i.createBuffer();i.bindBuffer(i.ARRAY_BUFFER,p),i.vertexAttribPointer(d,2,i.FLOAT,!1,0,0),i.activeTexture(n.TEXTURE0),i.bindTexture(n.TEXTURE_2D,this.texture);var f,m,g,v,b=new Float32Array(8);this.paint=function(t,e,n,i){var r=this.gl;r.texSubImage2D(r.TEXTURE_2D,0,0,e,c,i-e,r.RGBA,r.UNSIGNED_BYTE,this.fb8.subarray(e*c*4,i*c*4)),f===t&&m===e&&g===n&&v===i||(f=t,m=e,g=n,v=i,t/=c,n/=c,e/=u,i/=u,b[0]=t,b[1]=i,b[2]=t,b[3]=e,b[4]=n,b[5]=i,b[6]=n,b[7]=e,r.bindBuffer(r.ARRAY_BUFFER,p),r.bufferData(r.ARRAY_BUFFER,b,r.DYNAMIC_DRAW)),r.drawArrays(r.TRIANGLE_STRIP,0,4)},console.log("GL Canvas set up")}Bu.prototype.paint=function(t,e,n,i){var r=n-t,s=i-e;this.backCtx.putImageData(this.imageData,0,0,t,e,r,s),this.ctx.drawImage(this.backBuffer,t,e,r,s,0,0,this.canvasWidth,this.canvasHeight)};var Uu,Hu,ju,zu=function(){};void 0!==window.nodeRequire&&(zu=function(t){const{loadDiscImage:e,processor:n}=t;window.nodeRequire("electron").ipcRenderer.on("load",(async(t,i)=>{const{drive:r,path:s}=i,o=await e(s);n.fdc.loadDisc(r,o)}))});var Ku,Gu,Wu,qu,Xu,Vu,Yu,$u=0,Qu=0,Ju=new tu,Zu=[];(Vu=[{name:"Elite",desc:"An 8-bit classic. Hit F10 to launch from the space station, then use <, >, S, X and A to fly around.",file:"elite.ssd"},{name:"Welcome",desc:"The disc supplied with BBC Disc systems to demonstrate some of the features of the system.",file:"Welcome.ssd"},{name:"Music 5000",desc:"The Music 5000 system disk and demo songs.",file:"5000mstr36008.ssd"}])&&Vu[0]&&(Yu=Vu[0].file);var tl=document.location.search.substring(1)+"&"+window.location.hash.substring(1),el=null,nl={},il=!1,rl="",sl=window.localStorage.keyLayout||"physical",ol=Ha,al=za,cl={},ul=1,ll=!1,hl=!1,dl=!1,pl=!1,fl=!1,ml=7e3,gl=5;tl&&("/"===tl[tl.length-1]&&(tl=tl.substring(0,tl.length-1)),tl.split("&").forEach((function(t){var e,i=t.split("="),r=decodeURIComponent(i[0]),s=null;if(i.length>1&&(s=decodeURIComponent(i[1])),nl[r]=s,0===r.toUpperCase().indexOf("KEY."))if(e=s.toUpperCase(),ol[e]){var o=r.substring(4).toUpperCase();al[o]?(console.log("mapping "+o+" to "+e),Ua.push({native:o,bbc:e})):console.log("unknown key: "+o)}else console.log("unknown BBC key: "+s);else if(0===r.indexOf("GP.")){var a=r.substring(3).toUpperCase();Ju.remap(a,s.toUpperCase())}else switch(r){case"LEFT":case"RIGHT":case"UP":case"DOWN":case"FIRE":Ju.remap(r,s.toUpperCase());break;case"autoboot":il="boot";break;case"autochain":il="chain";break;case"autorun":il="run";break;case"autotype":il="type",rl=s;break;case"keyLayout":sl=(s+"").toLowerCase();break;case"disc":case"disc1":Yu=s;break;case"rom":Zu.push(s);break;case"disc2":el=s;break;case"embed":n(".embed-hide").hide(),n("#about").append(" jsbeeb");break;case"fasttape":hl=!0;break;case"noseek":dl=!0;break;case"audiofilterfreq":ml=Number(s);break;case"audiofilterq":gl=Number(s)}}))),nl.frameSkip&&(Qu=parseInt(nl.frameSkip));var vl=new function(t){let e={};this.model=null;const i=document.getElementById("configuration");i.addEventListener("show.bs.modal",(()=>e={})),i.addEventListener("hide.bs.modal",(()=>t(e))),this.setModel=function(t){this.model=function(t){t=t.toLowerCase();for(let e=0;e<fu.length;++e){const n=fu[e];if(n.name.toLowerCase()===t)return n;for(let e=0;e<n.synonyms.length;++e)if(n.synonyms[e].toLowerCase()===t)return n}return null}(t),n(".bbc-model").text(this.model.name)},this.setKeyLayout=function(t){n(".keyboard-layout").text(t[0].toUpperCase()+t.substr(1))},n(".model-menu a").on("click",function(t){const i=n(t.target).attr("data-target");e.model=i,this.setModel(i)}.bind(this)),n(".keyboard-menu a").on("click",function(t){const i=n(t.target).attr("data-target");e.keyLayout=i,this.setKeyLayout(i)}.bind(this))}((function(t){var e,n,i,r;nl=Kn.extend(nl,t),$l(),t.model&&(e="Changing model requires a restart of the emulator. Restart now?",n="Yes, restart now",i="No, thanks",r=function(){window.location.reload()},Ch.find(".context").text(e),Ch.find(".ays-yes").text(n),Ch.find(".ays-no").text(i),Ch.find(".ays-yes").one("click",(function(){Th.hide(),r()})),Th.show()),t.keyLayout&&(window.localStorage.keyLayout=t.keyLayout,jl.keyLayout=t.keyLayout,Uu.updateKeyLayout())}));function bl(t,e,n){var i=t.find("img");i.hide(),e&&i.attr("src",e).bind("load",(function(){n(t,i),i.show()}))}vl.setModel(nl.model||(0===window.location.hostname.indexOf("bbc")?"B":0===window.location.hostname.indexOf("master")?"Master":"B")),vl.setKeyLayout(sl),Xu=vl.model,bl(n(".sidebar.left"),nl.sbLeft,(function(t,e){t.css({left:-e.width()-5})})),bl(n(".sidebar.right"),nl.sbRight,(function(t,e){t.css({right:-e.width()-5})})),bl(n(".sidebar.bottom"),nl.sbBottom,(function(t,e){t.css({bottom:-e.height()})})),nl.cpuMultiplier&&(ul=parseFloat(nl.cpuMultiplier),console.log("CPU multiplier set to "+ul));var yl=2*ul*1e3*1e3|0,wl=yl/10,_l=!0;void 0!==nl.glEnabled&&(_l="true"===nl.glEnabled);var xl=n("#screen"),Al=_l?function(t){try{return new Fu(t)}catch(t){console.log("Unable to use OpenGL: "+t)}return new Bu(t)}(xl[0]):new Bu(xl[0]);Hu=new function(t,e,n){function i(t,e){for(var n=0;n<786432;++n)t[n]=e[n]}this.isMaster=t,this.fb32=oc(e),this.collook=oc(new Uint32Array([4278190080,4278190335,4278255360,4278255615,4294901760,4294902015,4294967040,4294967295])),this.screenAddrAdd=new Uint16Array([16384,12288,24576,22528]),this.cursorTable=new Uint8Array([0,0,0,128,64,32,32]),this.cursorFlashMask=new Uint8Array([0,0,8,16]),this.regs=new Uint8Array(32),this.bitmapX=0,this.bitmapY=0,this.oddClock=!1,this.frameCount=0,this.doEvenFrameLogic=!1,this.isEvenRender=!0,this.lastRenderWasEven=!1,this.firstScanline=!0,this.inHSync=!1,this.inVSync=!1,this.hadVSyncThisRow=!1,this.checkVertAdjust=!1,this.endOfMainLatched=!1,this.endOfVertAdjustLatched=!1,this.endOfFrameLatched=!1,this.inVertAdjust=!1,this.inDummyRaster=!1,this.hpulseWidth=0,this.vpulseWidth=0,this.hpulseCounter=0,this.vpulseCounter=0,this.dispEnabled=mc,this.horizCounter=0,this.vertCounter=0,this.scanlineCounter=0,this.vertAdjustCounter=0,this.addr=0,this.lineStartAddr=0,this.nextLineStartAddr=0,this.ulactrl=0,this.pixelsPerChar=8,this.halfClock=!1,this.ulaMode=0,this.teletextMode=!1,this.displayEnableSkew=0,this.ulaPal=oc(new Uint32Array(16)),this.actualPal=new Uint8Array(16),this.teletext=new fc,this.cursorOn=!1,this.cursorOff=!1,this.cursorOnThisFrame=!1,this.cursorDrawIndex=0,this.cursorPos=0,this.interlacedSyncAndVideo=!1,this.doubledScanlines=!0,this.frameSkipCount=0,this.topBorder=12,this.bottomBorder=13,this.leftBorder=80,this.rightBorder=48,this.paint_ext=n,this.reset=function(t,e){this.cpu=t,this.sysvia=e,e&&(e.cb2changecallback=this.cb2changed.bind(this))},this.paint=function(){this.paint_ext(this.leftBorder,this.topBorder,1024-this.rightBorder,625-this.bottomBorder)},this.clearPaintBuffer=function(){var t=this.fb32;if(this.interlacedSyncAndVideo||!this.doubledScanlines)for(var e=1&this.frameCount;e<625;){var n=1024*e;t.fill(0,n,n+1024),e+=2}else t.fill(0)},this.paintAndClear=function(){this.dispEnabled&mc&&(this.paint(),this.clearPaintBuffer()),this.dispEnabled&=-33;var t=mc;this.frameSkipCount>1&&this.frameCount%this.frameSkipCount&&(t=0),this.dispEnabled|=t,this.bitmapY=0,1&this.regs[8]&&1&this.frameCount&&(this.bitmapY=-1)};var r=null;function s(t,e,n){var i=(e-t)*n+t;return i<0&&(i=0),i>255&&(i=255),i}function o(t,e,n){n<0&&(n=0),n>1&&(n=1);var i=t>>>8&255,r=t>>>0&255,o=e>>>8&255,a=e>>>0&255;return s(t>>>16&255,e>>>16&255,n)<<16|s(i,o,n)<<8|s(r,a,n)}function a(t,e){return t<<12|e<<4}function c(t){this.video=t,this.curReg=0,this.crtcmask=new Uint8Array([255,255,255,255,127,31,127,127,243,31,127,31,63,255,63,255,63,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0])}function u(t){this.video=t}this.debugOffset=function(t,e){return t<0||t>=1024||e<0||e>=768?-1:1024*e+t},this.debugPaint=function(){r||(r=new Uint32Array(786432)),i(r,this.fb32);var t,e;for(e=-10;e<=10;e++)for(t=-10;t<=10;++t){var n=Math.sqrt(t*t+e*e)/10;if(!(n>1)){var s=this.debugOffset(this.bitmapX+t,this.bitmapY+e);this.fb32[s]=o(this.fb32[s],16777215,Math.pow(1-n,2))}}this.paint(),i(this.fb32,r)},this.table4bpp=function(){var t,e,n,i,r=new Uint8Array(16384);for(e=0;e<256;++e){for(n=e,t=0;t<16;++t)i=0,2&n&&(i|=1),8&n&&(i|=2),32&n&&(i|=4),128&n&&(i|=8),r[a(3,e)+t]=i,n<<=1,n|=1;for(t=0;t<16;++t)r[a(2,e)+t]=r[a(3,e)+(t>>>1)],r[a(1,e)+t]=r[a(3,e)+(t>>>2)],r[a(0,e)+t]=r[a(3,e)+(t>>>3)]}return r}(),this.blitFb=function(t,e,n,i){e|=0,n|=0;var r=a(this.ulaMode,t),s=this.fb32,o=this.ulaPal,c=this.table4bpp,u=0;if(i)for(u=0;u<n;++u)s[e+u]=s[e+u+1024]=o[c[r+u]];else for(u=0;u<n;++u)s[e+u]=o[c[r+u]]},this.handleCursor=function(t){if(this.cursorOnThisFrame&&this.ulactrl&this.cursorTable[this.cursorDrawIndex]){var e;for(e=0;e<this.pixelsPerChar;++e)this.fb32[t+e]^=16777215;if(this.doubledScanlines&&!this.interlacedSyncAndVideo)for(e=0;e<this.pixelsPerChar;++e)this.fb32[t+1024+e]^=16777215}7==++this.cursorDrawIndex&&(this.cursorDrawIndex=0)},this.screenAdd=0,this.setScreenAdd=function(t){this.screenAdd=this.screenAddrAdd[t]},this.readVideoMem=function(){if(8192&this.addr){var t=1023&this.addr;return 2048&this.addr||this.isMaster?t|=31744:t|=15360,this.cpu.videoRead(t)}var e=7&this.scanlineCounter|this.addr<<3;return 4096&this.addr&&(e+=this.screenAdd),this.cpu.videoRead(32767&e)},this.endOfFrame=function(){this.vertCounter=0,this.firstScanline=!0,this.nextLineStartAddr=16383&(this.regs[13]|this.regs[12]<<8),this.lineStartAddr=this.nextLineStartAddr,this.dispEnableSet(1);var t=(96&this.regs[10])>>>5;this.cursorOnThisFrame=0===t||!!(this.frameCount&this.cursorFlashMask[t]),this.lastRenderWasEven=this.isEvenRender,this.isEvenRender=!(1&this.frameCount),this.inVSync||(this.doEvenFrameLogic=!1)},this.endOfCharacterLine=function(){this.vertCounter=this.vertCounter+1&127,this.scanlineCounter=0,this.hadVSyncThisRow=!1,this.dispEnableSet(8),this.cursorOn=!1,this.cursorOff=!1},this.endOfScanline=function(){this.firstScanline=!1,this.scanlineCounter===this.regs[11]&&(this.cursorOff=!0),this.vpulseCounter=this.vpulseCounter+1&15;var t=this.scanlineCounter===this.regs[9];(t&&(this.lineStartAddr=this.nextLineStartAddr),this.interlacedSyncAndVideo?this.scanlineCounter=this.scanlineCounter+2&30:this.scanlineCounter=this.scanlineCounter+1&31,this.teletextMode)||(this.scanlineCounter>>>3&1?this.dispEnableClear(8):this.dispEnableSet(8));!this.inVertAdjust&&t&&this.endOfCharacterLine(),this.endOfMainLatched&&!this.endOfVertAdjustLatched&&(this.inVertAdjust=!0);var e=!1;this.endOfFrameLatched&&(e=!0),this.endOfVertAdjustLatched&&(this.inVertAdjust=!1,1&this.regs[8]&&this.doEvenFrameLogic?(this.inDummyRaster=!0,this.endOfFrameLatched=!0):e=!0),e&&(this.endOfMainLatched=!1,this.endOfVertAdjustLatched=!1,this.endOfFrameLatched=!1,this.inDummyRaster=!1,this.endOfCharacterLine(),this.endOfFrame()),this.addr=this.lineStartAddr;var n=31&this.regs[10];this.scanlineCounter===n&&(this.cursorOn=!0);var i=this.scanlineCounter;this.interlacedSyncAndVideo&&1&this.frameCount&&i++,this.teletext.setRA0(!!(1&i))},this.handleHSync=function(){this.hpulseCounter=this.hpulseCounter+1&15,this.hpulseCounter===this.hpulseWidth>>>1?(this.bitmapX=-8,1&this.hpulseWidth&&(this.bitmapX-=4),this.bitmapY+=2,this.bitmapY>=768&&this.paintAndClear()):this.hpulseCounter===(15&this.regs[3])&&(this.inHSync=!1)},this.cb2changed=function(t,e){t&&e&&(this.regs[16]=this.addr>>8&63,this.regs[17]=255&this.addr)},this.dispEnableChanged=function(){var t=19==(19&this.dispEnabled);this.teletext.setDISPTMG(t)},this.dispEnableSet=function(t){this.dispEnabled|=t,this.dispEnableChanged()},this.dispEnableClear=function(t){this.dispEnabled&=~t,this.dispEnableChanged()},this.polltime=function(t){for(;t--;)if(this.oddClock=!this.oddClock,this.bitmapX+=8,!this.halfClock||this.oddClock){this.inHSync&&this.handleHSync();var e=this.displayEnableSkew+(this.teletextMode?2:0);this.horizCounter===e&&this.dispEnableSet(4),this.horizCounter===this.regs[1]&&(this.nextLineStartAddr=this.addr),this.horizCounter!==this.regs[1]+e&&this.horizCounter!==this.regs[0]+e||this.dispEnableClear(6),this.horizCounter!==this.regs[2]||this.inHSync||(this.inHSync=!0,this.hpulseCounter=0);var n=!!(1&this.regs[8]),i=this.horizCounter===this.regs[0]>>>1,r=!n||!this.doEvenFrameLogic||i,s=!1,o=!1;this.inVSync&&this.vpulseCounter===this.vpulseWidth&&r&&(s=!0,this.inVSync=!1),this.vertCounter!==this.regs[7]||this.inVSync||this.hadVSyncThisRow||!r||(o=!0,this.inVSync=!0),o&&!s&&(this.hadVSyncThisRow=!0,this.vpulseCounter=0,this.regs[0]&&this.regs[4]&&this.paintAndClear()),(o||s)&&(this.sysvia.setVBlankInt(this.inVSync),this.teletext.setDEW(this.inVSync));var a=3==(3&this.dispEnabled);if((a||this.cursorDrawIndex)&&this.dispEnabled&mc){var c=this.readVideoMem();if(a&&(this.teletextMode&&this.teletext.fetchData(c),this.addr===this.cursorPos&&this.cursorOn&&!this.cursorOff&&this.horizCounter<this.regs[1]&&(this.cursorDrawIndex=3-(this.regs[8]>>>6&3))),this.bitmapX>=0&&this.bitmapX<1024&&this.bitmapY<625){var u=!1,l=this.bitmapY;(this.doubledScanlines&&!this.interlacedSyncAndVideo||this.isEvenRender===this.lastRenderWasEven)&&(u=!0,l&=-2),l=1024*l+this.bitmapX,63==(63&this.dispEnabled)&&(this.teletextMode?(this.teletext.render(this.fb32,l),u&&this.teletext.render(this.fb32,l+1024)):this.blitFb(c,l,this.pixelsPerChar,u)),this.cursorDrawIndex&&this.handleCursor(l,u)}}this.addr=this.addr+1&16383,this.checkVertAdjust&&(this.checkVertAdjust=!1,this.endOfMainLatched&&(this.vertAdjustCounter===this.regs[5]&&(this.endOfVertAdjustLatched=!0),this.vertAdjustCounter++,this.vertAdjustCounter&=31)),1===this.horizCounter&&(this.vertCounter===this.regs[4]&&this.scanlineCounter===this.regs[9]&&(this.endOfMainLatched=!0,this.vertAdjustCounter=0),this.checkVertAdjust=!0),this.horizCounter===this.regs[0]?(this.endOfScanline(),this.horizCounter=0,this.dispEnableSet(2)):this.horizCounter=this.horizCounter+1&255;var h=this.vertCounter===this.regs[6];h&&!this.firstScanline&&1&this.dispEnabled&&(this.dispEnableClear(1),this.frameCount++);var d=this.vertCounter===this.regs[7];(h||d)&&(this.doEvenFrameLogic=!!(1&this.frameCount))}},c.prototype.read=function(t){if(!(1&t))return 0;switch(this.curReg){case 12:case 13:case 14:case 15:case 16:case 17:return this.video.regs[this.curReg]}return 0},c.prototype.write=function(t,e){if(1&t)switch(this.video.regs[this.curReg]=e&this.crtcmask[this.curReg],this.curReg){case 3:this.video.hpulseWidth=15&e,this.video.vpulseWidth=(240&e)>>>4;break;case 8:this.video.interlacedSyncAndVideo=3==(3&e);var n=(48&e)>>>4;n<3?(this.video.displayEnableSkew=n,this.video.dispEnableSet(16)):this.video.dispEnableClear(16);break;case 14:case 15:this.video.cursorPos=16383&(this.video.regs[15]|this.video.regs[14]<<8)}else this.curReg=31&e},this.crtc=new c(this),u.prototype.write=function(t,e){var n;if(e|=0,1&(t|=0)){n=e>>>4&15,this.video.actualPal[n]=15&e;var i=7&e;8&e&&1&this.video.ulactrl||(i^=7),this.video.ulaPal[n]!==this.video.collook[i]&&(this.video.ulaPal[n]=this.video.collook[i])}else{if(1&(this.video.ulactrl^e))for(var r=!!(1&e),s=0;s<16;++s)n=7&this.video.actualPal[s],r&&8&this.video.actualPal[s]||(n^=7),this.video.ulaPal[s]!==this.video.collook[n]&&(this.video.ulaPal[s]=this.video.collook[n]);this.video.ulactrl=e,this.video.pixelsPerChar=16&e?8:16,this.video.halfClock=!(16&e);var o=e>>>2&3;o!==this.video.ulaMode&&(this.video.ulaMode=o),this.video.teletextMode=!!(2&e)}},this.ula=new u(this),this.reset(null),this.clearPaintBuffer(),this.paint()}(Xu.isMaster,Al.fb32,(function(t,e,n,i){++$u<Qu||($u=0,Al.paint(t,e,n,i))})),void 0!==nl.fakeVideo&&(Hu=new gc);const El=new class{constructor(t,e,n,i){this.warningNode=t,this.audioContext="undefined"!=typeof AudioContext?new AudioContext:"undefined"!=typeof webkitAudioContext?new webkitAudioContext:null,this.audioContext?(this.audioContext.onstatechange=()=>this.checkStatus(),this.soundChip=new vu(this.audioContext.sampleRate),this.ddNoise=i?new wu:new yu(this.audioContext),this._setup(e,n)):(this.soundChip=new bu,this.ddNoise=new wu),this.warningNode.on("mousedown",(()=>this.tryResume())),this.warningNode.toggle(!1),this.audioContextM5000="undefined"!=typeof AudioContext?new AudioContext({sampleRate:46875}):"undefined"!=typeof webkitAudioContext?new webkitAudioContext({sampleRate:46875}):null,this.audioContextM5000&&(this.audioContextM5000.onstatechange=()=>this.checkStatus())}_setup(t,e){this._jsAudioNode=this.audioContext.createScriptProcessor(2048,0,1),this._jsAudioNode.onaudioprocess=t=>{const e=t.outputBuffer.getChannelData(0);this.soundChip.render(e,0,e.length)},0!==t?(this.soundChip.filterNode=this.audioContext.createBiquadFilter(),this.soundChip.filterNode.type="lowpass",this.soundChip.filterNode.frequency.value=t,this.soundChip.filterNode.Q.value=e,this._jsAudioNode.connect(this.soundChip.filterNode),this.soundChip.filterNode.connect(this.audioContext.destination)):this.soundChip._jsAudioNode.connect(this.audioContext.destination)}async tryResume(){this.audioContext&&await this.audioContext.resume(),this.audioContextM5000&&await this.audioContextM5000.resume()}checkStatus(){this.audioContext&&("suspended"===this.audioContext.state&&this.warningNode.fadeIn(),"running"===this.audioContext.state&&this.warningNode.fadeOut())}async initialise(){await this.ddNoise.initialise()}mute(){this.soundChip.mute(),this.ddNoise.mute()}unmute(){this.soundChip.unmute(),this.ddNoise.unmute()}}(n("#audio-warning"),ml,gl,dl);window.setTimeout((()=>El.checkStatus()),1e3);var Cl=1,Tl=1,Sl=1;function kl(t){var e=t.which||t.charCode||t.keyCode,n=za;switch(t.location){default:switch(e){case n.SHIFT:return 1===Cl?n.SHIFT_LEFT:n.SHIFT_RIGHT;case n.ALT:return 1===Sl?n.ALT_LEFT:n.ALT_RIGHT;case n.CTRL:return 1===Tl?n.CTRL_LEFT:n.CTRL_RIGHT}break;case 1:switch(e){case n.SHIFT:return Cl=1,n.SHIFT_LEFT;case n.ALT:return Sl=1,n.ALT_LEFT;case n.CTRL:return Tl=1,n.CTRL_LEFT}break;case 2:switch(e){case n.SHIFT:return Cl=2,n.SHIFT_RIGHT;case n.ALT:return Sl=2,n.ALT_RIGHT;case n.CTRL:return Tl=2,n.CTRL_RIGHT}break;case 3:switch(e){case n.ENTER:return za.NUMPADENTER;case n.DELETE:return za.NUMPAD_DECIMAL_POINT}}return e}ju=new class{constructor(t){function e(t,e){const n=t.find(".goto-addr");t.on("submit",(t=>{var i;e("$"===(i=n.val())[0]||"&"===i[0]?parseInt(i.substr(1),16):0===i.indexOf("0x")?parseInt(i.substr(2),16):parseInt(i,16)),n.val(""),n.blur(),t.preventDefault()}))}this.video=t,this.patchInstructions={},this._enabled=!1,this.disass=n("#disassembly"),this.disassemble=null,this._memoryView=new bc(n("#memory"),(t=>this.cpu?this.cpu.peekmem(t):0)),this.debugNode=n("#debug, #hardware_debug, #crtc_debug"),this.disassPc=0,this.disassStack=[],this.uservia=this.sysvia=this.crtc=null,this.breakpoints={},e(n("#goto-mem-addr-form"),(t=>this._memoryView.update(t))),e(n("#goto-dis-addr-form"),this.updateDisassembly.bind(this)),this.enable(!1);for(let t=0;t<16;t++)this.disass.find(".template").clone().removeClass("template").appendTo(this.disass);this.disass.find(".bp_gutter").click(this.bpClick),this.disass.bind("wheel",(t=>{let e=t.originalEvent.deltaY;if(0===e)return;let n=this.disassPc;const i=e<0?this.prevInstruction.bind(this):this.nextInstruction.bind(this);for(e=Math.abs(e);e>0;)n=i(n),e-=30;this.updateDisassembly(n),t.preventDefault()}))}setCpu(t){this.cpu=t,this.disassemble=t.disassembler.disassemble,this.sysvia=this.setupVia(n("#sysvia"),t.sysvia),this.uservia=this.setupVia(n("#uservia"),t.uservia),this.crtc=this.setupCrtc(n("#crtc_debug"),t.video)}setupCrtc(t,e){if(!e)return Ya;const n=[],i=t.find(".crtc_regs");function r(t,e){const n=t.find(".template").clone().removeClass("template").appendTo(t);return n.find(".register").text(e),n.find(".value")}for(let t=0;t<16;++t){const s=r(i,"R"+t);n.push((()=>{this.updateElem(s,Ga(e.regs[t]))}))}const s=t.find(".crtc_state"),o=["bitmapX","bitmapY","dispEnabled","horizCounter","inHSync","scanlineCounter","vertAdjustCounter","vertCounter","inVSync","endOfMainLatched","endOfVertAdjustLatched","inVertAdjust","inDummyRaster","addr","lineStartAddr","nextLineStartAddr"];for(const t of o){const i=r(s,t);"boolean"==typeof e[t]?n.push((()=>this.updateElem(i,e[t]?"true":"false"))):n.push((()=>this.updateElem(i,Wa(e[t]))))}const a=()=>{for(const t of n)t()};return a(),a}setupVia(t,e){const n=[];if(!e)return Ya;const i=["ora","orb","ira","irb","ddra","ddrb","acr","pcr","ifr","ier","t1c","t1l","t2c","t2l","portapins","portbpins","IC32"];for(const r of i){if(void 0===e[r])continue;const i=t.find(".template").clone().removeClass("template").appendTo(t);i.find(".register").text(r.toUpperCase());const s=i.find(".value");r.match(/t[12][cl]/)?n.push((()=>{const t=e[r];this.updateElem(s,Ga(t>>>16&255)+Ga(t>>>8&255)+Ga(255&t))})):n.push((()=>{this.updateElem(s,Ga(e[r]))}))}const r=()=>{for(const t of n)t()};return r(),r}updateElem(t,e){const n=t.text();n!==e&&t.text(e),t.toggleClass("changed",n!==e&&""!==n)}updateRegisters(){this.updateElem(n("#cpu6502_a"),Ga(this.cpu.a)),this.updateElem(n("#cpu6502_x"),Ga(this.cpu.x)),this.updateElem(n("#cpu6502_y"),Ga(this.cpu.y)),this.updateElem(n("#cpu6502_s"),Ga(this.cpu.s)),this.updateElem(n("#cpu6502_pc"),Wa(this.cpu.pc));for(const t of["c","z","i","d","v","n"])this.updateElem(n("#cpu6502_flag_"+t),this.cpu.p[t]?t.toUpperCase():t)}execPatch(t){const e=t.split(",");if(1!==e.length)return void Kn.each(e,this.execPatch);if(!t)return;const n=t.split(":");let i=parseInt(n[0],16);const r=n[1];for(let t=0;t<r.length;t+=2){const e=parseInt(r.substr(t,2),16);this.cpu.writemem(i,e),i++}}setPatch(t){if(Kn.each(t.split(";"),(t=>{if("@"===t[0]){const e=parseInt(t.substr(1,4),16);t=t.substr(5),this.patchInstructions[e]||(this.patchInstructions[e]=[]),this.patchInstructions[e].push(t)}else this.execPatch(t)})),0!==Object.keys(this.patchInstructions).length){const t=this.cpu.debugInstruction.add((e=>{const n=this.patchInstructions[e];return!!n&&(Kn.each(n,this.execPatch),delete this.patchInstructions[e],0===Object.keys(this.patchInstructions).length&&(console.log("All patches done"),t.remove()),!1)}))}}debug(t){this.enable(!0),this.updateDisassembly(t),this.updateRegisters(),this._memoryView.update(),this.sysvia(),this.uservia(),this.crtc(),this.video.debugPaint()}enable(t){this._enabled&&!t&&this.updatePrevMem(),this._enabled=t,this.debugNode.toggle(this._enabled)}enabled(){return this._enabled}updateDisassembly(t){this.disassPc=t;const e=this.disass.children().filter(":visible"),i=(t,e)=>{const n=this.disassemble(e),i=this._memoryView.dump(e,n[1]);t.find(".dis_addr").html(vc(e)),t.toggleClass("current",e===this.cpu.pc),t.toggleClass("highlight",e===this.disassPc),t.find(".instr_bytes").text(i.hex.join(" ")),t.find(".instr_asc").text(i.asc.join(""));const r=t.find(".disassembly").html(n[0]);return r.find(".instr_mem_ref").click(this.memClick),r.find(".instr_instr_ref").click(this.instrClick),t.find(".bp_gutter").toggleClass("active",!!this.breakpoints[e]),t.data({addr:e,ref:n[2]}),n[1]};for(let r=0;r<8;++r){t=i(n(e[r+8]),t)}t=this.disassPc;for(let r=7;r>=0;--r){t=this.prevInstruction(t);i(n(e[r]),t)}}prevInstruction(t){const e=/(RTS|B..|JMP|JSR|LD[AXY]|ST[AXY]|TA[XY]|T[XY]A|AD[DC]|SUB|SBC|CLC|SEC|CMP|EOR|ORR|AND|INC|DEC).*/,n=/.*,\s*([XY]|X\))$/;let i=(t&=65535)-1,r=0;for(let s=t-20;s!==t;s++){let o=0,a=65535&s;for(;a<t;){const s=this.disassemble(a);if(s[0]===this.cpu.pc&&(o+=10),s[0].match(e)&&!s[0].match(n)&&o++,s[1]===t&&o>r){r=o,i=a;break}a=s[1]}}return i}updatePrevMem(){this._memoryView.snapshot()}hide(){this.enable(!1)}stepUntil(t){this.cpu.targetCycles=this.cpu.currentCycles;for(let e=0;e<65536&&(this.cpu.execute(1),!t());e++);this.debug(this.cpu.pc)}step(){this.updatePrevMem();const t=this.cpu.pc;this.stepUntil((()=>this.cpu.pc!==t))}isUnconditionalJump(t){return!!this.disassemble(t)[0].match(/^(JMP|RTS|BRA)/)}stepOver(){if(this.updatePrevMem(),this.isUnconditionalJump(this.cpu.pc))return this.step();const t=this.nextInstruction(this.cpu.pc);this.stepUntil((()=>this.cpu.pc===t))}isReturn(t){return"RTS"===this.disassemble(t)[0]}stepOut(){this.updatePrevMem();const t=this.cpu.s;this.stepUntil((()=>{if(this.cpu.s>=t&&this.isReturn(this.cpu.pc)){const t=this.nextInstruction(this.cpu.pc);return this.step(),this.cpu.pc!==t}return!1}))}nextInstruction(t){return 65535&this.disassemble(t)[1]}instrClick(t){const e=n(t.target).closest(".dis_elem").data();this.disassStack.push(this.disassPc),this.updateDisassembly(e.ref)}memClick(t){const e=n(t.target).closest(".dis_elem").data();this._memoryView.update(e.ref)}toggleBreakpoint(t){this.breakpoints[t]?(console.log("Removing breakpoint from address "+Wa(t)),this.breakpoints[t].remove(),this.breakpoints[t]=void 0):(console.log("Adding breakpoint to address "+Wa(t)),this.breakpoints[t]=this.cpu.debugInstruction.add((e=>e===t)))}bpClick(t){const e=n(t.target).closest(".dis_elem").data().addr;this.toggleBreakpoint(e),n(t.target).toggleClass("active",!!this.breakpoints[e])}keyPress(t){if(n(":focus").length>0)return!1;switch(String.fromCharCode(t)){case"b":this.disassStack.length&&this.updateDisassembly(this.disassStack.pop());break;case"k":this.updateDisassembly(this.prevInstruction(this.disassPc));break;case"j":this.updateDisassembly(this.nextInstruction(this.disassPc));break;case"t":this.toggleBreakpoint(this.disassPc),this.updateDisassembly(this.disassPc);break;case"u":this._memoryView.step(8);break;case"i":this._memoryView.step(-8);break;case"U":this._memoryView.step(64);break;case"I":this._memoryView.step(-64);break;case"n":this.step();break;case"N":this.updatePrevMem(),this.cpu.execute(1),self.debug(this.cpu.pc);break;case"m":this.stepOver();break;case"o":this.stepOut()}return!0}}(Hu),n(".initially-hidden").removeClass("initially-hidden"),cl[za.S]=function(t){t&&($a("keyboard","press","S"),Ih(!0))},cl[za.R]=function(t){t&&window.location.reload()};const Rl=new Do(document.getElementById("discs"));function Dl(t){var e=new FileReader;e.onload=function(e){Uu.fdc.loadDisc(0,iu(Uu.fdc,t.name,e.target.result)),delete nl.disc,delete nl.disc1,$l(),Rl.hide()},e.readAsBinaryString(t)}var Ol=n("#paste-text");Ol.on("paste",(function(t){Vl(ja(t.originalEvent.clipboardData.getData("text/plain")),!0)})),Ol.on("dragover",(function(t){t.preventDefault(),t.stopPropagation(),t.originalEvent.dataTransfer.dropEffect="copy"})),Ol.on("drop",(function(t){$a("local","drop"),Dl(t.originalEvent.dataTransfer.files[0])}));var Ll=n("#cub-monitor");Ll.on("mousemove mousedown mouseup",(function(t){El.tryResume(),document.activeElement!==document.body&&document.activeElement.blur();var e=Ll.offset(),n=xl.offset(),i=(t.offsetX-e.left+n.left)/xl.width(),r=(t.offsetY-e.top+n.top)/xl.height();Uu.touchScreen&&Uu.touchScreen.onMouse(i,r,t.buttons),t.preventDefault()})),n(window).blur((function(){Uu.sysvia&&Uu.sysvia.clearKeys()})),n("#fs").click((function(t){xl[0].requestFullscreen(),t.preventDefault()})),document.onkeydown=function(t){if(El.tryResume(),"paste-text"!==document.activeElement.id&&qu){var e=kl(t);if(t.altKey){var n=cl[e];n&&(n(!0,e),t.preventDefault())}else e===za.HOME&&t.ctrlKey?($a("keyboard","press","home"),Ih(!0)):e===za.INSERT&&t.ctrlKey?($a("keyboard","press","insert"),ll=!ll):e===za.END&&t.ctrlKey?($a("keyboard","press","end"),pl=!0,Ih(!1)):e===za.F12||e===za.BREAK?($a("keyboard","press","break"),Uu.setReset(!0),t.preventDefault()):e===za.B&&t.ctrlKey?(Uu.sysvia.keyDown(kl(t),t.shiftKey),t.preventDefault(),function(){if(Fl&&!Fl.closed)return;(Fl=window.open("","_blank","height=300,width=400")).document.write('<textarea id="text" rows="15" cols="40" placeholder="Printer outputs here..."></textarea>'),Ul=Fl.document.getElementById("text"),Uu.uservia.setca1(!0)}()):(Uu.sysvia.keyDown(kl(t),t.shiftKey),t.preventDefault())}},document.onkeypress=function(t){if("paste-text"!==document.activeElement.id&&!qu&&(ju.enabled()||pl)){var e=kl(t);if(ju.enabled()&&103===e)return ju.hide(),void Ph();if(pl){if(103===e)return pl=!1,void Ph();if(110===e)return fl=!0,void Ph()}ju.keyPress(kl(t))&&t.preventDefault()}},document.onkeyup=function(t){if("paste-text"!==document.activeElement.id){var e=kl(t);if(Uu&&Uu.sysvia&&Uu.sysvia.keyUp(e),qu){if(t.altKey){var n=cl[e];n&&(n(!1,e),t.preventDefault())}else e!==za.F12&&e!==za.BREAK||Uu.setReset(!1);t.preventDefault()}}},document.ondragover=function(t){t.preventDefault(),t.dataTransfer.dropEffect="none"},document.ondrop=function(t){t.preventDefault()},window.onbeforeunload=function(){if(qu&&Uu.sysvia.hasAnyKeyDown())return"It seems like you're still using the emulator. If you're in Chrome, it's impossible for jsbeeb to prevent some shortcuts (like ctrl-W) from performing their default behaviour (e.g. closing the window).\nAs a workarond, create an 'Application Shortcut' from the Tools menu.  When jsbeeb runs as an application, it *can* prevent ctrl-W from closing the window."};var Pl=new Qc({load:function(){return window.localStorage.cmosRam?JSON.parse(window.localStorage.cmosRam):null},save:function(t){window.localStorage.cmosRam=JSON.stringify(t)}}),Il=null;for(var Nl=255,Ml=function(t,e){var n=1<<e-za.K1;t?Nl&=255^n:Nl|=n},Bl=za.K1;Bl<=za.K8;++Bl)cl[Bl]=Ml;Il={write:function(){},read:function(){return Nl}};var Fl=null,Ul=null;var Hl={outputStrobe:function(t,e){if(Ul&&e&&!t){var n=Uu.uservia;n.setca1(!1),n.setca1(!0);var i=String.fromCharCode(n.ora);Ul.value+=i}}},jl={keyLayout:sl,cpuMultiplier:ul,videoCyclesBatch:nl.videoCyclesBatch,extraRoms:Zu,userPort:Il,printerPort:Hl,getGamepads:function(){return navigator.getGamepads?navigator.getGamepads():[]}};function zl(t){delete nl.disc,nl.disc1=t,$l()}function Kl(){n("#sth-list li:not('.template')").remove()}function Gl(){n("#sth .loading").text("Loading catalog from STH archive"),n("#sth .loading").show(),Kl()}Uu=new $c(Xu,ju,Hu,El.soundChip,El.ddNoise,Pl,jl);const Wl=new Do(document.getElementById("sth"));function ql(t){return function(e){Kl();var i=n("#sth-list");n("#sth .loading").hide();var r=i.find(".template");!function e(s){var o=s.slice(0,100),a=s.slice(100),c=n("#sth-filter").val();n.each(o,(function(e,s){var o=r.clone().removeClass("template").appendTo(i);o.find(".name").text(s),n(o).on("click",(function(){t(s),Wl.hide()})),o.toggle(s.toLowerCase().indexOf(c)>=0)})),s.length&&Kn.delay(e,30,a)}(e)}}function Xl(){n("#sth .loading").text("There was an error accessing the STH archive"),n("#sth .loading").show(),Kl()}function Vl(t,e){var n,i=0;if(Uu.sysvia.disableKeyboard(),e){var r=null;Uu.sysvia.capsLockLight?Uu.sysvia.shiftLockLight&&(r=ol.SHIFTLOCK):r=ol.CAPSLOCK,r&&(t.unshift(r),t.push(r))}var s=Uu.debugInstruction.add((function(){var e=1e3*Uu.cycleSeconds+Uu.currentCycles/(yl/1e3);if(!(e<i)){if(n&&n!==Ha.SHIFT&&Uu.sysvia.keyToggleRaw(n),0===t.length)return Uu.sysvia.enableKeyboard(),void s.remove();var r=t[0],o=n===r;if(n=r,o)return n=void 0,void(i=e+30);var a=50;"number"==typeof n?(a=n,n=void 0):Uu.sysvia.keyToggleRaw(n),t.shift(),i=e+a}}))}function Yl(t){var e=Ha;console.log("Autobooting disc"),$a("init","autoboot",t),Vl([e.SHIFT,1e3],!1)}function $l(){var t=window.location.origin+window.location.pathname,e="?";n.each(nl,(function(n,i){t+=e+encodeURIComponent(n),i&&(t+="="+encodeURIComponent(i)),e="&"})),window.history.pushState(null,null,t)}Gu=new Jc(Gl,ql((function(t){$a("sth","click",t),zl("sth:"+t);var e=void 0!==nl.autoboot;e&&Uu.reset(!0),oh("Loading "+t),th(nl.disc1).then((function(t){Uu.fdc.loadDisc(0,t)})).then((function(){ah(),e&&Yl(t)}),(function(t){ah(t)}))})),Xl,!1),Wu=new Jc(Gl,ql((function(t){$a("sth","clickTape",t),nl.tape="sth:"+t,$l(),oh("Loading "+t),eh(nl.tape).then((function(){ah()}),(function(t){ah(t)}))})),Xl,!0),n("#sth .autoboot").click((function(){n("#sth .autoboot").prop("checked")?nl.autoboot="":delete nl.autoboot,$l()})),n(document).on("click","a.sth",(function(){var t=n(this).data("id");"discs"===t?Gu.populate():"tapes"===t?Wu.populate():console.log("unknown id",t)})),n("#sth-filter").on("change keyup",(function(){!function(t){t=t.toLowerCase(),n("#sth-list li:not('.template')").each((function(){var e=n(this);e.toggle(e.text().toLowerCase().indexOf(t)>=0)}))}(n("#sth-filter").val())}));const Ql=n("#error-dialog"),Jl=new Do(Ql[0]);function Zl(t){var e=t.match(/(([^:]+):\/?\/?|[!^|])?(.*)/),n=e[2]||e[1]||"";return{image:t=e[3],schema:n}}function th(t){if(!t)return Promise.resolve(null);var e=Zl(t);t=e.image;var n,i=e.schema;if("!"===i[0]||"local"===i)return Promise.resolve(function(t,e){const n="disc_"+e;let i;const r=localStorage[n];return r?(console.log("Loading browser-local disc "+e),i=Za(r)):(console.log("Creating browser-local disc "+e),i=new Uint8Array(hc(e).byteSize),dc(i,e)),new ru(t,n,i,(()=>{const t=Ja(this.data);try{window.localStorage.setItem(this.name,t)}catch(t){window.alert("Writing to localStorage failed: "+t)}}))}(Uu.fdc,t));if("|"===i||"sth"===i)return Gu.fetch(t).then((function(e){return iu(Uu.fdc,t,e)}));if("gd"===i){var r=t.match(/([^/]+)\/?(.*)/),s="(unknown)";return r&&(t=r[1],s=r[2]),ph({title:s,id:t})}if("data"===i){var o=lc(Array.prototype.map.call(atob(t),(t=>t.charCodeAt(0)))),a=o.data;return t=o.name,Promise.resolve(iu(Uu.fdc,t,a))}return"http"===i||"https"===i||"file"===i?tc(i+"://"+t).then((function(e){if(/\.zip/i.test(t)){var n=lc(e);e=n.data,t=n.name}return iu(Uu.fdc,t,e)})):(n="discs/"+t,console.log("Loading disc from "+n),tc(n)).then((function(e){return iu(Uu.fdc,t,e)}))}function eh(t){var e=Zl(t);t=e.image;var n,i=e.schema;if("|"===i||"sth"===i)return Wu.fetch(t).then((function(e){Uu.acia.setTape(uu(t,e))}));if("data"===i){var r=lc(Array.prototype.map.call(atob(t),(t=>t.charCodeAt(0))));return Promise.resolve(Uu.acia.setTape(uu(r.name,r.data)))}return"http"===i||"https"===i?tc(i+"://"+t).then((function(e){if(/\.zip/i.test(t)){var n=lc(e);e=n.data,t=n.name}Uu.acia.setTape(uu(t,e))})):(n="tapes/"+t,console.log("Loading tape from "+n),tc(n).then((function(t){return uu(n,t)}))).then((function(t){Uu.acia.setTape(t)}))}function nh(){return 0!==n(".modal:visible").length}n("#disc_load").change((function(t){$a("local","click"),Dl(t.target.files[0])})),n("#tape_load").change((function(t){var e=t.target.files[0],i=new FileReader;$a("local","clickTape"),i.onload=function(t){Uu.acia.setTape(uu("local file",t.target.result)),delete nl.tape,$l(),n("#tapes").modal("hide")},i.readAsBinaryString(e)}));var ih=!1;document.addEventListener("show.bs.modal",(function(){nh()||(ih=qu),qu&&Ih(!1)})),document.addEventListener("hidden.bs.modal",(function(){!nh()&&ih&&Ph()}));const rh=n("#loading-dialog"),sh=new Do(rh[0]);function oh(t){rh.find(".loading").text(t),n("#google-drive-auth").hide(),sh.show()}function ah(t){n("#google-drive-auth").hide(),t?(sh.show(),rh.find(".loading").text("Error: "+t),setTimeout((function(){sh.hide()}),5e3)):sh.hide()}var ch,uh,lh=!1,hh=new function(){var t=this,e="application/vnd.jsbeeb.disc-image",n=null,i=ru;t.initialise=function(){return new Promise((function(t){const e=document.createElement("script");e.src="https://apis.google.com/js/client.js?onload=__onGapiLoad__",window.__onGapiLoad__=function(){(n=window.gapi).client.load("drive","v2",(function(){console.log("Google Drive: available"),t(!0)}))},document.body.appendChild(e)}))},t.authorize=function(t){return new Promise((function(e,i){console.log("Authorizing",t),n.auth.authorize({client_id:"356883185894-bhim19837nroivv18p0j25gecora60r5.apps.googleusercontent.com",scope:"https://www.googleapis.com/auth/drive.file",immediate:t},(function(n){n&&!n.error?(console.log("Google Drive: authorized"),e(!0)):n&&n.error&&!t?i(new Error(n.error)):(console.log("Google Drive: Need to auth"),e(!1))}))}))};var r="-------314159265358979323846",s="\r\n--"+r+"\r\n";function o(t,i,o){var a={title:t,parents:["jsbeeb disc images"],mimeType:e},c=Ja(i),u=btoa(c),l=s+"Content-Type: application/json\r\n\r\n"+JSON.stringify(a)+s+"Content-Type: "+e+"\r\nContent-Transfer-Encoding: base64\r\n\r\n"+u+"\r\n---------314159265358979323846--";return n.client.request({path:"/upload/drive/v2/files"+(o?"/"+o:""),method:o?"PUT":"POST",params:{uploadType:"multipart",newRevision:!1},headers:{"Content-Type":'multipart/mixed; boundary="'+r+'"'},body:l})}function a(t,e,n){var r=null,s=n.title;return n.editable?(console.log("Making editable disc"),r=Kn.debounce((function(){o(this.name,this.data,n.id).then((function(){console.log("Saved ok")}))}),200)):console.log("Making read-only disc"),new i(t,s,e,r)}t.create=function(t,e){console.log("Google Drive: creating disc image: '"+e+"'");var n=hc(e).byteSize,i=new Uint8Array(n);return dc(i,e),o(e,i).then((function(e){var n=e.result;return{fileId:n.id,disc:a(t,i,n)}}))},t.load=function(t,e){var i=!1;return function(t){return n.client.drive.files.get({fileId:t})}(e).then((function(t){return i=t.result,(e=t.result).downloadUrl?new Promise((function(t,i){var r=n.auth.getToken().access_token,s=new XMLHttpRequest;s.open("GET",e.downloadUrl,!0),s.setRequestHeader("Authorization","Bearer "+r),s.overrideMimeType("text/plain; charset=x-user-defined"),s.onload=function(){200!==s.status?i(new Error("Unable to load '"+e.title+"', http code "+s.status)):"string"!=typeof s.response?t(s.response):t(Za(s.response))},s.onerror=function(){i(new Error("Error sending request for "+e))},s.send()})):Promise.resolve(null);var e})).then((function(e){return a(t,e,i)}))},t.cat=function(){return new Promise((function(t){var i=function(e,r){e.execute((function(s){r=r.concat(s.items);var o=s.nextPageToken;o?(e=n.client.drive.files.list({pageToken:o}),i(e,r)):t(r)}))};i(n.client.drive.files.list({q:"mimeType = '"+e+"'"}),[])}))}};function dh(t){return hh.authorize(t).then((function(t){return lh=t,console.log("authed =",t),t}),(function(t){console.log("Error handling google auth: "+t),fh.find(".loading").text("There was an error accessing your Google Drive account: "+t)}))}function ph(t){return oh("Loading '"+t.title+"' from Google Drive"),hh.initialise().then((function(t){if(console.log("Google Drive available =",t),!t)throw new Error("Google Drive is not available");return dh(!0)})).then((function(t){return console.log("Google Drive authed=",t),!!t||new Promise((function(t,e){ch=t,uh=e,n("#google-drive-auth").show()}))})).then((function(){return hh.load(Uu.fdc,t.id)})).then((function(t){return console.log("Google Drive loading finished"),ah(),t})).catch((function(t){console.log("Google Drive loading error:",t),ah(t)}))}n("#google-drive-auth form").on("submit",(function(t){n("#google-drive-auth").hide(),t.preventDefault(),dh(!1).then((function(t){t?ch():uh(new Error("Unable to authorize Google Drive"))}))})),n(".if-drive-available").hide(),hh.initialise().then((function(t){t&&(n(".if-drive-available").show(),dh(!0))}));const fh=n("#google-drive"),mh=new Do(fh[0]);n("#open-drive-link").on("click",(function(){return lh?mh.show():dh(!1).then((function(t){t&&mh.hide()})),!1})),fh[0].addEventListener("show.bs.modal",(function(){fh.find(".loading").text("Loading...").show(),fh.find("li").not(".template").remove(),hh.cat().then((function(t){var e=fh.find(".list");fh.find(".loading").hide();var i=e.find(".template");n.each(t,(function(t,r){var s=i.clone().removeClass("template").appendTo(e);s.find(".name").text(r.title),n(s).on("click",(function(){$a("google-drive","click",r.title),zl("gd:"+r.id+"/"+r.title),ph(r).then((function(t){Uu.fdc.loadDisc(0,t)})),mh.hide()}))}))}))}));var gh=n("#disc-list"),vh=gh.find(".template");function bh(t){var e=n("#"+t),i=!1;this.update=function(t){t!==i&&(i=t,e.toggleClass("on",i))}}n.each(Vu,(function(t,e){var i=vh.clone().removeClass("template").appendTo(gh);i.find(".name").text(e.name),i.find(".description").text(e.desc),n(i).on("click",(function(){$a("images","click",e.file),zl(e.file),th(nl.disc1).then((function(t){Uu.fdc.loadDisc(0,t)})),Rl.hide()}))})),n("#google-drive form").on("submit",(function(t){t.preventDefault();var e=n("#google-drive .disc-name").val();e&&(oh("Connecting to Google Drive"),mh.hide(),oh("Creating '"+e+"' on Google Drive"),hh.create(Uu.fdc,e).then((function(t){zl("gd:"+t.fileId+"/"+e),Uu.fdc.loadDisc(0,t.disc),ah()}),(function(t){ah(t)})))})),n("#hard-reset").click((function(t){Uu.reset(!0),t.preventDefault()})),n("#soft-reset").click((function(t){Uu.reset(!1),t.preventDefault()})),n("#tape-menu a").on("click",(function(t){var e=n(t.target).attr("data-id");void 0!==e&&("rewind"===e?(console.log("Rewinding tape to the start"),Uu.acia.rewindTape()):console.log("unknown type",e))}));var yh=new bh("motorlight"),wh=new bh("capslight"),_h=new bh("shiftlight"),xh=new bh("drive0"),Ah=new bh("drive1");Ku=function(){wh.update(Uu.sysvia.capsLockLight),_h.update(Uu.sysvia.shiftLockLight),xh.update(Uu.fdc.motorOn[0]),Ah.update(Uu.fdc.motorOn[1]),yh.update(Uu.acia.motorOn)};var Eh=Promise.all([El.initialise(),Uu.initialise()]).then((function(){Uu.model.hasMusic5000&&El.audioContextM5000.audioWorklet.addModule("./music5000worklet.js").then((()=>{El.music5000workletnode=new AudioWorkletNode(El.audioContextM5000,"music5000",{outputChannelCount:[2]}),El.music5000workletnode.connect(El.audioContextM5000.destination),Uu.initialiseM5000(El.music5000workletnode)}));var t=[];function e(e,n){t.push(e.then((function(t){return Cu().then((function(e){return e.tokenise(t)}))})).then((function(t){var e=Uu.model.isMaster?59366:58753,i=Uu.debugInstruction.add((function(r){if(r===e){for(var s=Uu.readmem(24)<<8,o=0;o<t.length;++o)Uu.writemem(s+o,t.charCodeAt(o));var a=s+t.length,c=255&a,u=a>>>8&255;Uu.writemem(2,c),Uu.writemem(3,u),Uu.writemem(18,c),Uu.writemem(19,u),i.remove(),n&&function(){console.log("Auto Running basic"),$a("init","autorunbasic");var t=ja("RUN\n");Vl([1e3].concat(t),!1)}()}}))})))}if(Yu&&t.push(th(Yu).then((function(t){Uu.fdc.loadDisc(0,t)}))),el&&t.push(th(el).then((function(t){Uu.fdc.loadDisc(1,t)}))),nl.tape&&t.push(eh(nl.tape)),nl.loadBasic){var n="run"===il;il="",e(new Promise((function(t){tc(nl.loadBasic).then((function(e){t(String.fromCharCode.apply(null,e))}))})),n)}return nl.embedBasic&&e(new Promise((function(t){t(nl.embedBasic)})),!0),Promise.all(t)}));Eh.then((function(){switch(il){case"boot":n("#sth .autoboot").prop("checked",!0),Yl(Yu);break;case"type":!function(t){console.log("Auto typing '"+t+"'"),$a("init","autochain");var e=ja(t);Vl([1e3].concat(e),!1)}(rl);break;case"chain":!function(){console.log("Auto Chaining Tape"),$a("init","autochain");var t=ja('*TAPE\nCH.""\n');Vl([1e3].concat(t),!1)}();break;case"run":!function(){console.log("Auto Running Tape"),$a("init","autorun");var t=ja("*TAPE\n*/\n");Vl([1e3].concat(t),!1)}();break;default:n("#sth .autoboot").prop("checked",!1)}nl.patch&&ju.setPatch(nl.patch),Ph()}),(function(t){!function(t,e){Ql.find(".context").text(t),Ql.find(".error").text(e),Jl.show()}("initialising",t),console.log(t)}));const Ch=n("#are-you-sure"),Th=new Do(Ch[0]);function Sh(t){t=t||1e7;var e=Qu;Qu=1e6;var n=performance.now();Uu.execute(t);var i=performance.now();Qu=e;var r=i-n,s=t/r/1e3;console.log("Took "+r+"ms to execute "+t+" cycles"),console.log("Virtual "+s.toFixed(2)+"MHz")}function kh(t){t=t||1e7;var e=Qu;Qu=1e6;var n=performance.now();Hu.polltime(t);var i=performance.now();Qu=e;var r=i-n,s=t/r/1e3;console.log("Took "+r+"ms to execute "+t+" video cycles"),console.log("Virtual "+s.toFixed(2)+"MHz")}var Rh=0;var Dh=new function(){this.cycles=0,this.time=0,this.v=n(".virtualMHz"),this.header=n("#virtual-mhz-header"),this.speedy=!1,this.update=function(t,e,n){this.cycles+=t,this.time+=e,this.speedy=n},this.display=function(){if(this.cycles){var t=this.cycles/this.time/1e3;this.v.text(t.toFixed(1)),this.cycles>=2e7&&(this.cycles=this.time=0);var e="white";this.speedy&&(e="red"),this.header.css("color",e)}setTimeout(this.display.bind(this),3333)},this.display()};function Oh(t){if(qu){void 0===t&&(t=window.performance.now());var e=Uu.acia.motorOn,n=ll||hl&&e,i=n||e,r=n?0:20,s=n?9:0;if(Hu.frameSkipCount=s,i?window.setTimeout(Oh,r):window.requestAnimationFrame(Oh),Ju.update(Uu.sysvia),Ku(),0!==Rh){var o;if(n)o=yl/50;else o=(t-Rh)*yl/1e3,o=Math.min(o,wl);o|=0;try{Uu.execute(o)||Ih(!0);var a=performance.now();Dh.update(o,a-t,n)}catch(t){throw qu=!1,$a("exception","thrown",t.stack),ju.debug(Uu.pc),t}fl&&(Ih(!1),fl=!1)}Rh=t}else Rh=0}let Lh=!1;function Ph(){El.unmute(),qu=!0,window.requestAnimationFrame(Oh)}function Ih(t){qu=!1,Uu.stop(),t&&ju.debug(Uu.pc),El.mute()}document.addEventListener("visibilitychange",(function(){"hidden"===document.visibilityState?(Lh=qu,qu&&!Uu.acia.motorOn&&Ih(!1)):Lh&&Ph()}),!1),function(){const t=n("#cub-monitor"),e=n("#cub-monitor-pic"),i=e.attr("height"),r=e.attr("width"),s=xl.attr("height")/i,o=xl.attr("width")/r,a=n("#header-bar").height(),c=r/i,u=r/4,l=i/4;function h(){let n=Math.max(u,window.innerWidth-200),i=Math.max(l,window.innerHeight-a-100);n/i<=c?i=n/c:n=i*c,t.height(i).width(n),e.height(i).width(n),xl.height(i*s).width(n*o)}window.onresize=h,h()}(),window.benchmarkCpu=Kn.debounce(Sh,1),window.profileCpu=Kn.debounce((function(t){console.profile("CPU"),Sh(t),console.profileEnd()}),1),window.benchmarkVideo=Kn.debounce(kh,1),window.profileVideo=Kn.debounce((function(t){console.profile("Video"),kh(t),console.profileEnd()}),1),window.go=Ph,window.stop=Ih,window.soundChip=El.soundChip,window.processor=Uu,window.video=Hu,window.hd=function(t,e){console.log(qa((function(t){return Uu.readmem(t)}),t,e))},window.m7dump=function(){console.log(qa((function(t){return 127&Uu.readmem(t)}),31744,32744,{width:40,gap:!1}))},zu({loadDiscImage:th,processor:Uu})})()})();
//# sourceMappingURL=main.9aaac8e35325c80f1079.js.map